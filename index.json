[{"authors":null,"categories":null,"content":"","date":1611878400,"expirydate":-62135596800,"kind":"term","lang":"zh","lastmod":1611878400,"objectID":"7e67303e3d29a2216e9a2e04059938a0","permalink":"https://CoMath21.github.io/authors/comath/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/comath/","section":"authors","summary":"","tags":null,"title":"CoMath","type":"authors"},{"authors":null,"categories":null,"content":"å…³äºæˆ‘ 96åï¼Œ2019çº§è®¡ç®—æ•°å­¦ç¡•å£«åœ¨è¯»ï¼Œ ä¸€ä¸ªåˆšæ­¥å…¥è®¡ç®—æ•°å­¦é¢†åŸŸçš„å°å­¦ç”ŸğŸ˜‚ï¼›æœ¬ç§‘ä¸“ä¸šä¿¡æ¯ä¸è®¡ç®—ç§‘å­¦ï¼Œå½“åˆä½œä¸ºä¸€ä¸ªåˆšåˆšæ­¥å…¥å¤§å­¦ç”Ÿæ´»çš„å°å¹´è½»ï¼Œæ²¡æœ‰è¿‡å¤šçš„è€ƒè™‘ï¼Œåªæƒ³æ¯•ä¸šå·¥ä½œæŒ£é’±ğŸ˜…. åœ¨è’åºŸäº†ä¸€å¹´çš„æ—¶é—´åï¼Œå¼€å§‹å­¦ä¹ è®¡ç®—æœºç¼–ç¨‹. C++å…¥é—¨ï¼Œåè‡ªå­¦Javaè¿›é˜¶(ä¹Ÿå¿«å¿˜çš„å·®ä¸å¤šäº†ğŸ˜–ï¼Œä¸è¿‡ç¼–ç¨‹çš„æ€æƒ³è¿˜åœ¨)ï¼Œç›®å‰èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡Matlabå’ŒPython(ç¨å·®ä¸€ç‚¹). ç›¸æ¯”è¾ƒäºç¼–ç¨‹ï¼Œå¯¹æ•°å­¦çš„çƒ­çˆ±ç•¥å°‘ä¸€ç‚¹(æ•°å­¦åº•å­è¾ƒå·®)ï¼Œå¸Œæœ›ä»¥åèƒ½å¤Ÿå¼¥è¡¥è¿™ä¸€çŸ­æ¿. ä¸ä¼šæŠ½çƒŸï¼Œè·Ÿæœ‹å‹ä¼šå°é…Œä¸€æ¯ï¼Œå–œæ¬¢åŠ¨ç”µå½±ã€åŠ¨æ¼«ï¼›è¿åŠ¨ç»†èƒæ¯”è¾ƒç¨€ç¼ºï¼Œä»ä¸æ–­å¼€å‘è®­ç»ƒä¸­ğŸ’ª.\nä¸ºä»€ä¹ˆå†™åšå®¢ å…¶å®åœ¨æˆ‘å¤§ä¸‰çš„æ—¶å€™å°±å·²ç»è°‹ç”Ÿäº†åšä¸ªäººåšå®¢çš„æƒ³æ³•ğŸ¤”ï¼Œå½“æ—¶çš„æˆ‘è¿˜æ˜¯ä¸€å¿ƒæƒ³ç€æ¯•ä¸šä¹‹åå·¥ä½œï¼Œä¸€ç›´åŸ‹å¤´äºå­¦ç¨‹åºã€æ•²ä»£ç ï¼Œå¾ˆå¤šå­¦ä¹ ç¬”è®°ä¹Ÿæ˜¯åœ¨é‚£ä¸ªæ—¶å€™ç§¯ç´¯çš„ï¼›å‡­å€Ÿå½“åˆå­¦ä¹ çš„Javaã€æ•°æ®åº“ç­‰çŸ¥è¯†ç¡®å®åšäº†ä¸€ä¸ªåŸºäºSSHæ¡†æ¶çš„ä¸ªäººåšå®¢(å¦‚æœè¿˜èƒ½é‡æ–°æ­å»ºå‡ºåŸæ¥çš„ç¯å¢ƒï¼Œæˆ‘ä¼šå°†è¿™ä¸ªåšå®¢çš„ä»£ç å…±äº«å‡ºæ¥ğŸ˜)ï¼Œæƒ³çš„æ˜¯å¯ä»¥å°†å­¦è¿‡çš„ç¼–ç¨‹è¯­è¨€ã€é‡åˆ°çš„å„ç§Bugè¿›è¡Œæ•´ç†ç•™ä¸ªå¤‡ä»½ï¼Œæ–¹ä¾¿è‡ªå·±éšæ—¶ç¿»é˜…ï¼›è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯æƒ³ç€æœ‰è¿™æ ·ä¸€ä¸ªå®Œå…¨ç”±è‡ªå·±æ­å»ºçš„Blogèƒ½å¤Ÿå¾—åˆ°HRçš„è®¤å¯ğŸ˜„.ç›´åˆ°åæ¥é€‰æ‹©è¯»ç ”å°±ä¸€ç›´æ”¾ä¸‹äº†ï¼Œç°åœ¨å†æ¡èµ·æ¥çš„ç›®çš„ä¸€æ˜¯ä¸ºäº†ä¸æƒ³è®©å½“åˆæ•´ç†çš„ç¬”è®°æ— å¤„å®‰æ”¾ï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯ä¸ºäº†ç£ä¿ƒè‡ªå·±èƒ½å¤Ÿåœ¨å­¦ä¹ æ–°çŸ¥è¯†çš„åŒæ—¶èƒ½æŠŠå®ƒè®²å‡ºæ¥ï¼Œåˆ†äº«å‡ºæ¥ï¼Œè¿™æ ·å¯¹è‡ªå·±ä¹Ÿæ˜¯æœ‰æ¨åŠ¨ä½œç”¨çš„ğŸ§. ","date":1611878400,"expirydate":-62135596800,"kind":"term","lang":"zh","lastmod":1611878400,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"https://CoMath21.github.io/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"å…³äºæˆ‘ 96åï¼Œ2019çº§è®¡ç®—æ•°å­¦ç¡•å£«åœ¨è¯»ï¼Œ ä¸€ä¸ªåˆšæ­¥å…¥è®¡ç®—æ•°å­¦é¢†åŸŸçš„å°å­¦ç”ŸğŸ˜‚ï¼›æœ¬ç§‘ä¸“ä¸šä¿¡æ¯ä¸è®¡ç®—ç§‘å­¦ï¼Œå½“åˆä½œä¸ºä¸€ä¸ªåˆšåˆšæ­¥å…¥å¤§å­¦ç”Ÿæ´»çš„å°å¹´è½»ï¼Œæ²¡æœ‰è¿‡å¤šçš„è€ƒè™‘ï¼Œåªæƒ³æ¯•ä¸šå·¥ä½œæŒ£é’±ğŸ˜…. åœ¨è’åºŸäº†ä¸€å¹´çš„æ—¶é—´åï¼Œå¼€å§‹å­¦ä¹ è®¡ç®—æœºç¼–ç¨‹. C++å…¥é—¨ï¼Œåè‡ªå­¦Javaè¿›é˜¶(ä¹Ÿå¿«å¿˜çš„å·®ä¸å¤šäº†ğŸ˜–ï¼Œä¸è¿‡ç¼–ç¨‹çš„æ€æƒ³è¿˜åœ¨)ï¼Œç›®å‰èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡Matlabå’ŒPython(ç¨å·®ä¸€ç‚¹). ç›¸æ¯”è¾ƒäºç¼–ç¨‹ï¼Œå¯¹æ•°å­¦çš„çƒ­çˆ±ç•¥å°‘ä¸€ç‚¹(æ•°å­¦åº•å­è¾ƒå·®)ï¼Œå¸Œæœ›ä»¥åèƒ½å¤Ÿå¼¥è¡¥è¿™ä¸€çŸ­æ¿. ä¸ä¼šæŠ½çƒŸï¼Œè·Ÿæœ‹å‹ä¼šå°é…Œä¸€æ¯ï¼Œå–œæ¬¢åŠ¨ç”µå½±ã€åŠ¨æ¼«ï¼›è¿åŠ¨ç»†èƒæ¯”è¾ƒç¨€ç¼ºï¼Œä»ä¸æ–­å¼€å‘è®­ç»ƒä¸­ğŸ’ª.\nä¸ºä»€ä¹ˆå†™åšå®¢ å…¶å®åœ¨æˆ‘å¤§ä¸‰çš„æ—¶å€™å°±å·²ç»è°‹ç”Ÿäº†åšä¸ªäººåšå®¢çš„æƒ³æ³•ğŸ¤”ï¼Œå½“æ—¶çš„æˆ‘è¿˜æ˜¯ä¸€å¿ƒæƒ³ç€æ¯•ä¸šä¹‹åå·¥ä½œï¼Œä¸€ç›´åŸ‹å¤´äºå­¦ç¨‹åºã€æ•²ä»£ç ï¼Œå¾ˆå¤šå­¦ä¹ ç¬”è®°ä¹Ÿæ˜¯åœ¨é‚£ä¸ªæ—¶å€™ç§¯ç´¯çš„ï¼›å‡­å€Ÿå½“åˆå­¦ä¹ çš„Javaã€æ•°æ®åº“ç­‰çŸ¥è¯†ç¡®å®åšäº†ä¸€ä¸ªåŸºäºSSHæ¡†æ¶çš„ä¸ªäººåšå®¢(å¦‚æœè¿˜èƒ½é‡æ–°æ­å»ºå‡ºåŸæ¥çš„ç¯å¢ƒï¼Œæˆ‘ä¼šå°†è¿™ä¸ªåšå®¢çš„ä»£ç å…±äº«å‡ºæ¥ğŸ˜)ï¼Œæƒ³çš„æ˜¯å¯ä»¥å°†å­¦è¿‡çš„ç¼–ç¨‹è¯­è¨€ã€é‡åˆ°çš„å„ç§Bugè¿›è¡Œæ•´ç†ç•™ä¸ªå¤‡ä»½ï¼Œæ–¹ä¾¿è‡ªå·±éšæ—¶ç¿»é˜…ï¼›è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯æƒ³ç€æœ‰è¿™æ ·ä¸€ä¸ªå®Œå…¨ç”±è‡ªå·±æ­å»ºçš„Blogèƒ½å¤Ÿå¾—åˆ°HRçš„è®¤å¯ğŸ˜„.ç›´åˆ°åæ¥é€‰æ‹©è¯»ç ”å°±ä¸€ç›´æ”¾ä¸‹äº†ï¼Œç°åœ¨å†æ¡èµ·æ¥çš„ç›®çš„ä¸€æ˜¯ä¸ºäº†ä¸æƒ³è®©å½“åˆæ•´ç†çš„ç¬”è®°æ— å¤„å®‰æ”¾ï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯ä¸ºäº†ç£ä¿ƒè‡ªå·±èƒ½å¤Ÿåœ¨å­¦ä¹ æ–°çŸ¥è¯†çš„åŒæ—¶èƒ½æŠŠå®ƒè®²å‡ºæ¥ï¼Œåˆ†äº«å‡ºæ¥ï¼Œè¿™æ ·å¯¹è‡ªå·±ä¹Ÿæ˜¯æœ‰æ¨åŠ¨ä½œç”¨çš„ğŸ§. ","tags":null,"title":"Xinæ€å¥½å…ˆç”Ÿ","type":"authors"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"Hibernate æ˜¯ä»€ä¹ˆï¼Ÿ  hibernateæ˜¯ä¸€ä¸ªè½»é‡çº§JavaEEåº”ç”¨çš„æŒä¹…å±‚æ¡†æ¶ï¼ˆframeworkï¼‰ hibernateæ˜¯ä¸€ä¸ªORMï¼ˆobject relation mappingå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶  o object -\u0026gt; ä¸šåŠ¡å±‚(åªå¯¹å¯¹è±¡æ“ä½œ) r relation-\u0026gt; å…³ç³»æ•°æ®åº“ï¼Œå…³ç³»å‹æ•°æ®åº“ä¸­äºŒç»´è¡¨ m mapping å¯¹è±¡å…³ç³»æ˜ å°„æ–‡ä»¶  javaç±»\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\u0026gt;è¡¨ javaå¯¹è±¡\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;\u0026gt;è¡¨ä¸­è®°å½• javaå¯¹è±¡å±æ€§\u0026mdash;\u0026mdash;-\u0026gt;è¡¨ä¸­å­—æ®µ     hibernate å¤„äºæˆ‘ä»¬é¡¹ç›®çš„æŒä¹…å±‚ä½ç½®(æ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰€ä»¥æœ‰äººåˆæŠŠhibernateç§°ä¸º æŒä¹…å±‚æ¡†æ¶) hibernate å®é™…ä¸Šå°±æ˜¯å¯¹jdbcè¿›è¡Œäº†è½»é‡çº§çš„å°è£…. hibernate çš„åŸºç¡€è¿˜æ˜¯æˆ‘ä»¬javaåå°„æœºåˆ¶  æ‰‹åŠ¨é…ç½®hibernateæ–¹å¼å®Œæˆcrudæ“ä½œ ã€€é¦–å…ˆåˆ›å»ºé¡¹ç›®ï¼Œå†å¼•å…¥jaråŒ…. hibernateå¼€å‘çš„ä¸‰ç§æ–¹å¼ï¼š\n ç”±domain object â€“\u0026gt; mapping -\u0026gt; db (å®˜æ–¹æ¨è). ç”±DBå¼€å§‹ï¼Œç”¨å·¥å…·ç”Ÿæˆmappingå’Œdomain object (ä½¿ç”¨è¾ƒå¤š). ç”±æ˜ å°„å¼€å§‹.  Employee.hbml.xmlé…ç½®æ–‡ä»¶ \u0026lt;!DOCTYPE hibernate-mapping PUBLIC \u0026quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN\u0026quot; \u0026quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\u0026quot;\u0026gt; \u0026lt;hibernate-mapping package=\u0026quot;com.hsp.domain\u0026quot;\u0026gt; \u0026lt;class name=\u0026quot;Employee\u0026quot; table=\u0026quot;employee\u0026quot;\u0026gt; \u0026lt;!-- idå…ƒç´ ç”¨äºæŒ‡å®šä¸»é”®å±æ€§ --\u0026gt; \u0026lt;id name=\u0026quot;id\u0026quot; column=\u0026quot;id\u0026quot; type=\u0026quot;java.lang.Integer\u0026quot;\u0026gt; \u0026lt;!-- è¯¥å…ƒç´ ç”¨äºæŒ‡å®šä¸»é”®å€¼ç”Ÿæˆç­–ç•¥hilo native increment sequence uuid --\u0026gt; \u0026lt;generator class=\u0026quot;sequence\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;sequence\u0026quot;\u0026gt;emp_seq\u0026lt;/param\u0026gt; \u0026lt;/generator\u0026gt; \u0026lt;/id\u0026gt; \u0026lt;!-- å¯¹å…¶å®ƒå±æ€§è¿˜æœ‰é…ç½® --\u0026gt; \u0026lt;property name=\u0026quot;name\u0026quot; type=\u0026quot;java.lang.String\u0026quot;\u0026gt; \u0026lt;column name=\u0026quot;name\u0026quot; not-null=\u0026quot;false\u0026quot; /\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;email\u0026quot; type=\u0026quot;java.lang.String\u0026quot; \u0026gt; \u0026lt;column name=\u0026quot;email\u0026quot; not-null=\u0026quot;false\u0026quot;/\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;hiredate\u0026quot; type=\u0026quot;java.util.Date\u0026quot;\u0026gt; \u0026lt;column name=\u0026quot;hiredate\u0026quot; not-null=\u0026quot;false\u0026quot; /\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/class\u0026gt;\t\u0026lt;/hibernate-mapping\u0026gt;  hibernate.cfg.xmlé…ç½®æ–‡ä»¶ \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot;?\u0026gt; \u0026lt;!DOCTYPE hibernate-configuration PUBLIC \u0026quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN\u0026quot; \u0026quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\u0026quot;\u0026gt; \u0026lt;hibernate-configuration\u0026gt; \u0026lt;session-factory\u0026gt; \u0026lt;!-- hibernate è®¾è®¡è€…ï¼Œç»™æˆ‘ä»¬æä¾›äº†ä¸€å†™å¸¸ç”¨çš„é…ç½® --\u0026gt; \u0026lt;!-- é…ç½®ä½¿ç”¨çš„driver --\u0026gt; \u0026lt;property name=\u0026quot;connection.driver_class\u0026quot;\u0026gt;oracle.jdbc.driver.OracleDriver\u0026lt;/property\u0026gt; \u0026lt;!-- é…ç½®ä½¿ç”¨çš„è´¦æˆ·å¯†ç  --\u0026gt; \u0026lt;property name=\u0026quot;connection.username\u0026quot;\u0026gt;scott\u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;connection.password\u0026quot;\u0026gt;tiger\u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;connection.url\u0026quot;\u0026gt;jdbc:oracle:thin:@127.0.0.1:1521:orclhsp\u0026lt;/property\u0026gt; \u0026lt;!-- é…ç½®dialectæ–¹è¨€,æ˜ç¡®å‘Šè¯‰hibernateè¿æ¥æ˜¯å“ªç§æ•°æ®åº“ --\u0026gt; \u0026lt;property name=\u0026quot;dialect\u0026quot;\u0026gt;org.hibernate.dialect.OracleDialect\u0026lt;/property\u0026gt; \u0026lt;!-- æ˜¾ç¤ºå‡ºå¯¹äºsqlè¯­å¥ --\u0026gt; \u0026lt;property name=\u0026quot;show_sql\u0026quot;\u0026gt;true\u0026lt;/property\u0026gt; \u0026lt;!-- æŒ‡å®šç®¡ç†çš„å¯¹è±¡æ˜ å°„æ–‡ä»¶ --\u0026gt; \u0026lt;mapping resource=\u0026quot;com/hsp/domain/Employee.hbm.xml\u0026quot;/\u0026gt; \u0026lt;/session-factory\u0026gt; \u0026lt;/hibernate-configuration\u0026gt;  è¯´æ˜ï¼š\n connection.driver_class:åœ¨etcä¸‹å¯ä»¥æ‰¾åˆ°ï¼› hibernate.cfg.xmlæ–‡ä»¶å¯ä»¥ä¸å†™ï¼Œä½†è¦åœ¨springä¸­é…ç½®.  æµ‹è¯•æ–‡ä»¶TestMain.java package com.hsp.view; import com.hsp.util.*; import java.util.Date; import org.hibernate.Session; import org.hibernate.SessionFactory; import org.hibernate.Transaction; import org.hibernate.cfg.*; import com.hsp.domain.Employee; public class TestMain { public static void main(String[] args) { //æŸ¥è¯¢[load]-\u0026gt;hqlè¯­å¥(hibernate query language) } public static void delEmp() { //åˆ é™¤ //è·å–ä¸€ä¸ªsession Session session=MySessionFactory.getSessionFactory().openSession(); Transaction ts=session.beginTransaction(); //åˆ é™¤1.å…ˆè·å–è¯¥é›‡å‘˜ï¼Œç„¶ååˆ é™¤ Employee emp=(Employee) session.load(Employee.class, 3); session.delete(emp); ts.commit(); session.close(); } public static void updateEmp() { // TODO Auto-generated method stub //ä¿®æ”¹ç”¨æˆ· //è·å–ä¸€ä¸ªä¼šè¯ Session session=MySessionFactory.getSessionFactory().openSession(); Transaction ts=session.beginTransaction(); //ä¿®æ”¹ç”¨æˆ·1. è·å–è¦ä¿®æ”¹çš„ç”¨æˆ·ï¼Œ2.ä¿®æ”¹ //loadæ˜¯é€šè¿‡ä¸»é”®å±æ€§ï¼Œè·å–è¯¥å¯¹è±¡å®ä¾‹.\u0026lt;---\u0026gt;è¡¨çš„è®°å½•å¯¹åº” Employee emp=(Employee) session.load(Employee.class, 3); emp.setName(\u0026quot;éŸ©é¡ºå¹³8\u0026quot;);//update... emp.setEmail(\u0026quot;abc@sohu.com\u0026quot;); ts.commit(); session.close(); } public static void addEmployee() { //æˆ‘ä»¬ä½¿ç”¨hibernateå®Œæˆcrudæ“ä½œ[è¿™é‡Œæˆ‘ä»¬åªè§å¯¹è±¡ï¼Œä¸è§è¡¨] //ç°åœ¨æˆ‘ä»¬ä¸æ˜¯ç”¨service ,ç›´æ¥æµ‹è¯•. //1. åˆ›å»ºConfiguration,è¯¥å¯¹è±¡ç”¨äºè¯»å–hibernate.cfg.xml,å¹¶å®Œæˆåˆå§‹åŒ– Configuration configuration=new Configuration().configure(); //2.åˆ›å»ºSessoinFactory[è¿™æ˜¯ä¸€ä¸ªä¼šè¯å·¥å‚ï¼Œæ˜¯ä¸€ä¸ªé‡é‡çº§çš„å¯¹è±¡] SessionFactory sessionFactory=configuration.buildSessionFactory(); //3.åˆ›å»ºSessoin ç›¸å½“äºjdbc Connection[ servelt HttpSession ,ä¹Ÿä¸æ˜¯ jsp session] Session session=sessionFactory.openSession(); //4.å¯¹hiberateè€Œè¨€ï¼Œè¦æ±‚åœ¨è¿›è¡Œ å¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹çš„æ—¶å€™ä½¿ç”¨äº‹åŠ¡æäº¤ï¼Œ Transaction transaction = session.beginTransaction(); //æ·»åŠ ä¸€ä¸ªé›‡å‘˜ Employee employee=new Employee(); employee.setName(\u0026quot;shunping\u0026quot;); employee.setEmail(\u0026quot;shunping@sohu.com\u0026quot;); employee.setHiredate(new Date()); //insert ............. //ä¿å­˜ session.save(employee);//save employeeå°±æ˜¯æŒä¹…åŒ–è¯¥å¯¹è±¡ (æŠŠå¯¹è±¡ä¿å­˜åˆ°äº†æ•°æ®åº“ä¸­ç§°ä¸ºä¸€æ¡è®°å½•) //==\u0026gt;insert into ....[è¢«hiberanteå°è£…] //æäº¤ transaction.commit(); session.close(); } }  ã€€\u0026lt;Hibernate-mapping\u0026gt;æ ‡ç­¾çš„å±æ€§å¦‚ä¸‹ï¼š\n packageï¼šæŒ‡å®šä¸€ä¸ªåŒ…å‰ç¼€ï¼Œå¦‚æœåœ¨æ˜ å°„æ–‡æ¡£ä¸­(å°±æ˜¯åœ¨classæ ‡ç­¾çš„é‚£ä¹ˆå±æ€§é‡Œæ²¡æœ‰æŒ‡å®šå…¨ç±»å)æ²¡æœ‰æŒ‡å®šå…¨é™å®šçš„ç±»åï¼Œå°±ä½¿ç”¨è¿™ä¸ªä½œä¸ºåŒ…å. schemaï¼šæ•°æ®åº“schemaçš„åç§°. catalogï¼šæ•°æ®åº“catalogçš„åç§°. default-cascadeï¼šé»˜è®¤çš„çº§è”é£æ ¼,é»˜è®¤ä¸ºnone. default-accessï¼šHibernateç”¨æ¥è®¿é—®å±æ€§çš„ç­–ç•¥. default-lazyï¼šæŒ‡å®šäº†æ­¤å±æ€§ï¼Œæœªæ˜ç¡®æ³¨æ˜lazyå±æ€§çš„Javaå±æ€§å’Œé›†åˆç±»ï¼ŒHibernateä¼šé‡‡å–çš„é»˜è®¤ä½¿ç”¨è¿™ä¸ªå±æ€§åŠ è½½é£æ ¼,é»˜è®¤ä¸ºtrue. auto-importï¼šæŒ‡å®šæˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨æŸ¥è¯¢è¯­è¨€ä¸­ä½¿ç”¨éå…¨é™å®šçš„ç±»å,é»˜è®¤ä¸ºtrue,å¦‚æœé¡¹ç›®ä¸­æœ‰ä¸¤ä¸ªåŒåçš„æŒä¹…åŒ–ç±»,åˆ™æœ€å¥½åœ¨è¿™ä¸¤ä¸ªç±»çš„å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½®ä¸ºfalse.  ã€€Hibernateçš„å­æ ‡ç­¾classæ ‡ç­¾ï¼š\n class å…ƒç´ ç”¨äºæŒ‡å®šç±»å’Œè¡¨çš„æ˜ å°„ . name:æŒ‡å®šè¯¥æŒä¹…åŒ–ç±»æ˜ å°„çš„æŒä¹…åŒ–ç±»çš„ç±»å.  example:\u0026lt;class name=\u0026quot;com.jeremy.hibernate.example.News\u0026quot; table=\u0026quot;NEWS\u0026quot;\u0026gt;.   table:æŒ‡å®šè¯¥æŒä¹…åŒ–ç±»æ˜ å°„çš„è¡¨å, Hibernate é»˜è®¤ä»¥æŒä¹…åŒ–ç±»çš„ç±»åä½œä¸ºè¡¨å .  example:\u0026lt;class name=\u0026quot;com.jeremy.hibernate.example.News\u0026quot; table=\u0026quot;NEWS\u0026quot;\u0026gt;.   dynamic-insert: è‹¥è®¾ç½®ä¸º true, è¡¨ç¤ºå½“ï¼ˆè°ƒç”¨Sessionçš„save()æ–¹æ³•æ—¶ï¼‰ä¿å­˜ä¸€ä¸ªå¯¹è±¡æ—¶, ä¼šåŠ¨æ€ç”Ÿæˆ insert è¯­å¥, insert è¯­å¥ä¸­ä»…åŒ…å«æ‰€æœ‰å–å€¼ä¸ä¸º null çš„å­—æ®µ. é»˜è®¤å€¼ä¸º false. Example:è¿™ä¸ªè·Ÿdynamic-updateä¸€ä¸ªæ„æ€. dynamic-update: è‹¥è®¾ç½®ä¸º true, è¡¨ç¤ºå½“(è°ƒç”¨å¯¹è±¡çš„set()æ–¹æ³•)æ›´æ–°ä¸€ä¸ªå¯¹è±¡æ—¶, ä¼šåŠ¨æ€ç”Ÿæˆ update è¯­å¥, update è¯­å¥ä¸­ä»…åŒ…å«æ‰€æœ‰å–å€¼éœ€è¦æ›´æ–°çš„å­—æ®µ. é»˜è®¤å€¼ä¸º false.  ã€€Hibernateæ˜ å°„æ–‡ä»¶ä¸»è¦å†…å®¹:\n æ˜ å°„å†…å®¹çš„å®šä¹‰: Hibernateæ˜ å°„æ–‡ä»¶ç”±\u0026lt;hibernate-mapping package=\u0026quot;JavaBeanæ‰€åœ¨åŒ…çš„å…¨è·¯å¾„\u0026quot;\u0026gt;èŠ‚ç‚¹å®šä¹‰æ˜ å°„å†…å®¹å¹¶æŒ‡å®šæ‰€å¯¹åº”çš„JavaBeançš„ä½ç½®(ä¹Ÿå¯ä»¥ä¸åœ¨è¯¥èŠ‚ç‚¹ä¸­ç”¨packageå±æ€§æŒ‡å®šå¯¹åº”çš„JavaBeanä½ç½®,è€Œåœ¨è¯¥èŠ‚ç‚¹ä¸‹çš„classèŠ‚ç‚¹ä¸­çš„nameå±æ€§ä¸­æŒ‡å®š). æ•°æ®åº“å’ŒJavaBeançš„å…³è”: Hibernateæ˜ å°„æ–‡ä»¶ä¸­ç”¨\u0026lt;hibernate-mapping\u0026gt;èŠ‚ç‚¹ä¸‹çš„ \u0026lt;class name=\u0026quot;JavaBeanåç§°\u0026quot; table=\u0026quot;å¯¹åº”æ•°æ®åº“ä¸­çš„è¡¨å\u0026quot;\u0026gt;èŠ‚ç‚¹æŒ‡å®šæ•°æ®åº“è¡¨å’ŒJavaBeançš„å…³è”. ( è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸­ç”¨packageå±æ€§æŒ‡å®šäº†JavaBeançš„åŒ…åæ—¶ç”¨)/å…¨è·¯å¾„(è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸­æ²¡ç”¨packageå±æ€§æŒ‡å®šJavaBeançš„åŒ…åæ—¶ç”¨). ä¸»é”®æ˜ å°„: åœ¨\u0026lt;class \u0026gt;èŠ‚ç‚¹ä¸‹ç”¨\u0026lt;id name=\u0026quot;æ•°æ®åº“ä¸­ä¸»é”®åœ¨JavaBeanä¸­çš„å±æ€§åç§°\u0026quot; column=\u0026quot;æ•°æ®åº“ä¸­ä¸»é”®å\u0026quot; type=\u0026quot;string\u0026quot;\u0026gt;èŠ‚ç‚¹æ˜ å°„å¯¹åº”çš„ä¸»é”®,è¯¥èŠ‚ç‚¹å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ª(å› ä¸ºä¸»é”®åªæœ‰ä¸€ä¸ª),åŒæ—¶å¿…é¡»æ”¾åœ¨\u0026lt;property ...\u0026gt;èŠ‚ç‚¹å‰. æ™®é€šå­—æ®µæ˜ å°„: åœ¨\u0026lt;class ...\u0026gt;èŠ‚ç‚¹ä¸‹ç”¨\u0026lt;property name=\u0026quot;æ•°æ®åº“ä¸­å­—æ®µåœ¨JavaBeanä¸­çš„å±æ€§åç§°\u0026quot; column=\u0026quot;æ•°æ®åº“ä¸­çš„å­—æ®µå\u0026quot; type=\u0026quot;string\u0026quot;/\u0026gt;èŠ‚ç‚¹æ˜ å°„æ™®é€šå­—æ®µ,è¯¥èŠ‚ç‚¹å¯æœ‰å¤šä¸ª(ä¸€ä¸ªå­—æ®µç”¨ä¸€ä¸ªè¯¥èŠ‚ç‚¹æ¥æ˜ å°„).  ã€€Heibernateçš„ä¸»é”®æ˜ å°„æ–¹å¼ï¼š\nã€€åœ¨\u0026lt;id ...\u0026gt;èŠ‚ç‚¹ä¸‹ç”¨\u0026lt;generator class=\u0026quot;æ˜ å°„æ–¹å¼\u0026quot;/\u0026gt;èŠ‚ç‚¹æŒ‡å®šHibernateå‘æ•°æ®åº“æ’å…¥æ•°æ®æ—¶ä¸»é”®çš„ç”Ÿæˆæ–¹å¼.\n assignedï¼šåº”ç”¨ç¨‹åºè‡ªèº«å¯¹idèµ‹å€¼. å½“è®¾ç½®\u0026lt;generator class=\u0026quot;assigned\u0026quot;/\u0026gt;æ—¶ï¼Œåº”ç”¨ç¨‹åºè‡ªèº«éœ€è¦è´Ÿè´£ä¸»é”®idçš„èµ‹å€¼ï¼Œç”±å¤–éƒ¨ç¨‹åºè´Ÿè´£ç”Ÿæˆ(åœ¨session.save()ä¹‹å‰ä¸ºå¯¹è±¡çš„ä¸»é”®è®¾ç½®å€¼),æ— éœ€Hibernateå‚ä¸ï¼Œä¸€èˆ¬åº”ç”¨åœ¨ä¸»é”®ä¸ºè‡ªç„¶ä¸»é”®æ—¶. ä¾‹å¦‚XHä¸ºä¸»é”®æ—¶ï¼Œå½“æ·»åŠ ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯æ—¶ï¼Œå°±éœ€è¦ç¨‹åºå‘˜è‡ªå·±è®¾ç½®å­¦å·çš„å€¼ï¼Œè¿™æ—¶å°±éœ€è¦åº”ç”¨è¯¥idç”Ÿæˆå™¨. nativeï¼šç”±æ•°æ®åº“å¯¹idèµ‹å€¼. å½“è®¾ç½®\u0026lt;generator class=\u0026quot;native\u0026quot;/\u0026gt;æ—¶ï¼Œæ•°æ®åº“è´Ÿè´£ä¸»é”®idçš„èµ‹å€¼ï¼Œæœ€å¸¸è§çš„æ˜¯intå‹çš„è‡ªå¢å‹ä¸»é”®. ä¾‹å¦‚ï¼Œåœ¨SQLServerä¸­å»ºç«‹è¡¨çš„idå­—æ®µä¸ºidentityï¼Œé…ç½®äº†è¯¥ç”Ÿæˆå™¨ï¼Œç¨‹åºå‘˜å°±ä¸ç”¨ä¸ºè¯¥ä¸»é”®è®¾ç½®å€¼ï¼Œå®ƒä¼šè‡ªåŠ¨è®¾ç½®. identityï¼šé‡‡ç”¨æ•°æ®åº“æä¾›çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œä¸ºlong/short/intå‹åˆ—ç”Ÿæˆå”¯ä¸€æ ‡è¯†å¦‚SQL Serverã€MySQLä¸­çš„è‡ªå¢ä¸»é”®ç”Ÿæˆæœºåˆ¶. hiloï¼šé€šè¿‡hi/loç®—æ³•å®ç°çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œéœ€è¦é¢å¤–çš„æ•°æ®åº“è¡¨ä¿å­˜ä¸»é”®ç”Ÿæˆå†å²çŠ¶æ€. seqhiloï¼šä¸hi/loç±»ä¼¼ï¼Œé€šè¿‡hi/loç®—æ³•å®ç°çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œåªæ˜¯ä¸»é”®å†å²çŠ¶æ€ä¿å­˜åœ¨sequenceä¸­ï¼Œé€‚ç”¨äºæ”¯æŒsequenceçš„æ•°æ®åº“ï¼Œå¦‚Oracle. incrementï¼šä¸»é”®æŒ‰æ•°å€¼é¡ºåºé€’å¢. æ­¤æ–¹å¼çš„å®ç°æœºåˆ¶ä¸ºåœ¨å½“å‰åº”ç”¨å®ä¾‹ä¸­ç»´æŒä¸€ä¸ªå˜é‡ï¼Œä»¥ä¿å­˜å½“å‰çš„æœ€å¤§å€¼ï¼Œä¹‹åæ¯æ¬¡éœ€è¦ç”Ÿæˆä¸»é”®çš„æ—¶å€™å°†æ­¤å€¼åŠ 1ä½œä¸ºä¸»é”®. è¿™ç§æ–¹å¼å¯èƒ½äº§ç”Ÿçš„é—®é¢˜æ˜¯ï¼šå¦‚æœå½“å‰æœ‰å¤šä¸ªå®ä¾‹è®¿é—®åŒä¸€ä¸ªæ•°æ®åº“ï¼Œç”±äºå„ä¸ªå®ä¾‹å„è‡ªç»´æŠ¤ä¸»é”®çŠ¶æ€ï¼Œä¸åŒå®ä¾‹å¯èƒ½ç”ŸæˆåŒæ ·çš„ä¸»é”®ï¼Œä»è€Œé€ æˆä¸»é”®é‡å¤å¼‚å¸¸. å› æ­¤ï¼Œå¦‚æœåŒä¸€ä¸ªæ•°æ®åº“æœ‰å¤šä¸ªå®ä¾‹è®¿é—®ï¼Œè¿™ç§æ–¹å¼åº”è¯¥é¿å…ä½¿ç”¨. sequenceï¼šé‡‡ç”¨æ•°æ®åº“æä¾›çš„sequenceæœºåˆ¶ç”Ÿæˆä¸»é”®ï¼Œç”¨äºç”¨åºåˆ—æ–¹å¼äº§ç”Ÿä¸»é”®çš„æ•°æ®åº“(å¦‚:Oracleã€DB2ç­‰çš„Sequence),ç”¨äºä¸ºlong/short/intå‹åˆ—ç”Ÿæˆå”¯ä¸€æ ‡è¯†,å¦‚:\u0026lt;generator class=\u0026quot;sequence\u0026quot;\u0026gt;\u0026lt;param name=\u0026quot;sequence\u0026quot;\u0026gt;åºåˆ—å\u0026lt;/param\u0026gt;\u0026lt;/generator\u0026gt;å¦‚Oracle sequence. uuid.hexï¼šç”±HibernateåŸºäº128ä½å”¯ä¸€å€¼äº§ç”Ÿç®—æ³•ï¼Œæ ¹æ®å½“å‰è®¾å¤‡IPã€æ—¶é—´ã€JVMå¯åŠ¨æ—¶é—´ã€å†…éƒ¨è‡ªå¢é‡ç­‰4ä¸ªå‚æ•°ç”Ÿæˆåå…­è¿›åˆ¶æ•°å€¼ï¼ˆç¼–ç åé•¿åº¦ä¸º32ä½çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ä½œä¸ºä¸»é”®. å³ä½¿æ˜¯åœ¨å¤šå®ä¾‹å¹¶å‘è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ç®—æ³•åœ¨æœ€å¤§ç¨‹åº¦ä¸Šä¿è¯äº†äº§ç”Ÿidçš„å”¯ä¸€æ€§. å½“ç„¶ï¼Œé‡å¤çš„æ¦‚ç‡åœ¨ç†è®ºä¸Šä¾ç„¶å­˜åœ¨ï¼Œåªæ˜¯æ¦‚ç‡æ¯”è¾ƒå°. ä¸€èˆ¬è€Œè¨€ï¼Œåˆ©ç”¨uuid.hexæ–¹å¼ç”Ÿæˆä¸»é”®å°†æä¾›æœ€å¥½çš„æ•°æ®æ’å…¥æ€§èƒ½å’Œæ•°æ®å¹³å°é€‚åº”æ€§. uuid.stringï¼šä¸uuid.hexç±»ä¼¼ï¼Œåªæ˜¯å¯¹ç”Ÿæˆçš„ä¸»é”®è¿›è¡Œç¼–ç ï¼ˆé•¿åº¦ä¸º16ä½ï¼‰. åœ¨æŸäº›æ•°æ®åº“ä¸­å¯èƒ½å‡ºç°é—®é¢˜. foreignï¼šä½¿ç”¨å¤–éƒ¨è¡¨çš„å­—æ®µä½œä¸ºä¸»é”®. è¯¥ä¸»é”®ä¸€èˆ¬åº”ç”¨åœ¨è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ä¸Šï¼Œä¼šåœ¨åé¢çš„è¡¨å¯¹åº”å…³ç³»ä¸Šè¿›ä¸€æ­¥è®²è§£. selectï¼šHibernate 3æ–°å¼•å…¥çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œä¸»è¦é’ˆå¯¹é—ç•™ç³»ç»Ÿçš„æ”¹é€ å·¥ç¨‹. ç”±äºå¸¸ç”¨çš„æ•°æ®åº“ï¼Œå¦‚SQLServerã€MySQLç­‰ï¼Œéƒ½æä¾›äº†æ˜“ç”¨çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼ˆå¦‚auto-increaseå­—æ®µï¼‰ï¼Œå¯ä»¥åœ¨æ•°æ®åº“æä¾›çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ä¸Šï¼Œé‡‡ç”¨nativeç”Ÿæˆå™¨æ¥é…ç½®ä¸»é”®ç”Ÿæˆæ–¹å¼.  Hibernateçš„æ ¸å¿ƒç±»å’Œæ¥å£ 1ã€Configurationç±» å®ƒçš„ä½œç”¨æ˜¯ï¼š\n è´Ÿè´£ç®¡ç†hibernateçš„é…ç½®ä¿¡æ¯ï¼› è¯»å–hibernate.cfg.xmlæ–‡ä»¶ï¼› åŠ è½½hibernate.cfg.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„é©±åŠ¨æ–‡ä»¶ï¼Œurlï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œè¿æ¥æ± ï¼› ç®¡ç† *.hbm.xmlå¯¹è±¡å…³ç³»æ–‡ä»¶.  2ã€hibernate.cfg.xmlæ–‡ä»¶  è¯¥æ–‡ä»¶ä¸»è¦ç”¨äºåˆ¶å®šå„ä¸ªå‚æ•°ï¼Œå€¼hibernateæ ¸å¿ƒæ–‡ä»¶ï¼› é»˜è®¤æ”¾åœ¨srcç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ«çš„ç›®å½•ä¸‹ï¼› æŒ‡å®šè¿æ¥æ•°æ®åº“çš„é©±åŠ¨ã€ç”¨æˆ·åã€urlã€å¯†ç ã€è¿æ¥æ± ï¼› åˆ¶å®šå¯¹è±¡å…³ç³»æ˜ å°„æ–‡ä»¶ä½ç½®ï¼› ä¹Ÿå¯ä»¥ä½¿ç”¨hibernate,propertiesæ–‡ä»¶æ¥æ›¿ä»£è¯¥æ–‡ä»¶.  3ã€SessionFactory æ¥å£  å¯ä»¥ç¼“å­˜SQLè¯­å¥æˆ–è€…æ•°æ®ï¼ˆç§°ä¸ºï¼‰. åœ¨åº”ç”¨ç¨‹åºåŒ–çš„æ—¶å€™åˆ›å»ºï¼Œæ˜¯ä¸€ä¸ªé‡é‡çº§çš„ç±»ï¼Œä¸€èˆ¬ç”¨å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªåº”ç”¨åªéœ€è¦ä¸€ä¸ªSessionFactoryå®ä¾‹. å¦‚æœæŸä¸ªåº”ç”¨è®¿é—®å¤šä¸ªæ•°æ®åº“ï¼Œåˆ™è¦åˆ›å»ºå¤šä¸ªå›è¯å·¥å‚å®ä¾‹ï¼Œä¸€èˆ¬ä¸€ä¸ªæ•°æ®åº“ä¸€ä¸ªä¼šè¯å·¥å‚å®ä¾‹. é€šè¿‡SessionFactoryæ¥å£å¯ä»¥è·å¾—Sessionå®ä¾‹.  Configuration cf = new Configuration().configure(); SessionFactory sf = cf.buildSessionFactory(); Session s = sf.getCurrentSession(); //æˆ–è€…ï¼šSession s = sf.openSession();  3.1 openSession()å’ŒgetCurrentSession()åŒºåˆ«  é‡‡ç”¨getCurrentSession()åˆ›å»ºçš„sessionä¼šç»‘å®šåˆ°å½“å‰çº¿ç¨‹ä¸­ï¼Œè€Œé‡‡ç”¨openSession()åˆ›å»ºçš„Sessionåˆ™ä¸ä¼šï¼› é‡‡ç”¨getCurrentSession()åˆ›å»ºçš„sessionåœ¨commitæˆ–rollbackæ—¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œè€Œé‡‡ç”¨openSession()åˆ›å»ºçš„sessionå¿…é¡»æ‰‹åŠ¨å…³é—­ï¼ˆå»ºè®®ä¸ç®¡æ˜¯ç”¨å“ªä¸ªï¼Œæœ€å¥½éƒ½è¦æ‰‹åŠ¨å…³é—­ï¼‰ï¼› ä½¿ç”¨getCurrentSession()éœ€è¦åœ¨hibernate.cfg.xmlæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š  * å¦‚æœä½¿ç”¨çš„æ˜¯æœ¬åœ°äº‹åŠ¡ï¼ˆjdbcäº‹åŠ¡ï¼šé’ˆå¯¹ä¸€ä¸ªæ•°æ®åº“çš„äº‹åŠ¡ï¼‰* \u0026lt;property name=\u0026quot;hibernate.current_session_context_class\u0026quot;\u0026gt;thread\u0026lt;/property\u0026gt; * å¦‚æœä½¿ç”¨çš„æ˜¯å…¨å±€äº‹åŠ¡ï¼ˆjtaäº‹åŠ¡ï¼šå·æ•°æ®åº“çš„äº‹åŠ¡ï¼‰* \u0026lt;property name=\u0026quot;hibernate.current_session_context_class\u0026quot;\u0026gt;jta\u0026lt;/property\u0026gt;  å¦‚ä½•é€‰æ‹©openSession()å’ŒgetCurrentSession()\nåŸåˆ™ï¼š\n å¦‚æœéœ€è¦åœ¨åŒä¸€çº¿ç¨‹ä¸­ï¼Œä¿è¯ä½¿ç”¨åŒä¸€ä¸ªSessionï¼Œåˆ™ä½¿ç”¨getCurrentSession(). å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨ä¸åŒçš„Sessionï¼Œåˆ™ä½¿ç”¨openSession().  3.2\tget vs load ã€€å¯ä»¥ä½¿ç”¨session.get(Student.class,i)/session.load(â€¦)è·å–å€¼\n å¦‚æœæŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œgetä¼šè¿”å› null,ä½†æ˜¯ä¸ä¼šæŠ¥é”™, loadå¦‚æœæŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œåˆ™æŠ¥é”™ObjectNotFoundException ä½¿ç”¨get å»æŸ¥è¯¢æ•°æ®ï¼Œ(å…ˆåˆ°ä¸€çº§/äºŒçº§)ä¼šç«‹å³å‘dbå‘å‡ºæŸ¥è¯¢è¯·æ±‚(select \u0026hellip;), å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ loadæŸ¥è¯¢æ•°æ®ï¼Œ(å…ˆåˆ°ä¸€çº§ã€äºŒçº§))å³ä½¿æŸ¥è¯¢åˆ°å¯¹è±¡ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡,å¦‚æœåé¢æ²¡æœ‰ä½¿ç”¨æŸ¥è¯¢ç»“æœï¼Œå®ƒä¸ä¼šçœŸçš„å‘æ•°æ®åº“å‘select ,å½“ç¨‹åºå‘˜ä½¿ç”¨æŸ¥è¯¢ç»“æœçš„æ—¶å€™æ‰çœŸçš„å‘å‡ºselect ,è¿™ä¸ªç°è±¡æˆ‘ä»¬ç§°ä¸ºâ€œæ‡’åŠ è½½â€(lazy) é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å–æ¶ˆâ€œæ‡’åŠ è½½â€ï¼›  \u0026lt;class name=\u0026quot;Employee\u0026quot; lazy=\u0026quot;false\u0026quot; table=\u0026quot;employee\u0026quot;\u0026gt;  å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ª: å¦‚æœä½ ç¡®å®šDBä¸­æœ‰è¿™ä¸ªå¯¹è±¡å°±ç”¨load(),ä¸ç¡®å®šå°±ç”¨get()ï¼ˆè¿™æ ·æ•ˆç‡é«˜ï¼‰.  4ã€Transactionï¼ˆäº‹åŠ¡ï¼‰æ¥å£ ã€€äº‹åŠ¡ç®€å•åœ°è¯´å°±æ˜¯ä¸€ç»„å¯¹æ•°æ®åº“çš„æ“ä½œé›†åˆï¼Œä»–ä»¬è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œè¿™ä¸ªå¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œäº‹åŠ¡å…·æœ‰åŸå­æ€§.\n Transactionæ˜¯åº•å±‚çš„äº‹ç‰©å®ç°ä¸­æŠ½å–å‡ºæ¥çš„æ¥å£ï¼› å¯èƒ½æ˜¯ä¸€ä¸ªjdbcæˆ–è€…jtaçš„äº‹åŠ¡ï¼Œè¿™æ ·æœ‰åˆ©äºhibernateåœ¨ä¸åŒæ‰§è¡Œç¯å¢ƒçš„ç§»æ¤ï¼› Hibernateè¦æ±‚æ˜¾ç¤ºçš„è°ƒç”¨äº‹åŠ¡ï¼ˆå¦‚æœä»…ä»…æ˜¯æŸ¥è¯¢å¯ä»¥ä¸è°ƒç”¨ï¼‰.  //å¢åŠ åˆ é™¤ä¿®æ”¹å¦‚æœå‘ç”Ÿå¼‚å¸¸è¦tx.rollback()å›æ»š Session sess = factory.openSession(); Transaction tx; try { tx = sess.beginTransaction(); //do some work ... tx.commit(); } catch (Exception e) { if (tx!=null) tx.rollback(); throw e; } finally { sess.close(); }  5ã€Query æ¥å£ ã€€Queryæ¥å£ç±»å‹çš„å¯¹è±¡å¯ä»¥å¯¹æ•°æ®åº“æ“ä½œï¼Œä»–å¯ä»¥ä½¿ç”¨Hqlï¼ŒQbcï¼ŒQbeå’ŒåŸç”ŸSQLï¼ˆnative Sqlï¼‰å¯¹æ•°æ®åº“æ“ä½œï¼Œå®˜æ–¹æ¨èä½¿ç”¨Hqlè¯­å¥.\n//è·å–queryå¼•ç”¨[è¿™é‡ŒEmployeeä¸æ˜¯è¡¨åï¼Œè€Œæ˜¯domainç±»å]ï¼Œwhereåé¢çš„æ¡ä»¶æœ€å¥½ä½¿ç”¨ç±»ä¸‹çš„å±æ€§å Query query = session.createQuery(\u0026quot;from Employee where id=10\u0026quot;); //é€šè¿‡listæ–¹æ³•è·å–ç»“æœï¼Œè¿™ä¸ªlistä¼šè‡ªåŠ¨å°è£…æˆå¯¹åº”çš„domainå¯¹è±¡ List\u0026lt;Employee\u0026gt; list = query.list(); for(Employee e:list) ...  6ã€Criteriaæ¥å£ ã€€ä»€ä¹ˆæ˜¯QBCï¼š QBCï¼ˆQuery By Criteriaï¼‰æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼Œé€šè¿‡Criteriaæ„é€ æŸ¥è¯¢æ¡ä»¶ï¼Œå³é€šè¿‡è°ƒç”¨Criteriaçš„apiå®ç°å„ç§æŸ¥è¯¢.\nã€€é€šè¿‡Criteriaå¯¹è±¡æ‹¼è£… æŸ¥è¯¢æ¡ä»¶ï¼Œè°ƒç”¨Criteriaçš„addæ–¹æ³•æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ï¼Œæœ€ç»ˆhibernateé€šè¿‡criteriaå¯¹è±¡è‡ªåŠ¨ç”Ÿæˆsqlè¯­å¥.\nï¼ˆäº†è§£ï¼‰çº¯é¢å‘å¯¹è±¡çš„æ£€ç´¢æ–¹å¼\nSession session=HibernateUtil.getCurrentSession(); Transaction ts=null;\ttry {\tts=session.beginTransaction();\tCriteria cri = session.createCriteria(Employee.class). setMaxResults(2).addOrder(Order.desc(\u0026quot;id\u0026quot;) );//æŒ‰ç…§å‡åº List\u0026lt;Employee\u0026gt; list=cri.list(); for(Employee e: list){ System.out.println(e.getAaaid()); }\tts.commit();\t} catch (Exception e) {\tif(ts!=null){ ts.rollback(); } throw new RuntimeException(e.getMessage()); }finally{ //å…³é—­session if(session!=null\u0026amp;\u0026amp;session.isOpen()){ session.close(); } }  MySQLè®°å½•æ€»æ•°æŸ¥è¯¢  åˆ†é¡µæŸ¥è¯¢  æŠ•å½±æŸ¥è¯¢æ–¹æ³•  è®°å½•æ€»æ•°æŸ¥è¯¢   DetachedCriteria  DetachedCriteriaæ˜¯ä»€ä¹ˆï¼Ÿç¦»çº¿çš„Criteria. DetachedCriteriaå’ŒCriteriaåŒºåˆ«ï¼š  Criteriaåˆ›å»ºæ–¹æ³•ï¼šsession.createCriteria DetachedCriteriaåˆ›å»ºæ–¹æ³•ï¼šä¸éœ€è¦sessionï¼   DetachedCriteriaå’ŒCriteriaç›¸åŒç‚¹ï¼šå®ç°æŸ¥è¯¢æ¡ä»¶æ‹¼è£….  ã€€å»ºè®®ä½¿ç”¨DetachedCriteriaï¼Œå› ä¸ºDetachedCriteriaåˆ›å»ºä¸éœ€è¦sessionï¼Œåœ¨ä»»ä½•ä»£ç ä¸­é€šè¿‡DetachedCriteria æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶. è¿™é‡Œçš„HibernateUtilä¸ºæ‰“å¼€SessionFactory.\nservice ã€€æ¥æ”¶servletä¼ å…¥æŸ¥è¯¢æ¡ä»¶ï¼Œå°†æŸ¥è¯¢æ¡ä»¶æ‹¼è£…æˆDetachedCritriea. @Override public Long findCustomerCount(CstCustomer cstCustomer) { //åˆ›å»ºDetachedCriteria DetachedCriteria detachedCriteria = DetachedCriteria.forClass(CstCustomer.class); //æ ¹æ®cstCustomerä¸­æ•°æ®åŠ¨æ€æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ if(cstCustomer!=null){ //æ‹¼æ¥å®¢æˆ·åç§°æŸ¥è¯¢æ¡ä»¶ï¼Œä½¿ç”¨like if(cstCustomer.getCustName()!=null \u0026amp;\u0026amp; !cstCustomer.getCustName().equals(\u0026quot;\u0026quot;)){ detachedCriteria.add(Restrictions.like(\u0026quot;custName\u0026quot;, \u0026quot;%\u0026quot;+cstCustomer.getCustName()+\u0026quot;%\u0026quot;)); } //æ‹¼æ¥è”ç³»äººæŸ¥è¯¢æ¡ä»¶ if(cstCustomer.getCustLinkman()!=null \u0026amp;\u0026amp; !cstCustomer.getCustLinkman().equals(\u0026quot;\u0026quot;)){ detachedCriteria.add(Restrictions.eq(\u0026quot;custLinkman\u0026quot;,cstCustomer.getCustLinkman())); } } CstCustomerDao cstCustomerDao = new CstCustomerDaoImpl(); return cstCustomerDao.findCustomerCount(detachedCriteria); } @Override public List\u0026lt;CstCustomer\u0026gt; findCustomerList(CstCustomer cstCustomer, int firstResult, int maxResults) { CstCustomerDao cstCustomerDao = new CstCustomerDaoImpl(); //åˆ›å»ºDetachedCriteria DetachedCriteria detachedCriteria = DetachedCriteria.forClass(CstCustomer.class); //æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ //æ ¹æ®cstCustomerä¸­æ•°æ®åŠ¨æ€æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ if(cstCustomer!=null){ //æ‹¼æ¥å®¢æˆ·åç§°æŸ¥è¯¢æ¡ä»¶ï¼Œä½¿ç”¨like if(cstCustomer.getCustName()!=null \u0026amp;\u0026amp; !cstCustomer.getCustName().equals(\u0026quot;\u0026quot;)){ detachedCriteria.add(Restrictions.like(\u0026quot;custName\u0026quot;, \u0026quot;%\u0026quot;+cstCustomer.getCustName()+\u0026quot;%\u0026quot;)); } //æ‹¼æ¥è”ç³»äººæŸ¥è¯¢æ¡ä»¶ if(cstCustomer.getCustLinkman()!=null \u0026amp;\u0026amp; !cstCustomer.getCustLinkman().equals(\u0026quot;\u0026quot;)){ detachedCriteria.add(Restrictions.eq(\u0026quot;custLinkman\u0026quot;,cstCustomer.getCustLinkman())); } } return cstCustomerDao.findCustomerList(detachedCriteria, firstResult, maxResults); }  log4jå­¦ä¹  ç›®æ ‡ï¼šå­¦ä¼šä½¿ç”¨log4jè‡ªå®šä¹‰è¾“å‡ºæ—¥å¿—ä¿¡æ¯.\nhibernateé»˜è®¤ä½¿ç”¨slf4jæ¡†æ¶.\n slf4jï¼šæä¾›äº†ä¸€å¥—æ—¥å¿—è®°å½•æ¥å£è§„èŒƒ. log4jï¼šæ—¥å¿—æ¥å£çš„å®ç°ç±».  ã€€å¦‚æœ ä½¿ç”¨log4jéœ€è¦ä»¥classpathä¸‹æ·»åŠ log4j.propertiesæ–‡ä»¶.\nLog4jåŒ…æ‹¬ä¸‰ä¸ªä¸»è¦éƒ¨ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š\n è®°å½•å™¨ï¼ˆLoggersï¼‰ï¼šé…ç½®æ—¥å¿—åœ¨å“ªè®°å½•. è¾“å‡ºæºï¼ˆAppendersï¼‰ï¼šé…ç½®æ—¥å¿—è¾“å‡ºåˆ°å“ªé‡Œ.  å¸ƒå±€ï¼ˆLayoutsï¼‰ï¼ŒæŒ‡å®šæ—¥å¿—è¾“å‡ºæ ¼å¼ è®°å½•å™¨ï¼š  log4j.rootLogger=debug,A log4j.appender.A=org.apache.log4j.ConsoleAppender log4j.appender.A.layout=org.apache.log4j.PatternLayout  æ—¥å¿—çº§åˆ«\n  æ—¥å¿—çº§åˆ«ç”±ä½åˆ°é«˜ä¸ºï¼šALL \u0026lt; TRACE \u0026lt; DEBUG \u0026lt; INFO \u0026lt; WARN \u0026lt; ERROR \u0026lt; FATAL \u0026lt; OFF.\n  æ—¥å¿—çº§åˆ«è¶Šä½è¾“å‡ºæ—¥å¿—è¶Šå¤šï¼Œå› ä¸ºå°†ç³»ç»Ÿè°ƒè¯•ä¿¡æ¯è®¾ç½®çº§åˆ«ä½ï¼Œç³»ç»Ÿçš„é”™è¯¯ä¿¡æ¯çº§åˆ«è¦é«˜ï¼Œè®¾ç½®æˆerror.\n  æ ¹æ®log4j.propertiesä¸­çº§åˆ«è®¾ç½®ï¼Œå°†çº§åˆ«é«˜çš„æ—¥å¿—è¾“å‡º.\nåœ¨å¼€å‘é˜¶æ®µè®¾ç½®ä¸ºdebugï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒè®¾ç½®infoæˆ–error.\nç”¨MyEclipseè¿›è¡Œhibernateå¿«é€Ÿå¼€å‘ ã€€æ‰‹åŠ¨é…ç½®:\ndb(table )-\u0026gt; æ‰‹å†™domainå¯¹è±¡-\u0026gt;å¯¹è±¡å…³ç³»æ˜ å°„æ–‡ä»¶.\nç°åœ¨æˆ‘ä»¬å¸Œæœ›ç”¨å·¥å…·å®ŒæˆDomainå¯¹è±¡å’Œå…³ç³»æ˜ å°„æ–‡ä»¶çš„å·¥ä½œ. é”™è¯¯ä¿¡æ¯\njava.lang.AbstractMethodError: com.microsoft.jdbc.base.BaseDatabaseMetaData.supportsGetGeneratedKeys()Z\nè§£å†³ï¼šmicrosoftæä¾›çš„æ•°æ®åº“é©±åŠ¨å­˜åœ¨bug. éœ€è¦æ¢ä¸€ç§é©±åŠ¨è¿æ¥ï¼Œä½¿ç”¨jtdsï¼ˆä¸‹è½½åœ°å€ï¼‰ä¸‹è½½jtds1.2ç‰ˆï¼Œè§£å‹å¾—åˆ°jtds-1.2.jarï¼Œå¼•ç”¨åˆ°eclipseä¸­é¡¹ç›®ç›®å½•ä¸‹ï¼ˆå»é™¤åŸé©±åŠ¨å¼•ç”¨ï¼‰ï¼Œæ›´æ”¹hibernateé…ç½®æ–‡ä»¶.\nåŸé©±åŠ¨è¿æ¥é…ç½®ï¼š\n\u0026lt;property name=\u0026quot;connection.driver_class\u0026quot;\u0026gt;com.microsoft.jdbc.sqlserver.SQLServerDriver\u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;connection.url\u0026quot;\u0026gt;jdbc:microsoft:sqlserver://127.0.0.1:1433;DatabaseName=hibernate\u0026lt;/property\u0026gt;  æ›´æ”¹jtdsè¿æ¥ï¼š\n\u0026lt;property name=\u0026quot;connection.driver_class\u0026quot;\u0026gt;net.sourceforge.jtds.jdbc.Driver\u0026lt;/property\u0026gt; \u0026lt;property name=\u0026quot;connection.url\u0026quot;\u0026gt;jdbc:jtds:sqlserver://127.0.0.1:1433;DatabaseName=hibernate\u0026lt;/property\u0026gt;  é—®é¢˜å¾—åˆ°è§£å†³.\nè¡¥å……ï¼šjavaä»£ç è°ƒåŸé©±åŠ¨è¿æ¥æ•°æ®åº“æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ­é…hibernateä¼šæœ‰æ­¤é—®é¢˜.\n# HibernateUtilå·¥å…·ç±»ï¼š package com.haibao.util; import javax.persistence.Entity; import org.hibernate.Session; import org.hibernate.SessionFactory; import org.hibernate.cfg.Configuration; @Entity final public class HibernateUtil { private static SessionFactory sessionFactory = null; private static ThreadLocal\u0026lt;Session\u0026gt; threadLocal = new ThreadLocal\u0026lt;Session\u0026gt;(); private HibernateUtil(){}; static{ sessionFactory = new Configuration().configure().buildSessionFactory(); } public static Session openSession(){ return sessionFactory.openSession(); } public static Session getCurrentSession(){ Session session = threadLocal.get(); if(session==null){ session = sessionFactory.openSession(); threadLocal.set(session); } return session; } } # å®ç°ç±»ï¼š package com.haibao.view; import javax.persistence.Entity; import org.hibernate.Session; import org.hibernate.Transaction; import com.haibao.bean.Person; import com.haibao.util.HibernateUtil; @Entity public class Main { public static void main(String[] args) { Session session = null; Transaction ts = null; try { session = HibernateUtil.getCurrentSession(); ts = session.beginTransaction(); Person p = new Person(); p.setName(\u0026quot;asd\u0026quot;); p.setSex(\u0026quot;ç”·\u0026quot;); session.persist(p); ts.commit(); } catch (Exception e) { if(ts!=null){ ts.rollback(); } throw new RuntimeException(e.getMessage()); }finally{ if(session!=null \u0026amp;\u0026amp; session.isOpen()){ session.close(); } } } }  HQLè¯­å¥ï¼ˆHibernate Query Languageï¼‰ ã€€é¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­å¥ï¼Œä¸SQLä¸åŒï¼ŒHQlä¸­çš„å¯¹è±¡æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼ˆé™¤äº†JAVAç±»å’Œå±æ€§å…¶ä»–éƒ¨åˆ†ä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼›åœ¨HQLä¸­æŸ¥çš„æ˜¯å¯¹è±¡è€Œä¸æ˜¯è¡¨ï¼Œå¹¶ä¸”æ”¯æŒå¤šæ€ï¼›HQLä¸»è¦é€šè¿‡Queryæ¥æ“ä½œï¼ŒQueryçš„åˆ›å»ºæ–¹å¼ï¼š\nQuery query = session.createQuery(hql);  ã€€ç°åœ¨ä½¿ç”¨hibernateå·¥å…·ï¼Œè‡ªåŠ¨ç”Ÿæˆ domain å¯¹è±¡ å’Œæ˜ å°„æ–‡ä»¶,å¦‚æœæˆ‘ä»¬çš„è¡¨æœ‰ä¸»å¤–é”®çš„å…³ç³»ï¼Œåˆ™åº”å½“å…ˆæ˜ å°„ä¸»è¡¨ï¼Œå†æ˜ å°„ä»è¡¨.\nuniqueResultæ–¹æ³• ã€€å¦‚æœæˆ‘ä»¬æ£€ç´¢ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜ç¡®çŸ¥é“æœ€å¤šåªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å»ºè®®ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œç®€å•é«˜æ•ˆ. å…·ä½“ç”¨æ³•å¦‚ä¸‹:\nStudent s=(Student) session.createQuery(\u0026quot;from Student where sid='20050003'\u0026quot;).uniqueResult(); System.out.println(s.getSname());  distinctçš„ç”¨æ³• è¿‡æ»¤é‡å¤çš„è®°å½•\n//æ¯”å¦‚ï¼Œæ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ€§åˆ«å’Œå¹´é¾„. List list=session.createQuery(\u0026quot;select distinct sage,ssex from Student\u0026quot;).list(); for(int i=0;i\u0026lt;list.size();i++){ Object [] objs=(Object[]) list.get(i); System.out.println(objs[0].toString()+\u0026quot; \u0026quot;+objs[1].toString()); }  between and.. List list=session.createQuery(\u0026quot;select distinct sage,ssex,sname from Student where sage between 20 and 22\u0026quot;).list(); for(int i=0;i\u0026lt;list.size();i++){ Object [] objs=(Object[]) list.get(i); System.out.println(objs[0].toString()+\u0026quot; \u0026quot;+objs[1].toString()+objs[2].toString()); }  in/not in //æŸ¥è¯¢è®¡ç®—æœºç³»å’Œå¤–è¯­ç³»çš„å­¦ç”Ÿä¿¡æ¯ List\u0026lt;Student\u0026gt; list=session.createQuery(\u0026quot;from Student where sdept in ('è®¡ç®—æœºç³»','å¤–è¯­ç³»')\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Student s:list){ System.out.println(s.getSname()+\u0026quot; \u0026quot;+s.getSaddress()+\u0026quot; \u0026quot;+s.getSdept()); }  group byä½¿ç”¨ //æ˜¾ç¤ºå„ä¸ªç³»çš„å­¦ç”Ÿçš„å¹³å‡å¹´é¾„ List\u0026lt;Object[]\u0026gt; list=session.createQuery(\u0026quot;select avg(sage),sdept from Student group by sdept\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object[] obj:list){ System.out.println(obj[0].toString()+\u0026quot; \u0026quot;+obj[1].toString()); }  havingçš„ä½¿ç”¨ //1.å¯¹åˆ†ç»„æŸ¥è¯¢åçš„ç»“æœï¼Œè¿›è¡Œç­›é€‰:æ¯”å¦‚è¯·æ˜¾ç¤ºäººæ•°å¤§äº3çš„ç³»åç§° //a. æŸ¥è¯¢å„ä¸ªç³»åˆ†åˆ«æœ‰å¤šå°‘å­¦ç”Ÿ. List\u0026lt;Object[]\u0026gt; list=session.createQuery(\u0026quot;select count(*) as c1,sdept from Student group by sdept having count(*)\u0026gt;3\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object[] obj:list){ System.out.println(obj[0].toString()+\u0026quot; \u0026quot;+obj[1].toString()); } //2æŸ¥è¯¢å¥³ç”Ÿå°‘äº200äººçš„ç³» //a.æŸ¥è¯¢å„ä¸ªç³»çš„å¥³ç”Ÿæœ‰å¤šä¸ªä¸ª List\u0026lt;Object[]\u0026gt; list=session. createQuery(\u0026quot;select count(*) as c1,sdept from Student where ssex='F' group by sdept\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object[] obj:list){ System.out.println(obj[0].toString()+\u0026quot; \u0026quot;+obj[1].toString()); } //1.æŸ¥è¯¢è®¡ç®—æœºç³»å…±å¤šå°‘äºº?-\u0026gt;å¦‚æœæˆ‘ä»¬è¿”å›çš„æ˜¯ä¸€åˆ—æ•°æ® //è¿™æ—¶æˆ‘ä»¬çš„å–æ³•æ˜¯ç›´æ¥å–å‡ºlist-\u0026gt;object è€Œä¸æ˜¯ list-\u0026gt;Object[] List\u0026lt;Object[]\u0026gt; list=session.createQuery(\u0026quot;select sage from Student where sdept='è®¡ç®—æœºç³»'\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object obj:list){ System.out.println(obj.toString()); } //3.æŸ¥è¯¢é€‰ä¿®11å·è¯¾ç¨‹çš„æœ€é«˜åˆ†å’Œæœ€ä½åˆ†. List\u0026lt;Object[]\u0026gt; list=session. createQuery(\u0026quot;select 11,max(grade),min(grade) from Studcourse where course.cid=11\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object[] obj:list){ System.out.println(obj[0].toString()+\u0026quot; max=\u0026quot;+obj[1].toString()+\u0026quot; min=\u0026quot;+obj[2].toString()); } //4.è®¡ç®—å„ä¸ªç§‘ç›®ä¸åŠæ ¼çš„å­¦ç”Ÿæ•°é‡. List\u0026lt;Object[]\u0026gt; list=session. createQuery(\u0026quot;select count(*),student.sdept from StudCourse where grade\u0026lt;60 group by student.sdept\u0026quot;).list(); //å–å‡º1. for å¢å¼º for(Object[] obj:list){ System.out.println(obj[0].toString()+\u0026quot; \u0026quot;+obj[1].toString()); }  åˆ†é¡µæ˜¾ç¤ºå¯¹è±¡ï¼š ã€€æ ¹æ®ç”¨æˆ·è¾“å…¥çš„pageNowå’ŒpageSizeç°å®å¯¹è±¡\nQuery query = session.createQuery(hql); query.setFirdtRequest(ä»ç¬¬å‡ æ¡å–//ä»0å¼€å§‹è®¡ç®—); query.setMaxRequest(å–å‡ºå‡ æ¡); List list = query.list(); //listå°±æ˜¯ç»“æœ query = session.createQuery(å¾—åˆ°count(*)çš„æŸ¥è¯¢è¯­å¥); int pageRow = (Integer)query.list().get(0).intValue();  å‚æ•°ç»‘å®š ã€€å¯ä»¥ç”¨setParameter()æ–¹æ³•æ¥ç¡®å®šå˜é‡çš„å€¼ï¼š\nQuery query = session.createQuery(\u0026quot;from Student where sdept = :dept and sage\u0026gt;:age\u0026quot;); query.setParameter(å‚æ•°åï¼Œå€¼);  ä½¿ç”¨ç»‘å®šå‚æ•°çš„å¥½å¤„ï¼š\n å¯è¯»æ€§å¥½ æ€§èƒ½æé«˜ é˜²æ­¢SQLæ³¨å…¥ï¼ˆwhere 1=1ï¼‰  æç¤ºï¼šä¹Ÿå¯ä»¥ä½¿ç”¨setInteger().setString()â€¦æ¥æŒ‡å®šå€¼.\nå¦å¤–ï¼šhqlè¯­å¥ä¹Ÿå¯ä»¥ç”¨â€œ?â€æ¥æŒ‡å®šå¸¦ç»‘å®šçš„å‚æ•°.\nQuery query = session.createQuery(â€œfrom Student where sdept = ? and sage\u0026gt;?â€); query.setParameter(0ï¼Œå€¼); query.setParameter(1ï¼Œå€¼);  åœ¨æ˜ å°„æ–‡ä»¶ä¸­å¾—åˆ°hqlè¯­å¥ ã€€å¯ä»¥ä»æŸäº›æ˜ å°„æ–‡ä»¶ä¸­å¾—åˆ°hqlè¯­å¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ çµæ´»ï¼Œåœ¨æŸç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨. æ¯”å¦‚ï¼šåœ¨Student.hbm.xmlä¸­.\n\u0026lt;query name=â€myquerytestâ€\u0026gt; \u0026lt;![CDATA[select sname,ssex from Student where sage\u0026gt;22]]\u0026gt; \u0026lt;/query\u0026gt; å¦‚ä½•ä½¿ç”¨ï¼š List list = session.getNameQuery(â€œmyQuerytestâ€).lise(); System.out.println(list.size()); Iterator iterator = list.iterator(); while(iterator.hasNext()){ Object obj[] = (Object[])iterator.next(); System.out.println(â€œN=â€+obj[0]); }  ä½¿ç”¨å­æŸ¥è¯¢ hibernateä¸­çš„å¯¹è±¡å­˜åœ¨ä¸‰ç§å…³ç³»  one-to-oneï¼šèº«ä»½è¯â†â†’äºº one-to-manyã€many-to-oneã€‘éƒ¨é—¨â†â†’å‘˜å·¥ many-to-manyï¼šè€å¸ˆâ†â†’å­¦ç”Ÿï¼ˆå°½é‡åŒ–ç®€ï¼‰ å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœå‡ºç°äº†many-to-manyå…³ç³»ï¼Œç”¨å°†å…¶è£…æ¢æˆä¸¤ä¸ªone-to-manyæˆ–è€…many-to-oneï¼Œè¿™æ ·ç¨‹åºå¥½æ§åˆ¶ï¼ŒåŒæ—¶ä¸ä¼šå†—ä½™.  criterialä½¿ç”¨:\n//æŸ¥è¯¢å¹´é¾„å¤§äº10å²çš„å­¦ç”Ÿ criteria Session s=HibernateUtil.getCurrentSession(); Transaction tx=s.beginTransaction(); Criteria cri=s.createCriteria(Student.class); //æ·»åŠ æ£€ç´¢æ¡ä»¶ cri.add(Restrictions.gt(\u0026quot;sage\u0026quot;, new Long(10))); List\u0026lt;Student\u0026gt; list=cri.list(); for(Student s1: list){ System.out.println(s1.getSname()); } tx.commit();  hibernateå¼€å‘çš„ä¸‰ç§æ–¹å¼ä¸­çš„ ã€€ç¼–å†™domain object + æ˜ å°„æ–‡ä»¶ \u0026mdash;\u0026mdash;\u0026gt; åˆ›å»ºå‡ºå¯¹åº”çš„æ•°æ®åº“,è¿™é‡Œæˆ‘ä»¬è¯´æ˜å¦‚æœè¦è‡ªåŠ¨çš„åˆ›å»ºå‡ºå¯¹åº”çš„æ•°æ®åº“ï¼Œéœ€è¦åšé…ç½®(hibernate.cfg.xml).\n\u0026lt;property name=\u0026quot;hbm2ddl.auto\u0026quot;\u0026gt;create\u0026lt;/property\u0026gt;  è¿™é‡Œæœ‰å››ä¸ªé…ç½®å€¼: create , update , create-drop, validate\n create:å½“æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåŠ è½½hibernate.cfg.xml[new Configuration().config();]å°±ä¼šæ ¹æ®æ˜ å°„æ–‡ä»¶ï¼Œåˆ›å»ºå‡ºæ•°æ®åº“, æ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œ åŸæ¥è¡¨ä¸­çš„æ•°æ®å°±æ²¡æœ‰!!! update: å¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è¡¨ï¼Œåˆ™åˆ›å»ºï¼Œå¦‚æœæœ‰è¡¨ï¼Œåˆ™çœ‹æœ‰æ²¡æœ‰å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œåˆ™æ›´æ–°. create-drop: åœ¨æ˜¾ç¤ºå…³é—­ sessionFactoryæ—¶ï¼Œå°†dropæ‰æ•°æ®åº“çš„schema validate: ç›¸å½“äºæ¯æ¬¡æ’å…¥æ•°æ®ä¹‹å‰éƒ½ä¼šéªŒè¯æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å’Œhbmæ–‡ä»¶çš„ç»“æ„æ˜¯å¦ä¸€è‡´  ã€€åœ¨å¼€å‘æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬é…ç½®å“ªä¸ªéƒ½å¯ä»¥æµ‹è¯•ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å‘å¸ƒåï¼Œæœ€å¥½è‡ªå·±é…ç½®ä¸€æ¬¡ï¼Œè®©å¯¹åº”çš„æ•°æ®åº“ç”Ÿæˆï¼Œå®Œåå–æ¶ˆé…ç½®.\ndomainå¯¹è±¡çš„ç»†èŠ‚:\n éœ€è¦ä¸€ä¸ªæ— å‚çš„æ„é€ å‡½æ•°(ç”¨äºhibernateåå°„è¯¥å¯¹è±¡) åº”å½“æœ‰ä¸€ä¸ªæ— ä¸šåŠ¡é€»è¾‘çš„ä¸»é”®å±æ€§. ç»™æ¯ä¸ªå±æ€§æä¾› get/setæ–¹æ³•. åœ¨domianå¯¹è±¡ä¸­çš„å±æ€§ï¼Œåªæœ‰é…ç½®åˆ°äº†å¯¹è±¡æ˜ å°„æ–‡ä»¶xxx.hbm.xmlåï¼Œæ‰ä¼šè¢«hiberanteç®¡ç†. å±æ€§ä¸€èˆ¬æ˜¯privateèŒƒå›´  å¯¹è±¡å…³ç³»æ˜ å°„æ–‡ä»¶çš„è¯´æ˜ï¼š\nã€€å¯¹è±¡å…³ç³»æ–‡ä»¶ä¸­ï¼Œæœ‰äº›å±æ€§æ˜¯å¯ä»¥ä¸é…ï¼Œhibernateä¼šé‡‡ç”¨é»˜è®¤æœºåˆ¶ï¼Œæ¯”å¦‚\u0026lt;class table=\u0026quot;?\u0026quot; \u0026gt; table å€¼ä¸é…ï¼Œåˆ™ä»¥ç±»çš„å°å†™åšè¡¨åï¼›\u0026lt;property type=\u0026quot;?\u0026quot;\u0026gt; typeä¸é…ç½®ï¼Œåˆ™hibernateä¼šæ ¹æ®ç±»çš„å±æ€§ç±»å‹ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚å½“çš„ç±»å‹.\nHibernateçš„ä¸‰ç§çŠ¶æ€ï¼š\n ç¬æ—¶æ€ï¼šå¯¹è±¡åˆšåˆšè¢«åˆ›å»ºï¼Œæ²¡æœ‰å¤„äºsessionçš„ç®¡ç†ä¸‹ï¼ŒåŒæ—¶åœ¨æ•°æ®åº“æ²¡æœ‰è®°å½•ï¼› æŒä¹…æ€ï¼šæ—¢å¤„äºsessionçš„ç®¡ç†ä¸‹ï¼ŒåŒæ—¶åˆè¢«ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼ˆåœ¨æ•°æ®åº“ä¸­æœ‰è®°å½•ï¼‰ï¼› è„±ç®¡/æ¸¸ç¦»æ€ï¼šæ²¡æœ‰åœ¨sessionç®¡ç†ä¸‹ï¼Œä½†åœ¨æ•°æ®åº“ä¸­æœ‰è®°å½•. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡å¤„äºæ€æ ·çš„çŠ¶æ€ï¼Ÿ  ä¸»è¦çš„ä¾æ®æ˜¯:\n çœ‹è¯¥å¯¹è±¡æ˜¯å¦å¤„äºsessionç®¡ç†ï¼› çœ‹åœ¨æ•°æ®åº“ä¸­æœ‰æ²¡æœ‰å¯¹åº”çš„è®°å½•.    ç¬æ—¶æ€: æ²¡æœ‰sessionç®¡ç†,åŒæ—¶æ•°æ®åº“æ²¡æœ‰å¯¹åº”è®°å½•;newäº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å¯¹è±¡å°±æ˜¯ç¬æ—¶æ€;ç¬æ—¶æ€å¯¹è±¡å’Œæ•°æ®åº“è®°å½•æ²¡æœ‰å¯¹å…³ç³»ï¼Œå’Œsessionæ²¡æœ‰å…³ç³».\n  æŒä¹…æ€: æœ‰sessionç®¡ç†ï¼ŒåŒæ—¶åœ¨æ•°æ®åº“ä¸­æœ‰è®°å½•; ç¬æ—¶æ€å¯¹è±¡æ‰§è¡Œsaveå˜åŒ–æŒä¹…å±‚;æŒä¹…æ€å¯¹è±¡å’Œæ•°æ®åº“è®°å½•å­˜åœ¨å¯¹åº”å…³ç³»ï¼Œå’Œsessionæœ‰å…³ç³».ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œç›´æ¥å°†æ•°æ®ä¿è¯åˆ°æ•°æ®åº“.\n  ç®¡æ€/æ¸¸ç¦»æ€ï¼š æ²¡æœ‰sessionç®¡ç†ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“ä¸­æœ‰è®°å½•.å½“sessionå…³é—­åï¼ŒæŒä¹…æ€å¯¹è±¡å˜ä¸ºæ‰˜ç®¡æ€;\tæ‰˜ç®¡æ€å¯¹è±¡å’Œsessionæ²¡æœ‰å…³ç³»ï¼Œå¯èƒ½å’Œæ•°æ®åº“å­˜åœ¨å¯¹è±¡ä¹Ÿå¯èƒ½ä¸å¯¹åº”.\n  æ‰˜ç®¡æ€å’Œç¬æ—¶æ€åŒºåˆ«\n æ‰˜ç®¡æ€å¯¹è±¡:\tå’Œsessionæ²¡æœ‰å…³è”ï¼Œå¯èƒ½å’Œæ•°æ®åº“å­˜åœ¨å¯¹åº”å…³ç³»ï¼Œæ‰˜ç®¡æ€å¯¹è±¡ä¸­å­˜åœ¨ä¸»é”®çš„å€¼. æŒä¹…æ€å¯¹è±¡:\tå’Œsessionæœ‰çŠ¶æ€ ç¬æ—¶æ€å¯¹è±¡:\tå’Œsessionæ²¡æœ‰å…³è”ï¼Œå’Œæ•°æ®åº“è®°å½•æ²¡æœ‰å¯¹è±¡å…³ç³»ï¼Œæ²¡æœ‰ä¸»é”®.  å°†ç¬æ—¶æ€å¯¹è±¡è®¾ç½®ä¸€ä¸ªä¸»é”®å€¼ï¼Œå®ƒå°±å˜ä¸ºäº†æ‰˜ç®¡æ€å¯¹è±¡ï¼ï¼ï¼\nsaveOrUpdateæ–¹æ³•æµ‹è¯•ï¼š  å¯¹ç¬æ—¶æ€å¯¹è±¡æ‰§è¡Œinsertæ“ä½œ å¯¹æŒä¹…æ€å¯¹è±¡æ‰§è¡Œupdateæ“ä½œ å¯¹æ‰˜ç®¡æ€å¯¹è±¡æ‰§è¡Œupdateæ“ä½œ  æ‡’åŠ è½½: ã€€ç®€è¿°: å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹,è¿”å›çš„åªæ˜¯è¯¥å¯¹è±¡çš„æ™®é€šå±æ€§ï¼ˆç›´æ¥å±æ€§ï¼Œä¸éœ€è¦é€šè¿‡å¤–é”®ç­‰æŸ¥è¯¢å¾—åˆ°ï¼‰,å½“ç”¨æˆ·å»ä½¿ç”¨å¯¹è±¡å±æ€§æ—¶ï¼Œæ‰ä¼šå‘æ•°æ®åº“å‘å‡ºå†ä¸€æ¬¡çš„æŸ¥è¯¢.è¿™ç§ç°è±¡æˆ‘ä»¬ç§°ä¸º lazyç°è±¡. è§£å†³æ–¹æ³•å¯ä»¥è¿™æ ·:\n æ˜¾ç¤ºåˆå§‹åŒ–ä»£ç†å¯¹è±¡ï¼š Hibernate.initized(student.getDepart())ï¼›ä¸ç›´æ¥å±æ€§ç›¸è¿çš„å¯¹è±¡. ä¿®æ”¹å¯¹è±¡å…³ç³»æ–‡ä»¶ lazy æ”¹å†™ lazy=falseï¼ˆè¯´æ˜ï¼šä¸è¦å†one-to-manyçš„oneä¸­è®¾ç½®falseï¼Œåœ¨manyä¸­è®¾ç½®å¯ä»¥æé«˜æ•ˆç‡ï¼‰ ä»¥ä¸Šä¸¤ç§æ–¹æ³• ä¸èƒ½ç›´æ¥è§£å†³æ‡’åŠ è½½é—®é¢˜. é€šè¿‡è¿‡æ»¤å™¨(webé¡¹ç›®) openSessionInView æ·»åŠ ä¸€ä¸ªè¿‡æ»¤å™¨  æ‡’åŠ è½½è¯¦è§£ï¼š ã€€æ‡’åŠ è½½ï¼ˆLoad On Demandï¼‰æ˜¯ä¸€ç§ç‹¬ç‰¹è€Œåˆå¼ºå¤§çš„æ•°æ®è·å–æ–¹æ³•ï¼Œæ˜¯æŒ‡ç¨‹åºæ¨è¿Ÿè®¿é—®æ•°æ®åº“ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ‰æ—¶å€™ä¸å¿…è¦çš„è®¿é—®æ•°æ®åº“ï¼Œå› ä¸ºä¸€æ¬¡è®¿é—®æ•°æ®åº“æ˜¯æ¯”è¾ƒè€—æ—¶çš„. æ‡’åŠ è½½çš„å‡ ç§æƒ…å†µï¼š é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼šDomain Objectæ˜¯éfinallyçš„ï¼Œæ‰èƒ½å®ç°æ‡’åŠ è½½. è§£å†³æ–¹æ³•ï¼šï¼ˆå› ä¸ºè¦é‡å†™é›†åˆSetâ€¦ï¼‰\n æ˜ç¡®åˆå§‹åŒ– åœ¨sessionè¿˜æ²¡æœ‰å…³é—­æ—¶ï¼Œè®¿é—®ä¸€æ¬¡xxx.getXxx()ï¼Œå¼ºåˆ¶è®¿é—®æ•°æ®åº“. æˆ–è€…Hibernate.initialize(xxx)ï¼› openSessionView è¿™ä¸ªå¾€å¾€éœ€è¦è¿‡æ»¤å™¨é…åˆä½¿ç”¨(webç¨‹åº)ï¼› åœ¨sshä¸­ï¼Œå¯ä»¥å®ç°åœ¨serviceå±‚ï¼Œæ ‡å‡†æ–¹å¼è§£å†³æ‡’åŠ è½½ï¼› åœ¨æ˜ å°„æ–‡ä»¶ä¸­é…ç½®ï¼Œlazy=false.  Hibernateçš„å…³ç³»æ˜ å°„ï¼š mang-to-oneï¼š \u0026lt;!-- å¯¹äºprivate Department departå°±ä¸èƒ½ç”¨property many-to-one çš„name=â€œå˜é‡åâ€ column name=â€œå°†æ¥ç”Ÿæˆè¡¨çš„åâ€ --\u0026gt; \u0026lt;many-to-one name=\u0026quot;depart\u0026quot;\u0026gt; \u0026lt;column name=\u0026quot;depart_id\u0026quot;\u0026gt;\u0026lt;/column\u0026gt; \u0026lt;/many-to-one\u0026gt;  one-to-many éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰ä¸€å·éƒ¨é—¨çš„å­¦ç”Ÿ.\nå¸¸è§„æ€ç»´ï¼šString hql = â€œfrom Student where dept.id=1â€;\nè¿˜å¯ä»¥é‡‡ç”¨ä¸€å¯¹å¤šï¼š\n ç°åœ¨Departmentä¸­æ·»åŠ ä¸€ä¸ªSeté›†åˆï¼Œå¹¶ç”Ÿæˆget/setæ–¹æ³•ï¼› private Set stu;//ä¸€ä¸ªéƒ¨é—¨å¯ä»¥å¯¹åº”å¤šä¸ªå­¦ç”Ÿ åœ¨Department.hbm.xmlæ–‡ä»¶ä¸­æ·»åŠ   \u0026lt;set name=â€œé›†åˆå¯¹è±¡å±æ€§åâ€\u0026gt; \u0026lt;key column=â€œå¤–é”®åâ€\u0026gt; \u0026lt;one-to-many class=â€œé›†åˆå­˜æ”¾çš„ç±»åâ€\u0026gt; \u0026lt;/set\u0026gt; \u0026lt;!-- é…ç½®onne-to-manyå…³ç³» --\u0026gt; \u0026lt;set name=â€œstusâ€ cascade=â€œè”çº§â€\u0026gt; \u0026lt;key column=â€œdepart_idâ€\u0026gt; \u0026lt;one-to-many class=â€œStudentâ€\u0026gt;  one-to-one ä¸€å¯¹ä¸€æœ‰ä¸¤ç§æ–¹å¼ï¼š\n åŸºäºä¸»é”®çš„ä¸€å¯¹ä¸€:   ä¸»é”®å…³è”æ˜ å°„ï¼šå…¶ä¸­ä¸€ä¸ªè¡¨çš„ä¸»é”®ä¾èµ–äºå¦ä¸€å¼ è¡¨çš„ä¸»é”®è€Œå»ºç«‹èµ·çš„ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œè¿™ä¸¤å¼ äº’ç›¸å…³è”çš„è¡¨çš„ä¸»é”®ä¸€è‡´. å¿…é¡»ä¸ºone-to-oneå…ƒç´ å¢åŠ constrained=\u0026ldquo;true\u0026quot;å±æ€§ï¼Œè¡¨æ˜è¯¥ç±»çš„ä¸»é”®ç”±å…³è”ç±»ç”Ÿæˆ.  ã€è¦ç‚¹ã€‘Person - IdCard\n\u0026lt;id name=â€idâ€\u0026gt; \u0026lt;generator class=â€foreignâ€\u0026gt; \u0026lt;param name=â€propertyâ€\u0026gt;idCard\u0026lt;/param\u0026gt; \u0026lt;/generator\u0026gt; \u0026lt;/id\u0026gt; \u0026lt;one-to-one name=â€idCardâ€ constrained=â€trueâ€/\u0026gt;  åŸºäºå¤–é”®çš„ä¸€å¯¹ä¸€ å’ŒN-1ç›¸åŒï¼Œå¤šæ·»åŠ ä¸€ä¸ªunique=\u0026ldquo;true\u0026rdquo; å±æ€§ï¼Œç”¨ä»¥è¡¨ç¤ºNçš„ä¸€ç«¯å¿…é¡»å”¯ä¸€ï¼ŒåŠ äº†å”¯ä¸€çº¦æŸï¼Œå³æˆäº†1-1  ã€ä¸¾ä¾‹ã€‘\n\u0026lt;one-to-one name=â€idCardâ€ property-ref=â€œpersonâ€/\u0026gt; \u0026lt;many-to-one name=â€personâ€ unique=â€trueâ€ /\u0026gt; # property-refï¼šç”¨äºæŒ‡å®šå…³è”ç±»çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§å°†ä¼šå’Œæœ¬å¤–é”®ç›¸å¯¹åº”  many-to-many ã€€å­¦ç”Ÿâ†â†’è¯¾ç¨‹ é¡¾å®¢â†â†’å•†å“ student:one-to-mangy class Student{ private Integer id; private String name; private Set\u0026lt;StuCourse\u0026gt; stuCourses; }  ä»stucourseçš„è§’åº¦çœ‹æ˜¯ many-to-one class StuCourse{ private Integer id; private Student student; private Course course; private Integer grade; }  courset:one-to-mangy class Course{ private Integer id; private String name; private Set\u0026lt;StuCourse\u0026gt; stuCourses; }  cascadeï¼ˆEmployee-Departmentã€bbsé¡¹ç›®ç­‰ï¼‰ æ‰€è°“çº§è”æ“ä½œå°±æ˜¯è¯´ï¼Œå½“è¿›è¡ŒæŸä¸ªæ“ä½œï¼ˆæ·»åŠ /åˆ é™¤/ä¿®æ”¹â€¦ï¼‰ï¼Œå°±æœ‰hibernateè‡ªåŠ¨å®Œæˆ. ä¾‹å¦‚ï¼šDepartmentâ†â†’Employeeå½“æŸä¸ªéƒ¨é—¨è¢«åˆ é™¤åï¼Œå‘˜å·¥ä¹Ÿä¸ä¼šå­˜åœ¨. å¸¸ç”¨çš„cascadeï¼šnoneã€allã€save-updateã€deleteã€lockã€refreshã€evictã€replicã€persistã€mergeã€delete-orphan(one-to-many). ä¸€èˆ¬å¯¹many-to-manyï¼Œmany-to-oneä¸è®¾ç½®è”çº§ï¼Œåœ¨one-to-manyå’Œone-to-oneä¸­è®¾ç½®è”çº§.\nåœ¨JSPé¡µé¢ä¸­è·å–é¡¹ç›®åç§°ï¼š \u0026lt;%=this.getServletContext().getContextPath()%\u0026gt; //javaç‰‡æ®µ ${ pageContext.request.contextPath } //é€šè¿‡æ ‡ç­¾  ç¼“å­˜ ã€€ç¼“å­˜çš„ä½œç”¨ä¸»è¦ç”¨æ¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥ç®€å•çš„ç†è§£æˆä¸€ä¸ªMapï¼›ä½¿ç¼“å­˜æ¶‰åŠåˆ°ä¸‰ä¸ªæ“ä½œï¼šæŠŠæ•°æ®æ”¾å…¥ç¼“å­˜ã€ä»ç¼“å­˜è·å–æ•°æ®ã€åˆ é™¤ç¼“å­˜ä¸­çš„æ— æ•ˆæ•°æ®.\nä¸€çº§ç¼“å­˜ï¼ˆSessionçº§å…±äº«ï¼‰ ä¸€çº§ç¼“å­˜æ˜¯ sessionå¯¹è±¡ä¸­ä¸€å—å†…å­˜. åœ¨åŒä¸€ä¸ªsessionä¸­ï¼ŒæŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸ä¼šå‘å‡ºsqlè¯­å¥. sessionå…³é—­ä¸€çº§ç¼“å­˜ä¸å­˜åœ¨äº†ï¼Œå†æŸ¥è¯¢å¯¹è±¡ï¼Œä¼šå‘å‡ºsql.\nsaveï¼Œupdateï¼ŒsaveOrUpdateï¼Œloadï¼Œgetï¼Œlistï¼Œiteratorï¼Œlockè¿™äº›æ–¹æ³•éƒ½ä¼šå°†å¯¹è±¡æ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­ï¼Œä¸€çº§ç¼“å­˜ä¸èƒ½æ§åˆ¶ç¼“å­˜çš„æ•°é‡ï¼Œæ‰€ä»¥è¦æ³¨æ„å°†å¤§æ‰¹é‡æ“ä½œæ•°æ®æ—¶å¯èƒ½é€ æˆå†…å­˜æº¢å‡ºï¼›å¯ä»¥ç”¨evict(æ¸…æ¥šä¸€ä¸ªå¯¹è±¡)ï¼Œclear(æ¸…é™¤æ‰€æœ‰å¯¹è±¡)æ–¹æ³•æ¸…é™¤ç¼“å­˜çš„å†…å®¹. ç”¨HashMapæ¥æ¨¡æ‹Ÿä¸€ä¸ªSessionç¼“å­˜ï¼ŒåŠ æ·±å¯¹ç¼“å­˜çš„æ·±å…¥.\npackage com.hsp.view; import java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map; public class MyCache { //ä½¿ç”¨mapæ¥æ¨¡æ‹Ÿç¼“å­˜ static Map\u0026lt;Integer,Student\u0026gt; maps=new HashMap\u0026lt;Integer,Student\u0026gt;(); public static void main(String[] args) { // TODO Auto-generated method stub getStudent(1); getStudent(1); getStudent(1); getStudent(1); getStudent(3); getStudent(3); } public static Student getStudent(Integer id){ //s.get() //å…ˆåˆ°ç¼“å­˜å» if(maps.containsKey(id)){ //åœ¨ç¼“å­˜æœ‰ System.out.println(\u0026quot;ä»ç¼“å­˜å–å‡º\u0026quot;); return maps.get(id); }else{ System.out.println(\u0026quot;ä»æ•°æ®åº“ä¸­å–\u0026quot;); //åˆ°æ•°æ®åº“å– Student stu=MyDB.getStudentFromDB(id); //æ”¾å…¥ç¼“å­˜ maps.put(id, stu); return stu; } } } //æˆ‘çš„æ•°æ®åº“ class MyDB{\tstatic List\u0026lt;Student\u0026gt; lists=new ArrayList\u0026lt;Student\u0026gt;(); //åˆå§‹åŒ–æ•°æ®åº“,å‡è®¾æœ‰ä¸‰ä¸ªå­¦ç”Ÿ static{ Student s1=new Student(); s1.setId(1); s1.setName(\u0026quot;aaa\u0026quot;); Student s2=new Student(); s2.setId(2); s2.setName(\u0026quot;bbb\u0026quot;); Student s3=new Student(); s3.setId(3); s3.setName(\u0026quot;ccc\u0026quot;); lists.add(s1); lists.add(s2); lists.add(s3); } public static Student getStudentFromDB(Integer id){ for(Student s: lists){ if(s.getId().equals(id)){ return s; } } return null;// åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰. } } class Student{ private Integer id; private String name; public Integer getId() { return id; } public void setId(Integer id) { this.id = id; } public String getName() { return name; } public void setName(String name) { this.name = name; } }  äºŒçº§ç¼“å­˜ï¼ˆSessionFactoryçº§å…±äº«ï¼‰ ä¸ºä»€ä¹ˆéœ€è¦äºŒçº§ç¼“å­˜?\nã€€å› ä¸ºä¸€çº§ç¼“å­˜æœ‰é™(ç”Ÿå‘½å‘¨æœŸçŸ­),æ‰€ä»¥æˆ‘ä»¬éœ€è¦äºŒçº§ç¼“å­˜(SessionFactoryç¼“å­˜)æ¥å¼¥è¡¥è¿™ä¸ªé—®é¢˜\n éœ€è¦é…ç½® äºŒçº§ç¼“å­˜æ˜¯äº¤ç»™ç¬¬ä¸‰æ–¹å»å¤„ç†,å¸¸è§çš„Hashtable , OSCache , EHCache äºŒçº§ç¼“å­˜çš„åŸç†ï¼› äºŒçº§ç¼“å­˜çš„å¯¹è±¡å¯èƒ½æ”¾åœ¨å†…å­˜ï¼Œä¹Ÿå¯èƒ½æ”¾åœ¨ç£ç›˜.  ä½¿ç”¨OsCacheæ¥æ¼”ç¤ºäºŒçº§ç¼“å­˜çš„ä½¿ç”¨.\n é…ç½®äºŒçº§ç¼“å­˜  å¯¹é…ç½®è¯´æ˜:\n\u0026lt;property name=\u0026quot;hbm2ddl.auto\u0026quot;\u0026gt;update\u0026lt;/property\u0026gt; \u0026lt;!-- å¯åŠ¨äºŒçº§ç¼“å­˜ --\u0026gt; \u0026lt;property name=\u0026quot;cache.use_second_level_cache\u0026quot;\u0026gt;true\u0026lt;/property\u0026gt; \u0026lt;!-- æŒ‡å®šä½¿ç”¨å“ªç§äºŒçº§ç¼“å­˜ --\u0026gt; \u0026lt;property name=\u0026quot;cache.provider_class\u0026quot;\u0026gt;org.hibernate.cache.OSCacheProvider\u0026lt;/property\u0026gt; \u0026lt;mapping resource=\u0026quot;com/hsp/domain/Department.hbm.xml\u0026quot; /\u0026gt; \u0026lt;mapping resource=\u0026quot;com/hsp/domain/Student.hbm.xml\u0026quot; /\u0026gt; \u0026lt;!-- æŒ‡å®šå“ªä¸ªdomainå¯ç”¨äºŒçº§ç¼“å­˜ ç‰¹åˆ«è¯´æ˜äºŒçº§ç¼“å­˜ç­–ç•¥: 1. read-only 2. read-write 3. nonstrict-read-write 4. transcational --\u0026gt; \u0026lt;class-cache class=\u0026quot;com.hsp.domain.Student\u0026quot; usage=\u0026quot;read-write\u0026quot;/\u0026gt;  å¯ä»¥æŠŠoscache.propertiesæ–‡ä»¶æ”¾åœ¨ srcç›®å½•ä¸‹ï¼Œè¿™æ ·ä½ å¯ä»¥æŒ‡å®šæ”¾å…¥äºŒçº§ç¼“å­˜çš„å¯¹è±¡capacity å¤§å°. é»˜è®¤1000. ä½¿ç”¨  // TODO Auto-generated method stub //é€šè¿‡è·å–ä¸€ä¸ªsesion,è®©hibernateæ¡†æ¶è¿è¡Œ(config-\u0026gt;åŠ è½½hibernate.cfg.xml) Session s=null; Transaction tx=null;\ttry { //æˆ‘ä»¬ä½¿ç”¨åŸºç¡€æ¨¡æ¿æ¥è®²è§£. s=HibernateUtil.openSession(); tx=s.beginTransaction();\t//æŸ¥è¯¢45å·å­¦ç”Ÿ\tStudent stu1=(Student) s.get(Student.class, 45);//45-\u0026gt;ä¸€çº§ç¼“å­˜\tSystem.out.println(stu1.getName()); tx.commit();\t} catch (Exception e) { e.printStackTrace(); if(tx!=null){ tx.rollback(); } }finally{\tif(s!=null \u0026amp;\u0026amp; s.isOpen()){ s.close(); } }\tSystem.out.println(\u0026quot;*********************************\u0026quot;); try { //æˆ‘ä»¬ä½¿ç”¨åŸºç¡€æ¨¡æ¿æ¥è®²è§£. s=HibernateUtil.openSession(); tx=s.beginTransaction();\t//æŸ¥è¯¢45å·å­¦ç”Ÿ\tStudent stu1=(Student) s.get(Student.class, 45);\tSystem.out.println(stu1.getName());\tStudent stu3=(Student) s.get(Student.class, 46);\tSystem.out.println(stu3.getName()); tx.commit();\t} catch (Exception e) { e.printStackTrace(); if(tx!=null){ tx.rollback(); } }finally{ if(s!=null \u0026amp;\u0026amp; s.isOpen()){ s.close(); } } //å®Œæˆä¸€ä¸ªç»Ÿè®¡ï¼Œç»Ÿè®¡çš„ä¿¡æ¯åœ¨Sessfactory //SessionFactoryå¯¹è±¡. Statistics statistics= HibernateUtil.getSessionFactory().getStatistics(); System.out.println(statistics); System.out.println(\u0026quot;æ”¾å…¥\u0026quot;+statistics.getSecondLevelCachePutCount()); System.out.println(\u0026quot;å‘½ä¸­\u0026quot;+statistics.getSecondLevelCacheHitCount()); System.out.println(\u0026quot;é”™è¿‡\u0026quot;+statistics.getSecondLevelCacheMissCount());  åœ¨é…ç½®äº†äºŒçº§ç¼“å­˜åï¼Œè¯·å¤§å®¶è¦æ³¨æ„å¯ä»¥é€šè¿‡ Statistics,æŸ¥çœ‹ä½ çš„é…ç½®å‘½ä¸­ç‡é«˜ä¸é«˜.  äº‹åŠ¡ç®¡ç†  åœ¨hibernateè®¾ç½®éš”ç¦»çº§åˆ« åœ¨hibernate.cfg.xmlä¸­è®¾ç½®éš”ç¦»çº§åˆ«ï¼š  \u0026lt;!-- äº‹åŠ¡éš”ç¦»çº§åˆ« --\u0026gt; \u0026lt;property name=\u0026quot;hibernate.connection.isolation\u0026quot;\u0026gt;4\u0026lt;/property\u0026gt;  äº‹åŠ¡æ§åˆ¶åœ¨å“ªé‡Œè¿›è¡Œï¼Ÿ  service(){ session.beginTransaction;//å¼€å¯äº‹åŠ¡ try{ è°ƒç”¨daoæ–¹æ³•1 è°ƒç”¨daoæ–¹æ³•2 ..... session.getTransaction().commit();//æäº¤äº‹åŠ¡ }catch(Exception ex){ session.getTransaction().rollback();//å›æ»šäº‹åŠ¡ } }  sessionå¦‚ä½•ç®¡ç† ã€€åœ¨serviceæ¥å£ä¸­ï¼Œæ¯ä¸ªdaoè¯·æ±‚ä¸­ä½¿ç”¨åŒä¸€ä¸ªsessionå³ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œä¿è¯å¤šä¸ªdaoè°ƒç”¨åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­. åœ¨serviceæ‰§è¡Œå¼€å§‹å¤„å¼€å¯ä¸€ä¸ªæ–°sessionï¼Œå°†sessionå’Œå½“å‰çº¿ç¨‹ç»‘å®šï¼Œåœ¨æ¯ä¸ªdaoè°ƒç”¨ä¸­è·å–å½“å‰çº¿ç¨‹ç»‘å®šçš„sessionï¼Œå®ç°æ¯ä¸ªdaoè·å–åˆ°çš„sessionæ˜¯åŒä¸€ä¸ªsession. ä¸»é”®å¢é•¿ç­–ç•¥  increment: è‡ªå¢ï¼Œæ¯æ¬¡å¢é•¿1, é€‚ç”¨äºæ‰€æœ‰æ•°æ®åº“. ä½†æ˜¯ä¸è¦ä½¿ç”¨åœ¨å¤šè¿›ç¨‹,ä¸»é”®ç±»å‹æ˜¯æ•°å€¼å‹ select max(id) from Student identity : è‡ªå¢ï¼Œæ¯æ¬¡å¢é•¿1, é€‚ç”¨äºæ”¯æŒidentityçš„æ•°æ®(mysql,sql server), ä¸»é”®ç±»å‹æ˜¯æ•°å€¼ sequence native:ä¼šæ ¹æ®æ•°æ®ç±»å‹æ¥é€‰æ‹©ï¼Œä½¿ç”¨identity,sequence ,hilo select hibernate_sequence.nextval from dual.ä¸»é”®ç±»å‹æ˜¯æ•°å€¼long , short ,int  \u0026lt;id name=\u0026quot;id\u0026quot; type=\u0026quot;java.lang.Integer\u0026quot;\u0026gt; \u0026lt;generator class=\u0026quot;native\u0026quot;/\u0026gt; \u0026lt;/id\u0026gt;  hilo:hiloæ ‡è¯†ç¬¦ç”Ÿæˆå™¨ç”±HibernateæŒ‰ç…§ä¸€ç§high/lowç®—æ³•ç”Ÿæˆæ ‡è¯†ç¬¦.  ç”¨æ³•:\n\u0026lt;id name=â€idâ€ type=â€java.lang.Integerâ€ column=â€IDâ€\u0026gt; \u0026lt;generator class=â€hiloâ€\u0026gt; \u0026lt;param name=â€tableâ€\u0026gt;my_hi_value\u0026lt;/param\u0026gt; \u0026lt;param name=â€columnâ€\u0026gt;next_value\u0026lt;/param\u0026gt; \u0026lt;/generator\u0026gt; \u0026lt;/id\u0026gt;  uuid: ä¼šæ ¹æ®uuidç®—æ³•ï¼Œç”Ÿæˆ128-bitçš„å­—ä¸² ä¸»é”®å±æ€§ç±»å‹ä¸èƒ½æ˜¯æ•°å€¼å‹ï¼Œè€Œæ˜¯å­—ä¸²å‹ assigned: ç”¨æˆ·è‡ªå·±è®¾ç½®ä¸»é”®å€¼ï¼Œæ‰€ä»¥ä¸»é”®å±æ€§ç±»å‹å¯ä»¥æ˜¯æ•°å€¼ï¼Œå­—ä¸² æ˜ å°„å¤åˆä¸»é”® foreign: åœ¨one-to-oneçš„å…³ç³»ä¸­ï¼Œæœ‰å¦ä¸€å¼ è¡¨çš„ä¸»é”®(Person) æ¥å†³å®š è‡ªå·±ä¸»é”®/å¤–é”®( IdCard)  ç»™å‡ºä¸€ä¸ªç®€å•åŸåˆ™:\n é’ˆå¯¹oracle [ä¸»é”®æ˜¯int/long/short å»ºè®®ä½¿ç”¨ sequence] ä¸»é”®æ˜¯String ä½¿ç”¨uuidæˆ–è€…assinged é’ˆå¯¹ mysql [ä¸»é”®æ˜¯ int/long/short å»ºè®®ä½¿ç”¨increment/assigend ,å¦‚æœæ˜¯å­—ä¸² UUId/assigned] é’ˆå¯¹ sql server [ä¸»é”®æ˜¯ int/long/short å»ºè®®ä½¿ç”¨identity/native/assinged ,å¦‚æœä¸»é”®æ˜¯å­—ä¸²ï¼Œä½¿ç”¨uuid/assigned ] one-to-one åˆæ˜¯åŸºäºä¸»é”®çš„åˆ™ä½¿ç”¨foreign  Hibernateä¸é€‚åˆçš„åœºæ™¯ ã€€ä¸é€‚åˆOLAPï¼ˆOn-Line-Analytical Processingè”æœºåˆ†æå¤„ç†ï¼‰ï¼Œå·²æŸ¥è¯¢åˆ†ææ•°æ®ä¸ºä¸»æµçš„ç³»ç»Ÿï¼Œé€‚åˆOLTPï¼ˆOn-line transaction Processingè”æœºäº‹åŠ¡å¤„ç†ï¼‰\n    OLTP OLAP     ç”¨æˆ· æ“ä½œäººå‘˜ï¼Œåº•å±‚ç®¡ç†äººå‘˜ å†³ç­–äººå‘˜ï¼Œé«˜çº§ç®¡ç†äººå‘˜   åŠŸèƒ½ æ—¥å¸¸æ“ä½œç®¡ç† åˆ†æå†³ç­–   DBè®¾è®¡ é¢å‘åº”ç”¨ é¢å‘ä¸»é¢˜   æ•°æ® å½“å‰çš„ï¼Œæœ€æ–°çš„ï¼Œç»†èŠ‚çš„ï¼ŒäºŒç»´çš„åˆ†ç«‹çš„ å†å²çš„ã€èšé›†çš„ã€å¤šç»´çš„é›†æˆçš„ï¼Œç»Ÿä¸€çš„   å­˜å– è¯»/å†™æ•°åæ¡è®°å½• è¯»/å†™ä¸Šç™¾ä¸‡ æ¡è®°å½•   å·¥ä½œå•ä½ ç®€å•äº‹åŠ¡ å¤æ‚æŸ¥è¯¢   ç”¨æˆ· ä¸Šåƒä¸ª ä¸Šç™¾ä¸ª   DBå¤§å° 100M-GB 100GB-TB    ","date":1611878400,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611878400,"objectID":"fe1a2ed54399c32bb0a8893cc5ff6170","permalink":"https://CoMath21.github.io/post/1-hibernate/","publishdate":"2021-01-29T00:00:00Z","relpermalink":"/post/1-hibernate/","section":"post","summary":"å…·ä½“ä»‹ç»Hibernateçš„ç›¸å…³å†…å®¹.","tags":["ç¼–ç¨‹è¯­è¨€","Java","Hibernate"],"title":"Hibernateå­¦ä¹ ç¬”è®°","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"1ã€ä»€ä¹ˆæ˜¯Struts2: ã€€Struts2æ˜¯ä¸€ä¸ªåŸºäºMVCè®¾è®¡æ¨¡å¼çš„Webåº”ç”¨æ¡†æ¶ï¼Œå®ƒæœ¬è´¨ä¸Šç›¸å½“äºä¸€ä¸ªservletï¼Œåœ¨MVCè®¾è®¡æ¨¡å¼ä¸­ï¼ŒStruts2ä½œä¸ºæ§åˆ¶å™¨(Controller)æ¥å»ºç«‹æ¨¡å‹ä¸è§†å›¾çš„æ•°æ®äº¤äº’. Struts2æ˜¯WebWork2åŸºç¡€å‘å±•è€Œæ¥çš„.\n2ã€Struts2ä¼˜ç‚¹ï¼š  Struts2çš„åº”ç”¨å¯ä»¥ä¸ä¾èµ–äºServlet APIï¼ˆrequest,responseï¼‰å’Œstruts APIï¼›è¿™ç§è®¾è®¡å±äºæ— ä¾µå…¥å¼è®¾è®¡. Struts2æä¾›äº†æ‹¦æˆªå™¨,åˆ©ç”¨æ‹¦æˆªå™¨å¯ä»¥è¿›è¡ŒAOPç¼–ç¨‹,å®ç°å¦‚æƒé™æ‹¦æˆªç­‰åŠŸèƒ½. Struts2æä¾›ç±»å‹è½¬æ¢å™¨,å¯ä»¥æŠŠç‰¹æ®Šç±»å‹å‚æ•°è½¬æ¢ç¨‹åºè¦çš„ç±»å‹. Struts2æä¾›æ”¯æŒå¤šç§è¡¨ç°å±‚æŠ€æœ¯,å¦‚JSP,freeMarker,Velocityç­‰. Struts2çš„è¾“å…¥æ ¡éªŒå¯ä»¥å¯¹æŒ‡å®šçš„æ–¹æ³•è¿›è¡Œæ ¡éªŒ. Struts2æä¾›äº†å…¨å±€èŒƒå›´ã€åŒ…èŒƒå›´ã€å’ŒActionèŒƒå›´çš„å›½é™…æ¢èµ„æºæ–‡ä»¶ç®¡ç†å®ç°.  3ã€æ­å»ºStruts2å¼€å‘ç¯å¢ƒ 3.1ã€å¼€å‘Struts2åº”ç”¨ä¾èµ–çš„jaræ–‡ä»¶ å¼€å‘Struts2åº”ç”¨éœ€è¦ä¾èµ–çš„jaræ–‡ä»¶åœ¨è§£å‹ç›®å½•çš„libæ–‡ä»¶å¤¹ä¸‹,ä¸åŒçš„åº”ç”¨éœ€è¦çš„JARåŒ…æ˜¯ä¸åŒçš„. å¼€å‘Struts2ç¨‹åºæœ€å°‘éœ€è¦çš„JAR.\n struts2-core-2.x.x.jar ï¼šStruts2æ¡†æ¶çš„æ ¸å¿ƒç±»åº“. xwork-2.x.x jar ï¼šXWorkç±»åº“,Struts2åœ¨å…¶ä¸Šæ„å»º. ognl-2.6.x.jar ï¼šå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€(Object Graph Navigation Language),struts2æ¡†æ¶é€šè¿‡å…¶è¯»å†™å¯¹è±¡çš„å±æ€§. freemarker-2.3.x.jar ï¼šStruts 2çš„UIæ ‡ç­¾çš„æ¨¡æ¿ä½¿ç”¨FreeMarkerç¼–å†™. commons-logging-1.1.x jar ï¼šASFå‡ºå“çš„æ—¥å¿—åŒ…,Struts2æ¡†æ¶ä½¿ç”¨è¿™ä¸ªæ—¥å¿—åŒ…æ¥æ”¯æŒLog4Jå’ŒJDK1.4+çš„æ—¥å¿—è®°å½•. commons-fileupload-12 .1.jar ï¼šæ–‡ä»¶ä¸Šä¼ ç»„ä»¶,2 .1.6ç‰ˆæœ¬åå¿…é¡»åŠ å…¥æ­¤æ–‡ä»¶.   3.2ã€æ­å»ºStruts2å¼€å‘ç¯å¢ƒ  æ‰¾åˆ°Struts2éœ€è¦çš„å‡ ä¸ªjaråŒ…ï¼› ç¼–å†™é…ç½®struts2çš„é…ç½®æ–‡ä»¶ï¼šsrcä¸‹åˆ›å»ºstruts.xmlæ–‡ä»¶ï¼› åœ¨web.xmlä¸­åŠ å…¥struts2 MVCæ¡†æ¶å¯åŠ¨é…ç½®  \u0026lt;filter\u0026gt; \u0026lt;filter-name\u0026gt;struts2\u0026lt;/filter-name\u0026gt; \u0026lt;filter-class\u0026gt;org.apache.struts2.dispatcher.ng.filter. StrutsPrepareAndExecuteFilter\u0026lt;/filter-class\u0026gt; \u0026lt;/filter\u0026gt; \u0026lt;filter-mapping\u0026gt; \u0026lt;filter-name\u0026gt;struts2\u0026lt;/filter-name\u0026gt; \u0026lt;url-pattern\u0026gt;/*\u0026lt;/url-pattern\u0026gt; \u0026lt;/filter-mapping\u0026gt;  4ã€Struts.xmlé…ç½®ä¸­çš„åŒ…ä»‹ç»  é…ç½®åŒ…æ—¶å¿…é¡»æŒ‡å®šnameå±æ€§ï¼š è¯¥å±æ€§åå­—å¯ä»¥ä»»æ„,ä½†æ˜¯å¿…é¡»å”¯ä¸€,ä¸»è¦ä½œç”¨åœ¨äºï¼šå¦‚æœå…¶ä»–åŒ…è¦ç»§æ‰¿è¯¥åŒ…å°±å¿…é¡»é€šè¿‡è¯¥å±æ€§(nameå±æ€§)è¿›è¡Œå¼•ç”¨. åŒ…çš„namespaceå±æ€§ï¼š ç”¨äºå®šä¹‰è¯¥åŒ…çš„å‘½åç©ºé—´,å‘½åç©ºé—´ä½œä¸ºè®¿é—®è¯¥åŒ…ä¸‹Actionè·¯å¾„çš„ä¸€éƒ¨åˆ†. å¦‚æœä¸é…ç½®,é»˜è®¤ä¸ºâ€â€(ç©ºå­—ç¬¦ä¸²). ç»§æ‰¿æ–¹æ³•extendsï¼š é€šå¸¸æ¯ä¸ªåŒ…éƒ½åº”è¯¥ç»§æ‰¿struts-defaultåŒ…,å› ä¸ºStruts2å¾ˆå¤šæ ¸å¿ƒçš„åŠŸèƒ½éƒ½æ˜¯æ‹¦æˆªå™¨æ¥å®ç°çš„. struts-defaultå®šä¹‰äº†è¿™äº›æ‹¦æˆªå™¨å’ŒResultç±»å‹ï¼›struts-defaultåŒ…æ˜¯åœ¨struts2-core-2.jaræ–‡ä»¶ä¸­çš„struts-default.xmlä¸­å®šä¹‰çš„,struts-default.xmlä¹Ÿæ˜¯Struts2é»˜è®¤é…ç½®æ–‡ä»¶. Struts2æ¯æ¬¡éƒ½ä¼šè‡ªåŠ¨åŠ è½½struts-default.xmlæ–‡ä»¶.\n  4.1ã€Actioné…ç½®ä¸­çš„å„ç§é»˜è®¤å€¼  å¦‚æœæ²¡æœ‰ä¸ºactionæŒ‡å®šclass,é»˜è®¤æ˜¯ActionSupport. å¦‚æœæ²¡æœ‰ä¸ºactionæŒ‡å®šmethod,é»˜è®¤æ‰§è¡Œactionä¸­çš„execute()æ–¹æ³•. å¦‚æœæ²¡æœ‰æŒ‡å®šactionçš„nameå±æ€§,é»˜è®¤å€¼ä¸ºsuccess.  Actionä¸­çš„resultçš„å„ç§è½¬å‘ç±»å‹ ã€€Struts2å¸¸ç”¨çš„ç»“æœç±»å‹æœ‰ï¼šdispathcher(é»˜è®¤å€¼)ã€redirect(é‡å®šå‘)ã€redirectActionã€plainText åœ¨resultä¸­å¯ä»¥ä½¿ç”¨${å±æ€§å}è¡¨è¾¾å¼è®¿é—®actionä¸­çš„å±æ€§,è¡¨è¾¾å¼é‡Œçš„å±æ€§åå¯¹åº”actionä¸­çš„å±æ€§.\n dispathcher(é»˜è®¤å€¼)ï¼šå†…éƒ¨è¯·æ±‚è½¬å‘ redirect(é‡å®šå‘)ï¼š  // æ ¼å¼ï¼š \u0026lt;result type=\u0026quot;redirect\u0026quot;\u0026gt;/hello.jsp\u0026lt;/result\u0026gt; // å¦‚æœé‡å®šå‘éœ€è¦å¸¦å‚æ•°,åˆ™ç”¨ï¼š \u0026lt;result type=\u0026quot;redirect\u0026quot;\u0026gt;/hello.jsp?id=${id}\u0026lt;/result\u0026gt;  æ­¤æ—¶,éœ€è¦åœ¨å¯¹åº”çš„Actionä¸‹æœ‰å¯¹åº”çš„å˜é‡,å¹¶ä¸”æä¾›getå±æ€§. æ³¨æ„ï¼šé‡å®šå‘ä¸èƒ½è®¿é—®WEB-INFä¸‹çš„æ–‡ä»¶.\n redirectAction(åœ¨å…¶ä»–*Actionä¸‹)ï¼š  // æ ¼å¼ï¼š \u0026lt;action name=\u0026quot; redirectActionName\u0026quot;\u0026gt; \u0026lt;result type=\u0026quot; redirectAction\u0026quot;\u0026gt;é‡å®šå‘çš„name\u0026lt;/result\u0026gt; \u0026lt;/action\u0026gt; // å¦‚æœä¸ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸‹éœ€é…ç½®é¡¹ \u0026lt;result type=\u0026quot; redirectAction\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot; actionName\u0026quot;\u0026gt;xxx\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026quot; namespace\u0026quot;\u0026gt;/â€¦/â€¦\u0026lt;/param\u0026gt; \u0026lt;/result\u0026gt;  è¡¥å…….\nä¸­æ–‡å­—ç¬¦ç¼–ç ã€è§£ç \n ç¼–ç (java.net.URLEncoder)ï¼šURLEncoder.encode(\u0026quot;å­—ç¬¦ä¸²\u0026quot;,\u0026quot;UTF-8\u0026quot;); è§£ç (java.net.URLDecoder)ï¼šURLDecoder.encode(new String (request.getParameter(\u0026quot;å±æ€§å\u0026quot;).getBytes(\u0026quot;ISO8859-1\u0026quot;),\u0026quot;UTF-8\u0026quot;),\u0026quot;UTF-8\u0026quot;); JSPæ–‡ä»¶ä¸­å¯ä»¥ç”¨$(param.å±æ€§å)è®¿é—®Actionä¸­çš„å±æ€§(ä¼šä¹±ç )  ã€€plaintext(æ˜¾ç¤ºåŸå§‹æ–‡ä»¶å†…å®¹çš„é‡å®šå‘)ï¼šä¾‹å¦‚æŸåŠŸèƒ½éœ€è¦æŸ¥çœ‹æºä»£ç \n\u0026lt;action name=\u0026quot; plainText\u0026quot;\u0026gt; \u0026lt;result type=\u0026quot; plainText\u0026quot;\u0026gt;\u0026lt;/result\u0026gt; \u0026lt;/action\u0026gt;  æ³¨æ„ï¼šå½“è¯¥JSPæ–‡ä»¶å­˜åœ¨ä¸­æ–‡çš„æ—¶å€™,ä¼šä¹±ç ï¼  éœ€è¦åŠ å…¥ï¼š\n\u0026lt;param name=\u0026quot; location\u0026quot;\u0026gt;/xxx.jsp\u0026lt;/param\u0026gt;\u0026lt;!â€”å®šå‘çš„è·¯å¾„--\u0026gt; \u0026lt;param name=\u0026quot; charSet\u0026quot;\u0026gt;UTF-8\u0026lt;/param\u0026gt;\u0026lt;!--æŒ‡å®šè¯»å–æ–‡ä»¶çš„ç¼–ç --\u0026gt;  é™„ï¼šStruts2çš„å…¨è§†å›¾ å•ä¸ªåŒ…ä¸‹ï¼š\n\u0026lt;package name=\u0026quot; xxx\u0026quot; namespace=\u0026quot; /â€¦/â€¦\u0026quot; extends=\u0026quot; struts-default\u0026quot;\u0026gt; \u0026lt;global-results\u0026gt;\t\u0026lt;result type=\u0026quot; messâ€¦\u0026quot;\u0026gt;/â€¦/â€¦\u0026lt;/result\u0026gt; \u0026lt;/global-results\u0026gt; \u0026lt;/package\u0026gt;  å…¨å±€ï¼š(åœ¨ä¸€ä¸ªåŒ…ä¸­å†™,ç„¶åå…¶ä»–åŒ…ç»§æ‰¿è¯¥åŒ…)\n4.2ã€ä¸ºActionå±æ€§æ³¨å…¥å€¼ \u0026lt;package name=\u0026quot; xxx\u0026quot; namespace=\u0026quot; /â€¦/â€¦\u0026quot; extends=\u0026quot; struts-default\u0026quot;\u0026gt; \u0026lt;action name=\u0026quot; list\u0026quot; class=\u0026quot;com.haibao.HelloWorldAction\u0026quot; method=\u0026quot;execute\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;path \u0026quot;\u0026gt;/image\u0026lt;/param\u0026gt; \u0026lt;result name=\u0026quot;success \u0026quot;\u0026gt;/xxx.jsp \u0026lt;/result\u0026gt; \u0026lt;/action\u0026gt; \u0026lt;/package\u0026gt;  é™„ï¼šåœ¨HelloWorldActionä¸‹å¿…é¡»å­˜åœ¨â€œpathâ€å±æ€§çš„getæ–¹æ³• ,è®¿é—®xxx.jspå¾—åˆ°çš„æ˜¯â€œ/imageâ€\n5ã€æŒ‡å®šstruts2å¤„ç†çš„è¯·æ±‚åç¼€ 5.1ã€é»˜è®¤åç¼€åŠä¿®æ”¹ é»˜è®¤åç¼€ï¼š.action é»˜è®¤åç¼€å¯ä»¥é€šè¿‡å¸¸é‡\u0026quot;struts.action.extension\u0026quot;è¿›è¡Œä¿®æ”¹\n\u0026lt;constant name=\u0026quot; struts.action.extension\u0026quot; value=\u0026quot;do\u0026quot;/\u0026gt;  å¦‚æœç”¨æˆ·æŒ‡å®šå¤šä¸ªè¯·æ±‚åç¼€,åˆ™å¤šä¸ªåç¼€ä¹‹é—´ä»¥è‹±æ–‡é€—å·( , )éš”å¼€\n\u0026lt;constant name=\u0026quot; struts.action.extension\u0026quot; value=\u0026quot;do,action\u0026quot;/\u0026gt;  5.2ã€å¸¸ç”¨çš„å¸¸é‡ \u0026lt;!--æŒ‡å®šé»˜è®¤ç¼–ç é›†,ä½œç”¨äºHTTPServletRequestçš„setCharacterEncodingæ–¹æ³•å’Œfreemarkerã€velocityçš„è¾“å‡º--\u0026gt; \u0026lt;constant name=\u0026quot; struts.i18n.encoding\u0026quot; value=\u0026quot;UTF-8\u0026quot;/\u0026gt; \u0026lt;!-- è¯¥å±æ€§æŒ‡å®šéœ€è¦çš„struts2å¤„ç†çš„åç¼€è¯·æ±‚å¦‚æœç”¨æˆ·æŒ‡å®šå¤šä¸ªè¯·æ±‚åç¼€,åˆ™å¤šä¸ªåç¼€ä¹‹é—´ä»¥è‹±æ–‡é€—å·(,)éš”å¼€--\u0026gt; \u0026lt;constant name=\u0026quot; struts.action.extension\u0026quot; value=\u0026quot;do,action\u0026quot;/\u0026gt; \u0026lt;!-- è®¾ç½®æµè§ˆå™¨æ˜¯å¦ç¼“å­˜é™æ€å†…å®¹. é»˜è®¤å€¼ä¸ºtrue(ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨)--\u0026gt; \u0026lt;constant name=\u0026quot;struts.serve.static.browserCache\u0026quot; value=\u0026quot;false\u0026quot;/\u0026gt; \u0026lt;!-- å½“strutsçš„é…ç½®æ–‡ä»¶ä¿®æ”¹å,ç³»ç»Ÿæ˜¯å¦è‡ªåŠ¨é‡æ–°åŠ è½½è¯¥æ–‡ä»¶,é»˜è®¤false(ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨) --\u0026gt; \u0026lt;constant name=\u0026quot; struts.configuration.xml.reload\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;!-- å¼€å‘æ¨¡å¼ä¸‹ä½¿ç”¨,è¿™æ ·å¯ä»¥æ‰“å°å‡ºæ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ --\u0026gt; \u0026lt;constant name=\u0026quot; struts.devMode\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;â€ƒ\u0026lt;!-- é»˜è®¤çš„è§†å›¾ä¸»é¢˜ --\u0026gt; \u0026lt;constant name=\u0026quot; struts.ui.theme\u0026quot; value=\u0026quot;smple\u0026quot;/\u0026gt;â€ƒ\u0026lt;!-- ä¸Springé›†æˆæ—¶,æŒ‡å®šæœ‰Springè´Ÿè´£actionå¯¹è±¡çš„åˆ›å»º --\u0026gt; \u0026lt;constant name=\u0026quot; struts.objectFactory\u0026quot; value=\u0026quot;spring\u0026quot;/\u0026gt; \u0026lt;!-- è¯¥å±æ€§è®¾ç½®Struts2æ˜¯å¦æ”¯æŒåŠ¨æ€æ–¹æ³•è°ƒç”¨,é»˜è®¤ä¸ºtrue --\u0026gt; \u0026lt;constant name=\u0026quot; struts.enable.DynamicMethodlnvocation\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;!-- ä¸Šä¼ æ–‡ä»¶çš„å¤§å°é™åˆ¶ --\u0026gt; \u0026lt;constant name=\u0026quot; struts.multipart.maxSize\u0026quot; value=\u0026quot;10701096\u0026quot;/\u0026gt;  5.3ã€å¸¸é‡çš„å®šä¹‰ å¸¸é‡å¯ä»¥åœ¨struts.xmlæˆ–struts.propretiesä¸­é…ç½®,å»ºè®®åœ¨struts.xmlä¸­é…ç½® åœ¨struts.xmlæ–‡ä»¶ä¸­é…ç½®å¸¸é‡ï¼š\n\u0026lt;struts\u0026gt; \u0026lt;constant name=\u0026quot;struts.action.extension\u0026quot; value=\u0026quot;do\u0026quot;\u0026gt; \u0026lt;/struts\u0026gt;  åœ¨struts.propretiesä¸­é…ç½®å¸¸é‡ï¼š\nstruts.action.extension=do  å¸¸é‡å¯ä»¥åœ¨ä¸‹é¢å¤šä¸ªé…ç½®æ–‡ä»¶ä¸­å®šä¹‰,åŠ è½½å¸¸é‡çš„æœç´¢é¡ºåºä¸ºï¼š\n struts-default.xml struts-plugin.xml struts.xml struts.propreties web.xml  å¤šä¸ªæ–‡ä»¶ä¸­é…ç½®äº†åŒä¸€ä¸ªå¸¸é‡,åˆ™åä¸€ä¸ªæ–‡ä»¶ä¸­é…ç½®çš„å¸¸é‡å€¼ä¼šè¦†ç›–å‰é¢æ–‡ä»¶ä¸­é…ç½®çš„å¸¸é‡å€¼.\n6ã€Struts2çš„å¤„ç†æµç¨‹ StrutsPrepareAndExecuteFilteræ˜¯Strutsçš„æ ¸å¿ƒæ§åˆ¶å™¨,ä»–è´Ÿè´£æ‹¦æˆªç”±/*æŒ‡å®šçš„æ‰€æœ‰ç”¨æˆ·è¯·æ±‚,å½“ç”¨æˆ·è¯·æ±‚åˆ°è¾¾æ—¶,ç»™Filterä¼šè¿‡æ»¤ç”¨æˆ·çš„è¯·æ±‚. é»˜è®¤æƒ…å†µä¸‹,å¦‚æœç”¨æˆ·è¯·æ±‚è·¯å¾„ä¸å¸¦åç¼€æˆ–è€…ä»¥.actionç»“å°¾,è¿™æ—¶è¯·æ±‚è¢«è½¬å…¥Struts2æ¡†æ¶å¤„ç†,å¦åˆ™Struts2æ¡†æ¶å°†ç•¥è¿‡è¯¥è¯·æ±‚çš„å¤„ç†. å½“è¯·æ±‚è½¬å…¥Struts2æ¡†æ¶å¤„ç†æ—¶ä¼šç»è¿‡ä¸€ç³»åˆ—çš„æ‹¦æˆªå™¨,ç„¶ååˆ°Action. ä¸Struts1ä¸åŒ,Struts2å¯¹ç”¨æˆ·çš„æ¯ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªAction,æ‰€ä»¥Struts2ä¸­çš„Actionæ˜¯çº¿ç¨‹å®‰å…¨çš„.\nä¸ºåº”ç”¨æŒ‡å®šå¤šä¸ªStrutsé…ç½®æ–‡ä»¶\nã€€åœ¨å¤§éƒ¨åˆ†åº”ç”¨é‡Œ,éšç€åº”ç”¨è§„æ¨¡çš„å¢åŠ ,ç³»ç»Ÿä¸­Actionçš„æ•°é‡ä¹Ÿä¼šå¤§å¤§å¢åŠ ,å¯¼è‡´struts.xmlé…ç½®æ–‡ä»¶å˜å¾—è‡ƒè‚¿,ä¸ºäº†é¿å…struts.xmlæ–‡ä»¶è¿‡äºåºå¤§,æé«˜struts.xmlæ–‡ä»¶çš„å¯è¯»æ€§,å¯ä»¥å°†ä¸€ä¸ªstruts.xmlé…ç½®æ–‡ä»¶åˆ†è§£æˆå¤šä¸ªé…ç½®æ–‡ä»¶,ç„¶ååœ¨struts.xmlæ–‡ä»¶ä¸­åŒ…å«å…¶ä»–é…ç½®æ–‡ä»¶(é€šè¿‡å…ƒç´ æŒ‡å®šå¤šä¸ªé…ç½®æ–‡ä»¶)\n\u0026lt;struts\u0026gt; \u0026lt;include file=\u0026quot;struts-user.xml\u0026quot;/\u0026gt; \u0026lt;include file=\u0026quot;struts-order.xml\u0026quot;/\u0026gt; \u0026lt;/struts\u0026gt;  7ã€åŠ¨æ€æ–¹æ³•è°ƒç”¨ï¼š  åŠ¨æ€æ–¹æ³•è°ƒç”¨DMIï¼ˆåŠ¨æ€æŒ‡å®šï¼‰,å¯ä»¥åœ¨urlåœ°å€ä¸­åŠ¨æ€æŒ‡å®šactionæ‰§è¡Œå“ªä¸ªæ–¹æ³•,å¯ä»¥é€šè¿‡action+!+æ–¹æ³•å. (æ³¨ï¼šåªè¦Actionå¯¹è±¡ä¸­æœ‰è¿™ä¸ªæ–¹æ³•,å¹¶ä¸”è¿”å›ç±»å‹ä¸ºStringå°±å¯ä»¥è°ƒç”¨,è¿™æ ·struts.xmlæ–‡ä»¶é…ç½®æ–‡ä»¶å°±å¯ä»¥ä¸éœ€è¦é…ç½®methodå±æ€§)ï¼š è®¾ç½®Struts2æ˜¯å¦æ”¯æŒåŠ¨æ€æ–¹æ³•è°ƒç”¨,å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œè¦åŠ ä¸Šå»,è¦ä¸ç„¶ä¼šæŠ¥é”™è¯¯,å¦‚æœä½ åŠ ä¸Šè¿™ä¸€è¡Œ,ä½†æ˜¯ä½ æŠŠvalueå€¼æ”¹æˆfalse,ä¹Ÿä¼šæŠ¥é”™ï¼   8ã€ä½¿ç”¨é€šé…ç¬¦å®šä¹‰action ã€€å…¶ä¸­*åŒ¹é…æ‰€æœ‰,åœ¨method=\u0026quot;{æ•°å­—}\u0026ldquo;ä¸­ç”¨{æ•°å­—}è¡¨ç¤ºåŒ¹é…ç¬¬å‡ ä¸ª*,å…¶ä¸­è·³è½¬é¡µé¢çš„å‘½åä¹Ÿæ˜¯æ ¹æ®ç¬¬ä¸€ä¸ª*çš„å€¼è¿›è¡Œçš„. 9ã€è¯·æ±‚å‚æ•°çš„æ¥æ”¶ ã€€åœ¨Actionä¸­å¿…é¡»å­˜åœ¨è¯¥å±æ€§å¹¶ä¸”å­˜åœ¨è¯¥å±æ€§çš„setæ–¹æ³•,è¿™æ ·åœ¨urlä¸­èµ‹å€¼æ‰èƒ½æ¥æ”¶åˆ°getæ–¹æ³•ç›´æ¥åœ¨urlåé¢åŠ å…¥â€œ?å±æ€§å=å±æ€§å€¼\u0026amp;å±æ€§å=å±æ€§å€¼â€\n9.1ã€åŸºæœ¬ç±»å‹ 9.2ã€å¤åˆç±»å‹ ï¼ˆä¸ºäº†å‡å°‘å¤æ‚åº¦,å°½é‡ç”¨å¤åˆç±»å‹ï¼‰ åŸç†ï¼šStruts2é¦–å…ˆé€šè¿‡åå°„æŠ€æœ¯è°ƒç”¨Personçš„é»˜è®¤æ„é€ å™¨åˆ›å»ºproductå¯¹è±¡,ç„¶åå†é€šè¿‡åå°„æŠ€æœ¯è°ƒç”¨productä¸­ä¸è¯·æ±‚å‚æ•°åŒåçš„å±æ€§çš„setteræ–¹æ³•æ¥è·å–è¯·æ±‚å‚æ•°çš„å€¼.\n10ã€å…³äºStruts2.1.6æ¥æ”¶ä¸­æ–‡è¯·æ±‚å‚æ•°ä¹±ç é—®é¢˜ ã€€Struts2.1.6ç‰ˆæœ¬ä¸­å­˜åœ¨ä¸€ä¸ªBug,å³æ¥æ”¶åˆ°çš„ä¸­æ–‡è¯·æ±‚å‚æ•°ä¸ºä¹±ç ï¼ˆä»¥postæ–¹æ³•æäº¤ï¼‰,åŸå› æ˜¯struts2.1.6åœ¨è·å–å¹¶ä½¿ç”¨äº†è¯·æ±‚å‚æ•°åæ‰è°ƒç”¨HttpServletRequestçš„setCharacterEncoding()æ–¹æ³•è¿›è¡Œç¼–ç è®¾ç½®,å¯¼è‡´åº”ç”¨ä½¿ç”¨çš„å°±æ˜¯ä¹±ç è¯·æ±‚å‚æ•°.\nè§£å†³æ–¹æ³•ï¼šæ–°å»ºä¸€ä¸ªFilter,æŠŠè¿™ä¸ªFilteræ”¾ç½®åœ¨Struts2çš„Filterä¹‹å‰,ç„¶ååœ¨doFilter()æ–¹æ³•é‡Œæ·»åŠ ä¸€ä¸‹ä»£ç ï¼š\npublic void doFilter(â€¦){ HttpServletRequest req = (HttpServletRequest)request; req.setCharacterEncoding(\u0026quot;UTF-8\u0026quot;); filterchain.doFilter(request,response); }  11ã€è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨ 11.1ã€å±€éƒ¨ç±»å‹è½¬æ¢å™¨ï¼š  é¦–å…ˆéœ€è¦å®šä¹‰ç±»å¹¶ç»§æ‰¿DefaultTypeConverterç±»; åœ¨Actionç±»æ‰€åœ¨çš„åŒ…ä¸‹æ”¾ç½®ActionClassName-conversion.propertiesæ–‡ä»¶ï¼›å…¶ä¸­ActionClassNameæ˜¯Actionçš„ç±»å,åé¢çš„-conversion.propertiesæ˜¯å›ºå®šå†™æ³•; åœ¨.propertiesæ–‡ä»¶ä¸­å†…å®¹ä¸ºï¼šå±æ€§åç§°=ç±»å‹è½¬æ¢å™¨çš„å…¨ç±»å. ä»¥å‡ºç”Ÿå¹´æœˆä¸ºä¾‹ï¼š   11.2ã€å…¨å±€ç±»å‹è½¬æ¢å™¨ï¼š åœ¨src(æ ¹ç›®å½•)ä¸‹æ”¾ç½®xwork-conversion.properties. æ–‡ä»¶ä¸­çš„å†…å®¹ä¸ºï¼š å¸¦è½¬æ¢çš„ç±»å‹=ç±»å‹è½¬æ¢å™¨çš„å…¨ç±»å ä¾‹å¦‚ï¼šjava.util.Date=com.haibao.â€¦ 11.3ã€è®¿é—®æˆ–æ·»åŠ å±æ€§ ä»…ä»…æ˜¯ä¸ºäº†è®¿é—®æ·»åŠ ï¼š\npublic String scope() throws Exception{//æ–¹æ³• ActionContext ctx = ActionContext.getContext(); ctx.getApplication().put(\u0026quot;app\u0026quot;,\u0026quot;åº”ç”¨èŒƒå›´\u0026quot;);//å¾€ServletContexté‡Œæ”¾å…¥app ctx.getSession().put(\u0026quot;ses\u0026quot;,\u0026quot;sessionèŒƒå›´\u0026quot;)ï¼›//å¾€ServletContexté‡Œæ”¾å…¥ses ctx.put(\u0026quot;req\u0026quot;,\u0026quot;requestèŒƒå›´\u0026quot;)ï¼›//å¾€ServletContexté‡Œæ”¾å…¥req return \u0026quot;scope\u0026quot;;// }  JSPä¸­ï¼š\n\u0026lt;body\u0026gt; ${applicationScope.app}\u0026lt;br\u0026gt; ${sessionScope.ses}\u0026lt;br\u0026gt; ${requestScope.ses}\u0026lt;br\u0026gt; \u0026lt;body\u0026gt;  è¦æ˜¯æƒ³å¾—åˆ°å¯¹è±¡ï¼š\n// æ–¹æ³•ä¸€ï¼šé€šè¿‡ServletActionContextç±»ç›´æ¥å®ç° public String rsa() throws Exception{//æ–¹æ³• HttpServletRequest request = ServletActionContext.getRequest(); ServletContext servletContext = ServletActionContext.getServletContest(); request.setAttribute(\u0026quot;req\u0026quot;,\u0026quot;åº”ç”¨èŒƒå›´\u0026quot;); request.getSession().setAttribute(\u0026quot;ses\u0026quot;,\u0026quot;sessionèŒƒå›´\u0026quot;)ï¼› servletContext.setAttribute(\u0026quot;app\u0026quot;,\u0026quot;åº”ç”¨èŒƒå›´\u0026quot;); return \u0026quot;scope\u0026quot;;// } // æ–¹æ³•äºŒï¼šé€šè¿‡æŒ‡å®šæ¥å£,æœ‰Strutsæ¡†æ¶è¿è¡Œæ—¶æ³¨å…¥ public class HelloWorldAction implements ServletRequestAware, ServletResponseAware,ServletContextAware{ private HttpServletRequest requesr; private ServletContextResponse Context; private HttpServletResponse response; public void setServletRequest(HttoServletRequest req){ this.request = req; } public void setServletResponse(){ } public void setServletContext(){ }  12ã€æ–‡ä»¶ä¸Šä¼  12.1ã€å•æ–‡ä»¶ä¸Šä¼  æ­¥éª¤\n ç¬¬ä¸€æ­¥ï¼šåœ¨WEB-INF/libä¸‹åŠ å…¥commons-fileupload-1.2.1.jarï¼ˆ2.1ç‰ˆæœ¬ä¹‹åå¿…é¡»æ·»åŠ ï¼‰ã€commons-io.jarï¼ˆéœ€è¦ç”¨åˆ°é‡Œé¢çš„å·¥å…·ç±»ï¼‰ ç¬¬äºŒæ­¥ï¼šæŠŠformè¡¨çš„enctypeè®¾ç½®ä¸ºï¼šâ€œmultipart/form-dataâ€  \u0026lt;form action=\u0026quot;${pageContext.request.contextPath}/uploadAction_execute.action\u0026quot; enctype=\u0026quot;multipart/form-data\u0026quot; method=\u0026quot;post\u0026quot;\u0026gt; æ–‡ä»¶ï¼š\u0026lt;input type=\u0026quot;file\u0026quot; name=\u0026quot;image\u0026quot;\u0026gt; \u0026lt;input type=\u0026quot;submit\u0026quot; value=\u0026quot;ä¸Šä¼ \u0026quot;\u0026gt; \u0026lt;/form\u0026gt;  ç¬¬ä¸‰æ­¥ï¼šåœ¨Actionç±»ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§  public class UploadAction { private File image;// æ–‡ä»¶åç§° // å¦‚æœæƒ³å¾—åˆ°ä¸Šä¼ æ–‡ä»¶çš„åç§°,åˆ™å®šä¹‰æ–‡ä»¶å. æ ¼å¼ï¼šæ–‡ä»¶åç§°+FileName private String imageFileName;// å¾—åˆ°ä¸Šä¼ æ–‡ä»¶åç§° // å¦‚æœæƒ³å¾—åˆ°æ–‡ä»¶çš„ç±»å‹,åˆ™å®šä¹‰æ–‡ä»¶å. æ ¼å¼ï¼šæ–‡ä»¶åç§°+ContextType private String imageContextType; public String getImageFileName() { return imageFileName; } public void setImageFileName(String imageFileName) { this.imageFileName = imageFileName; } // æä¾›ä¸å­—æ®µåç§°ç›¸ç¬¦çš„getã€setå±æ€§,ä»¥ä¾¿å¾—åˆ°ä¸Šä¼ çš„æ–‡ä»¶ public File getImage() { return image; } public void setImage(File image) { this.image = image; } public String execute() throws Exception { // åœ¨è¯¥æ–¹æ³•ä¸‹è¿›è¡Œä¿å­˜ String realPath = ServletActionContext.getServletContext().getRealPath( \u0026quot;/images\u0026quot;);// å¾—åˆ°æ ¹ç›®å½• System.out.println(\u0026quot;*****\u0026quot; + realPath + \u0026quot;****\u0026quot;); if (image != null) { File savefile = new File(new File(realPath), imageFileName);// ä¿å­˜åˆ°... if (!savefile.getParentFile().exists()) savefile.getParentFile().mkdirs(); FileUtils.copyFile(image, savefile);// è°ƒç”¨commons-io.jarä¸‹çš„å·¥å…·ç±»Copyæ–‡ä»¶åˆ°æŒ‡å®šä½ç½® ActionContext.getContext().put(\u0026quot;message\u0026quot;, \u0026quot;ä¸Šä¼ æˆåŠŸ\u0026quot;);// è¿”å›ä¿¡æ¯ } return \u0026quot;success\u0026quot;; } }  12.2ã€å¤šæ–‡ä»¶ä¸Šä¼  ã€€åªéœ€è¦å°†å•æ–‡ä»¶ä¸Šä¼ çš„ç¬¬ä¸‰æ­¥ï¼šåœ¨Actionç±»ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§ä¸­æŠŠå•ä¸ªæ–‡ä»¶å˜æˆæ•°ç»„.\npublic class moreUploadAction { private File[] image;// æ–‡ä»¶åç§° // å¦‚æœæƒ³å¾—åˆ°ä¸Šä¼ æ–‡ä»¶çš„åç§°,åˆ™å®šä¹‰æ–‡ä»¶å. æ ¼å¼ï¼šæ–‡ä»¶åç§°+FileName private String[] imageFileName;// å¾—åˆ°ä¸Šä¼ æ–‡ä»¶åç§° // å¦‚æœæƒ³å¾—åˆ°æ–‡ä»¶çš„ç±»å‹,åˆ™å®šä¹‰æ–‡ä»¶å. æ ¼å¼ï¼šæ–‡ä»¶åç§°+ContextType private String[] imageContextType; public File[] getImage() { return image; } public void setImage(File[] image) { this.image = image; } public String[] getImageFileName() { return imageFileName; } public void setImageFileName(String[] imageFileName) { this.imageFileName = imageFileName; } public String[] getImageContextType() { return imageContextType; } public void setImageContextType(String[] imageContextType) { this.imageContextType = imageContextType; } public String execute() throws Exception { // åœ¨è¯¥æ–¹æ³•ä¸‹è¿›è¡Œä¿å­˜ String realPath = ServletActionContext.getServletContext().getRealPath( \u0026quot;/images\u0026quot;);// å¾—åˆ°æ ¹ç›®å½• System.out.println(\u0026quot;*****\u0026quot; + realPath + \u0026quot;****\u0026quot;); if (image != null) { File savedir = new File(realPath); if (!savedir.exists()) savedir.mkdirs(); for (int i = 0; i \u0026lt; image.length; i++) { File savefile = new File(savedir, imageFileName[i]);// ä¿å­˜åˆ°... FileUtils.copyFile(image[i], savefile);// è°ƒç”¨commons-io.jarä¸‹çš„å·¥å…·ç±»Copyæ–‡ä»¶åˆ°æŒ‡å®šä½ç½® } ActionContext.getContext().put(\u0026quot;message\u0026quot;, \u0026quot;ä¸Šä¼ æˆåŠŸ\u0026quot;);// è¿”å›ä¿¡æ¯ } return \u0026quot;success\u0026quot;; } }  13ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨ éœ€æ±‚ï¼šå¯¹äºç™»é™†çš„ç”¨æˆ·å¯ä»¥è®¿é—®Actionä¸­çš„æ‰€æœ‰æ–¹æ³•,è€Œæ²¡æœ‰ç™»å½•çš„ç”¨æˆ·åˆ™ä¸å¯ä»¥è®¿é—®ä»»ä½•æ–¹æ³•.\næ–¹æ³•ï¼šæ·»åŠ è‡ªå®šä¹‰æ‹¦æˆªå™¨. å®ç°com.opensymphony.xwork2.interceptor.interceptoræ¥å£\n@Override public String intercept(ActionInvocation arg0) throws Exception { // å½“æ‹¦æˆªåˆ°Actionæ—¶æ‰§è¡Œè¯¥æ–¹æ³• // å¾—åˆ°sessionä¸­å­˜åœ¨çš„å¯¹è±¡ Object user = ActionContext.getContext() .getSession().get(\u0026quot;user\u0026quot;); // å¦‚æœå¸Œæœ›è¢«æ‹¦æˆªçš„çš„æ–¹æ³•æ‰§è¡Œ,è°ƒç”¨arg0.invoke(); if (user != null) return arg0.invoke();//å¦‚æœUserä¸ä¸ºnull,ä»£è¡¨åˆæ³•ç”¨æˆ·,å…è®¸è®¿é—®æ–¹æ³• // è¿”å›çš„æ˜¯Actionä¸­å¯¹åº”æ–¹æ³•çš„è¿”å›å€¼String ActionContext.getContext().put(\u0026quot;message\u0026quot;, \u0026quot;è¯·å…ˆç™»å½•\u0026quot;); return \u0026quot;success\u0026quot;; }  åœ¨struts.xmlä¸­å®šä¹‰æ‹¦æˆªå™¨\n\u0026lt;!-- å®šä¹‰æ‹¦æˆªå™¨ --\u0026gt; \u0026lt;interceptors\u0026gt; \u0026lt;!-- è‡ªå®šä¹‰æ‹¦æˆªå™¨ --\u0026gt; \u0026lt;interceptor name=\u0026quot;permission\u0026quot; class=\u0026quot;com.haibao.interceptor.PermissionInterceptor\u0026quot; /\u0026gt; \u0026lt;!-- å®šä¹‰æ‹¦æˆªå™¨æ ˆ ç›®çš„ï¼šä½¿å¾—Struts2è‡ªå¸¦çš„æ‹¦æˆªå™¨æœ‰æ•ˆ --\u0026gt; \u0026lt;interceptor-stack name=\u0026quot;permissionStack\u0026quot;\u0026gt; \u0026lt;interceptor-ref name=\u0026quot;defaultStack\u0026quot;/\u0026gt; \u0026lt;interceptor-ref name=\u0026quot;permission\u0026quot;/\u0026gt; \u0026lt;/interceptor-stack\u0026gt; \u0026lt;/interceptors\u0026gt; \u0026lt;action name=\u0026quot;loginAction_*\u0026quot; class=\u0026quot;com.haibao.action.LoginAction\u0026quot;\tmethod=\u0026quot;{1}\u0026quot;\u0026gt; \u0026lt;result name=\u0026quot;success\u0026quot;\u0026gt;/WEB-INF/page/LoginPage.jsp\u0026lt;/result\u0026gt; \u0026lt;interceptor-ref name=\u0026quot;permissionStack\u0026quot;/\u0026gt; \u0026lt;/action\u0026gt;  æ³¨æ„ï¼š å¦‚æœç›´æ¥åœ¨actionä¸­å®šä¹‰ä½¿ç”¨æ‹¦æˆªå™¨,åˆ™ä¸ä¼šåœ¨ä½¿ç”¨Strutsè‡ªå¸¦æ‹¦æˆªå™¨ï¼è¿™æ ·Struts2çš„ä¼˜åŠ¿å°±æ²¡æœ‰äº†ï¼Œæ‰€ä»¥å¼•å…¥æ‹¦æˆªå™¨æ ˆçš„æ¦‚å¿µï¼Œåœ¨æ‹¦æˆªå™¨æ ˆä¸­è¦æŠŠStrutsçš„æ‹¦æˆªå™¨å†™åœ¨å‰é¢ï¼Œä»¥ä¿è¯webé¡¹ç›®ä¼šé¦–å…ˆæ‰§è¡ŒStrutså†å¸¦çš„æ‹¦æˆªå™¨. å¦‚æœæƒ³æ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯ç”¨è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\n\u0026lt;default-interceptor-ref name=\u0026quot;permissionStack\u0026quot;/\u0026gt;  æ•ˆæœæ¼”ç¤ºï¼š\nç›´æ¥è®¿é—®ä¼šè¢«æ‹¦æˆªï¼š ç™»å½•åè®¿é—® 14ã€è¾“å…¥æ ¡éªŒ ã€€Struts2ä¸­å¯ä»¥å®ç°å¯¹actionçš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œæ ¡éªŒæˆ–è€…å¯¹actionçš„æŒ‡å®šæ–¹æ³•è¿›é¡¹æ ¡éªŒï¼Œå®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼š\n é‡‡ç”¨æ‰‹å·¥ç¼–å†™ä»£ç å®ç°   å¯¹æ‰€æœ‰æ–¹æ³•è¿›è¡Œæ ¡éªŒ é‡å†™validate()æ–¹æ³•å®ç°ï¼Œvalidate()æ–¹æ³•ä¼šæ ¡éªŒactionä¸­æ‰€æœ‰çš„ä¸executeæ–¹æ³•ç­¾åç›¸åŒçš„æ–¹æ³•. å½“æŸä¸ªæ•°æ®æ ¡éªŒå¤±è´¥æ—¶ï¼Œè°ƒç”¨addFieldError()æ–¹æ³•å¾€ç³»ç»Ÿçš„fieldErrorsæ·»åŠ æ ¡éªŒå¤±è´¥ä¿¡æ¯ï¼Œï¼ˆä¸ºäº†ä½¿ç”¨addFieldError()æ–¹æ³•ï¼Œactionå¯ä»¥ç»§æ‰¿ActionSupportï¼‰ï¼Œå¦‚æœç³»ç»Ÿçš„fieldErroråŒ…å«å¤±è´¥ä¿¡æ¯ï¼Œstruts2ä¼šå°†è¯·æ±‚è½¬å‘åˆ°åä¸ºinputçš„result. åœ¨inputè§†å›¾ä¸­å¯ä»¥é€šè¿‡\u0026lt;s:fielderror/\u0026gt;æ˜¾ç¤ºå¤±è´¥ä¿¡æ¯. éœ€è¦å¼•å…¥æ ‡ç­¾  \u0026lt;%@ taglab url=\u0026quot;/struts-tags\u0026quot; prefix=\u0026quot;s\u0026quot;%\u0026gt;  public void validate(){ if(this.mobile==null||\u0026quot;\u0026quot;.equals(this.mobile.trim())){ this.addFieldError(\u0026quot;username\u0026quot;,\u0026quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º\u0026quot;); } if(this.mobile==null||\u0026quot;\u0026quot;.equals(this.mobile.trim())){ this.addFieldError(\u0026quot;mobile\u0026quot;,\u0026quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º\u0026quot;); }else{ if(!Pattern.compile(\u0026quot;^1[358]\\\\d{9}\u0026quot;).matcher(this.mobile.trim()).matches()){ this.addFieldError(\u0026quot;mobile\u0026quot;,\u0026quot;æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®\u0026quot;); } }\t}   å¯¹æŒ‡å®šæ–¹æ³•è¿›è¡Œæ ¡éªŒ  ã€€é‡å†™validateXxx()æ–¹æ³•å®ç°ï¼Œvalidate()æ–¹æ³•ä¼šæ ¡éªŒactionä¸­æ‰€æœ‰çš„ä¸executeæ–¹æ³•ç­¾åç›¸åŒçš„æ–¹æ³•. å½“æŸä¸ªæ•°æ®æ ¡éªŒå¤±è´¥æ—¶ï¼Œè°ƒç”¨addFieldError()æ–¹æ³•å¾€ç³»ç»Ÿçš„fieldErrorsæ·»åŠ æ ¡éªŒå¤±è´¥ä¿¡æ¯ï¼Œï¼ˆä¸ºäº†ä½¿ç”¨addFieldError()æ–¹æ³•ï¼Œactionå¯ä»¥ç»§æ‰¿ActionSupportï¼‰ï¼Œå¦‚æœç³»ç»Ÿçš„fieldErroråŒ…å«å¤±è´¥ä¿¡æ¯ï¼Œstruts2ä¼šå°†è¯·æ±‚è½¬å‘åˆ°åä¸ºinputçš„result. åœ¨inputè§†å›¾ä¸­å¯ä»¥é€šè¿‡\u0026lt;s:fielderror/\u0026gt;æ˜¾ç¤ºå¤±è´¥ä¿¡æ¯. éœ€è¦å¼•å…¥æ ‡ç­¾\n\u0026lt;%@ taglab url=\u0026quot;/struts-tags\u0026quot; prefix=\u0026quot;s\u0026quot;%\u0026gt;  public void validateUpdata(){ if(this.mobile==null||\u0026quot;\u0026quot;.equals(this.mobile.trim())){ this.addFieldError(\u0026quot;username\u0026quot;,\u0026quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º\u0026quot;); } if(this.mobile==null||\u0026quot;\u0026quot;.equals(this.mobile.trim())){ this.addFieldError(\u0026quot;mobile\u0026quot;,\u0026quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º\u0026quot;); }else{ if(!Patten.compile(\u0026quot;^1[358]\\\\d{9}\u0026quot;).matcher(this.mobile.trim()).matches()){ this.addFieldError(\u0026quot;mobile\u0026quot;,\u0026quot;æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®\u0026quot;); } } }   è¾“å…¥æ ¡éªŒçš„æµç¨‹  ç±»å‹è½¬æ¢å™¨é˜Ÿè¯·æ±‚å‚æ•°æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œå¹¶æŠŠè½¬æ¢åçš„èµ‹å€¼ç»™actionä¸­çš„å±æ€§. å¦‚æœåœ¨æ‰§è¡Œç±»å‹è½¬æ¢çš„è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œç³»ç»Ÿä¼šå°†å¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°ActionContextï¼ŒconversionErroræ‹¦æˆªå™¨å°†å¼‚å¸¸ä¿¡æ¯å°è£…åˆ°fieldErrorsé‡Œ. ä¸ç®¡ç±»å‹è½¬æ¢æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šè¿›å…¥ç¬¬3æ­¥. ç³»ç»Ÿé€šè¿‡åå°„æŠ€æœ¯å…ˆè°ƒç”¨actionä¸­çš„validateXxx()æ–¹æ³•ï¼ŒXxxä¸ºæ–¹æ³•å. åœ¨è°ƒç”¨actionä¸­çš„validate()æ–¹æ³•. ç»è¿‡ä¸Šé¢4æ­¥ï¼Œå¦‚æœç³»ç»Ÿä¸­çš„fieldErrorså­˜åœ¨é”™è¯¯ä¿¡æ¯ï¼ˆå³å­˜æ”¾é”™è¯¯ä¿¡æ¯çš„é›†åˆçš„size\u0026gt;0ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨å°†è¯·æ±‚è½¬å‘è‡³åç§°ä¸ºinputè§†å›¾. å¦‚æœç³»ç»Ÿä¸­çš„fieldErrorsæ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œç³»ç»Ÿå°†æ‰§è¡Œactionä¸­çš„å¤„ç†æ–¹æ³•.    åŸºäºXMLé…ç½®æ–¹å¼å®ç°  ã€€a) å¯¹æ‰€æœ‰æ–¹æ³•è¿›è¡Œæ ¡éªŒ\nã€€åœ¨Actionç›¸åŒåŒ…ä¸‹åˆ›å»ºActionClassName-validation.xmlæ–‡ä»¶. Struts2 çš„éªŒè¯è§„åˆ™å¤§æ¦‚æœ‰ä»¥ä¸‹æ•°ç§ï¼š\n required:å¿…å¡«æ ¡éªŒå™¨ï¼Œè¦æ±‚fieldçš„å€¼ä¸èƒ½ä¸ºnull requiredstring:å¿…å¡«å­—ç¬¦ä¸²æ ¡éªŒå™¨ï¼Œè¦æ±‚fieldçš„å€¼ä¸èƒ½ä¸ºnull,å¹¶ä¸”é•¿åº¦å¤§äº0ï¼Œé»˜ è®¤æƒ…å†µä¸‹ä¼šå¯¹å­—ç¬¦ä¸²å»æ‰å‰åç©ºæ ¼ int:æ•´æ•°æ ¡éªŒå™¨ï¼Œè¦æ±‚fieldçš„å€¼å¿…é¡»åœ¨æ•´æ•°èŒƒå›´å†…ï¼ŒminæŒ‡å®šæœ€å°å€¼ï¼ŒmaxæŒ‡å®šæœ€å¤§å€¼ double:åŒç²¾åº¦æµ®ç‚¹æ•°æ ¡éªŒå™¨ date:æ—¥æœŸæ ¡éªŒå™¨ expression:è¡¨è¾¾å¼æ ¡éªŒå™¨ fieldexpression:å­—æ®µè¡¨è¾¾å¼æ ¡éªŒå™¨ email:ç”µå­é‚®ä»¶æ ¡éªŒå™¨ï¼Œè¦æ±‚å¦‚æœfieldçš„å€¼éç©ºï¼Œåˆ™å¿…é¡»æ˜¯åˆæ³•çš„é‚®ä»¶åœ°å€ url:ç½‘å€æ ¡éªŒå™¨ï¼Œè¦æ±‚å¦‚æœfieldçš„å€¼éç©ºï¼Œåˆ™å¿…é¡»æ˜¯åˆæ³•çš„urlåœ°å€ visitor:Visitoræ ¡éªŒå™¨ï¼Œç”¨äºæ ¡éªŒactionçš„å¤åˆå±æ€§ï¼Œå®ƒæŒ‡å®šä¸€ä¸ªæ ¡éªŒæ–‡ä»¶ç”¨äºæ ¡éªŒå¤åˆå±æ€§ä¸­çš„å±æ€§ conversion:è½¬æ¢æ ¡éªŒå™¨ stringlength:å­—ç¬¦ä¸²é•¿åº¦æ ¡éªŒå™¨ regex:æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒå™¨  å¸¸ç”¨çš„éªŒè¯è§„åˆ™ï¼š  å¿…å¡«æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;username\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;message\u0026gt;æŒ‡å®šæ£€éªŒå¤±è´¥çš„æç¤ºä¿¡æ¯\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  å¿…å¡«å­—ç¬¦ä¸²æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;username\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;requiredstring\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;trim\u0026quot;\u0026gt;true\u0026lt;/param\u0026gt; \u0026lt;message\u0026gt;æŒ‡å®šæ£€éªŒå¤±è´¥çš„æç¤ºä¿¡æ¯\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  æ•´æ•°æ£€éªŒå™¨/æµ®ç‚¹æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;age\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;int\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;min\u0026quot;\u0026gt;1\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026quot;max\u0026quot;\u0026gt;150\u0026lt;/param\u0026gt; \u0026lt;message\u0026gt;å¹´çºªå¿…é¡»åœ¨1åˆ°150ä¹‹é—´\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  æ—¥æœŸæ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;birth\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;date\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;min\u0026quot;\u0026gt;1900-01-01\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026quot;max\u0026quot;\u0026gt;2050-02-21\u0026lt;/param\u0026gt; \u0026lt;message key=\u0026quot;birth.range\u0026quot;/\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  å­—æ®µè¡¨è¾¾å¼æ£€éªŒå™¨(è¦æ±‚æŒ‡å®šå­—æ®µæ»¡è¶³ä¸€ä¸ªé€»è¾‘è¡¨è¾¾å¼)  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;re_pass\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;fieldexpression\u0026quot;\u0026gt; \u0026lt;!--æŒ‡å®šé€»è¾‘è¡¨è¾¾å¼ --\u0026gt; \u0026lt;param name=\u0026quot;expression\u0026quot;\u0026gt; (pass eq re_pass)\u0026lt;/param\u0026gt; \u0026lt;message\u0026gt;å¯†ç å¿…é¡»å’Œç¡®è®¤å¯†ç ç›¸ç­‰\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  é‚®ä»¶åœ°å€æ ¡éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;email\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;email\u0026quot;\u0026gt; \u0026lt;message\u0026gt;ä½ çš„ç”µå­é‚®ä»¶åœ°å€å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç”µé‚®åœ°å€\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  ç½‘å€æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;url\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;url\u0026quot;\u0026gt; \u0026lt;message\u0026gt;ä½ çš„ä¸»é¡µåœ°å€å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç½‘å€\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  å­—ç¬¦ä¸²é•¿åº¦æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;user\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;stringlength\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;minlength\u0026quot;\u0026gt;4\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026quot;maxlength\u0026quot;\u0026gt;20\u0026lt;/param\u0026gt; \u0026lt;message\u0026gt;ä½ çš„ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨4åˆ°20ä¹‹é—´\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators\u0026gt;  æ­£åˆ™è¡¨è¾¾å¼æ£€éªŒ  \u0026lt;validators\u0026gt; \u0026lt;field name=\u0026quot;user\u0026quot;\u0026gt; \u0026lt;field-validator type=\u0026quot;regex\u0026quot;\u0026gt; \u0026lt;param name=\u0026quot;regex\u0026quot;\u0026gt;\u0026lt;![CDATA[(\\w{4,25})]]\u0026gt;\u0026lt;/param\u0026gt; \u0026lt;message\u0026gt;æ‚¨è¾“å…¥çš„ç”¨æˆ·ååªèƒ½æ˜¯å­—æ¯å’Œæ•°ç»„ï¼Œä¸”é•¿åº¦å¿…é¡»åœ¨4åˆ°25ä¹‹é—´\u0026lt;/message\u0026gt; \u0026lt;/field-validator\u0026gt; \u0026lt;/field\u0026gt; \u0026lt;/validators  ã€€b) å¯¹æŒ‡å®šæ–¹æ³•è¿›è¡Œæ ¡éªŒ\nã€€å–åæ›´æ”¹ä¸ºActionClassName-ActionName-validation.xml\næ³¨æ„\n å½“actionåŒæ—¶æä¾›äº†ä¸¤ä¸ªæ ¡éªŒæ–¹æ³•ï¼Œåˆ™æŒ‰ç…§â€œæ‰€æœ‰æ–¹æ³•â€ï¼Œâ€œæŒ‡å®šæ–¹æ³•â€çš„é¡ºåºæ±‡æ€»åæ‰§è¡Œï¼›å¦‚æœåé¢çš„æ–‡ä»¶åŒ…å«å‰é¢æ–‡ä»¶çš„æ–¹æ³•å‘ç”Ÿå†²çªï¼Œåˆ™åªæ˜¯ç”¨åé¢æ–‡ä»¶ä¸­çš„æ ¡éªŒè§„åˆ™. å½“actionç»§æ‰¿äº†å¦å¤–ä¸€ä¸ªactionï¼Œçˆ¶ç±»actionçš„æ ¡éªŒæ–‡ä»¶ä¼šå…ˆè¢«æœç´¢åˆ°.  15ã€å›½é™…åŒ– å‡†å¤‡èµ„æºæ–‡ä»¶ï¼Œèµ„æºæ–‡ä»¶çš„å‘½åæ ¼å¼å¦‚ä¸‹ï¼š\nbaseName_language_country.propeties baseName_language.propeties baseName.propeties  å…¶ä¸­baseNameæ˜¯èµ„æºæ–‡ä»¶çš„åŸºæœ¬åï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†languageå’Œcountryå¿…é¡»æ˜¯javaæ”¯æŒçš„è¯­è¨€å’Œå›½å®¶.\n ä¸­å›½ï¼šbaseName_zh_CN.properties ç¾å›½ï¼šbaseName_en_US.properties  å¦‚æœæ²¡æœ‰ä½¿ç”¨å¼€å‘å·¥å…·ï¼Œå¯¹äºä¸­æ–‡çš„å±æ€§æ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨JDKæä¾›çš„native2asciiå‘½ä»¤æŠŠæ–‡ä»¶è½¬æ¢ä¸ºUnicodeç¼–ç çš„æ–‡ä»¶. å‘½ä»¤ä½¿ç”¨å¦‚ä¸‹ï¼š native2ascii æºæ–‡ä»¶.properties ç›®æ ‡æ–‡ä»¶.properties\n15.1ã€é…ç½®å…¨å±€èµ„æºä¸è¾“å‡ºå›½é™…åŒ–ä¿¡æ¯ å½“å‡†å¤‡å¥½èµ„æºæ–‡ä»¶ä¹‹åï¼Œå¯ä»¥åœ¨struts.xmlä¸­é€šè¿‡struts.custom.i18n.resourceså¸¸é‡æŠŠèµ„æºæ–‡ä»¶å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼š\n\u0026lt;constant name=\u0026quot;struts.custom.i18n.resources\u0026quot; value=\u0026quot;baseName\u0026quot;/ \u0026gt;  å…¶ä¸­baseNameä¸ºèµ„æºçš„åŸºæœ¬å. ä¹‹åå°±å¯ä»¥åœ¨é¡µé¢æˆ–è€…actionä¸­è®¿é—®å›½é™…åŒ–ä¿¡æ¯ï¼š\n åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨\u0026lt;s:text name=\u0026quot;\u0026quot;/\u0026gt;æ ‡ç­¾è¾“å‡ºå›½é™…åŒ–ä¿¡æ¯ï¼›\u0026lt;s:text name=\u0026quot;user\u0026quot;/\u0026gt;,nameä¸ºèµ„æºæ–‡ä»¶ä¸­çš„Key. åœ¨Actionç±»ä¸­ï¼Œå¯ä»¥ç»§æ‰¿ActionSupportï¼Œä½¿ç”¨getText()æ–¹æ³•å¾—åˆ°å›½é™…åŒ–ä¿¡æ¯ï¼Œè¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®šèµ„æºæ–‡ä»¶ä¸­çš„Key. åœ¨è¡¨å•æ ‡ç­¾ä¸­ï¼Œé€šè¿‡Keyå±æ€§æŒ‡å®šèµ„æºæ–‡ä»¶ä¸­çš„Keyï¼Œå¦‚ï¼š  \u0026lt;s:textfield name=\u0026quot;realname\u0026quot; key=\u0026quot;use\u0026quot;/\u0026gt;  è¾“å‡ºå¸¦å ä½ç¬¦çš„å›½é™…åŒ–ä¿¡æ¯ èµ„æºæ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š welcome={0},ä½ å¥½{1}\n15.2ã€JSPé¡µé¢ä¸­è¾“å‡ºå ä½ç¬¦çš„å›½é™…åŒ–ä¿¡æ¯ \u0026lt;s:text name=\u0026quot;welcome\u0026quot;\u0026gt; \u0026lt;s:param\u0026gt;ç†Šå¤§\u0026lt;/s:param\u0026gt; \u0026lt;s:param\u0026gt;å­¦ä¹ \u0026lt;/s:param\u0026gt; \u0026lt;s:text/\u0026gt;  ã€€åœ¨Actionç±»ä¸­è·å–å¸¦å ä½ç¬¦çš„å›½é™…åŒ–ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨getText(String Keyï¼ŒString[] args)æˆ–è€…getText(String Keyï¼ŒList args)æ–¹æ³•\n15.3ã€åŒ…èŒƒå›´èµ„æºæ–‡ä»¶ ã€€åœ¨ä¸€ä¸ªå¤§å‹åº”ç”¨ä¸­ï¼Œæ•´ä¸ªåº”ç”¨æœ‰å¤§é‡çš„å†…å®¹éœ€è¦å®ç°å›½é™…åŒ–ï¼Œå¦‚æœæŠŠå›½é™…åŒ–çš„å†…å®¹æ”¾ç½®åœ¨å…¨å±€èµ„æºå±æ€§æ–‡ä»¶ä¸­ï¼Œæ˜¾ç„¶ä¼šå¯¼è‡´èµ„æºæ–‡ä»¶å˜çš„åºå¤§ã€è‡ƒè‚¿ã€ä¸ä¾¿äºç»´æŠ¤ï¼Œæ”¯ä¸ªæ—¶å€™å¯ä»¥é’ˆå¯¹ä¸åŒæœ«ç­ï¼Œä½¿ç”¨åŒ…èŒƒå›´æ¥ç»„ç»‡å›½é™…åŒ–æ–‡ä»¶.\næ–¹æ³•ï¼šåœ¨javaçš„åŒ…ä¸‹æ”¾ç½®package_language_country.propertiesèµ„æºæ–‡ä»¶ï¼Œpackageä¸ºå›ºå®šå†™æ³•ï¼Œå¤„äºè¯¥åŒ…åŠå­åŒ…ä¸‹çš„actionéƒ½å¯ä»¥è®¿é—®è¯¥èµ„æºï¼Œå½“æŸ¥åˆ°æŒ‡å®šKeyçš„æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆä»packageèµ„æºæ–‡ä»¶æŸ¥æ‰¾ï¼Œå½“ä¸å­˜åœ¨å¯¹åº”çš„Keyæ—¶ï¼Œæ‰ä¼šä»å¸¸é‡struts.custom.i18n.resourcesæŒ‡å®šçš„èµ„æºæ–‡ä»¶ä¸­å¯»æ‰¾.\n15.4ã€ActionèŒƒå›´èµ„æºæ–‡ä»¶ ã€€åœ¨Actionç±»æ‰€åœ¨çš„è·¯å¾„ï¼Œæ”¾ç½®ActionClassName_languaage_country.propertiesèµ„æºæ–‡ä»¶ï¼ŒActionClassNameä¸ºactionç±»çš„ç®€å•åç§°ï¼›å½“æŒ‡å®škeyçš„æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆä»ActionClassName_languaage_country.propertiesèµ„æºæ–‡ä»¶ä¸­æŸ¥æ‰¾.\n15.5ã€JSPä¸­ç›´æ¥è®¿é—®æŸä¸ªèµ„æºæ–‡ä»¶ struts2æä¾›äº†\u0026lt;s:i18n\u0026gt;æ ‡ç­¾ï¼Œä½¿ç”¨\u0026lt;s:i18n\u0026gt;æ ‡ç­¾å¯ä»¥åœ¨ç±»è·¯å¾„ä¸‹ç›´æ¥ä»æŸä¸ªèµ„æºæ–‡ä»¶ä¸­è·å–å›½é™…åŒ–æ•°æ®ï¼Œæ— éœ€ä»»ä½•é…ç½®ï¼š\n\u0026lt;s:i18n name=\u0026quot;realname\u0026quot;\u0026gt; \u0026lt;s:text name=\u0026quot;realname\u0026quot;/\u0026gt; \u0026lt;s:i18n\u0026gt;  realnameä¸ºè¦è®¿é—®çš„èµ„æºæ–‡ä»¶çš„åŸºæœ¬å\nå¦‚æœè¦è®¿é—®çš„èµ„æºæ–‡ä»¶åœ¨ç±»è·¯å¾„çš„æŸä¸ªåŒ…ä¸‹ï¼Œå¯ä»¥è®¿é—®ï¼š\n\u0026lt;s:i18n name=\u0026quot;com/haibao/action/package\u0026quot;\u0026gt; \u0026lt;s:text name=\u0026quot;realname\u0026quot;\u0026gt; \u0026lt;s:param\u0026gt;ç†Šå¤§\u0026lt;/s:param\u0026gt; \u0026lt;/s:text/\u0026gt; \u0026lt;s:i18n\u0026gt;  ä¸Šé¢è®¿é—®com.haibao.actionåŒ…ä¸‹åŸºæœ¬åä¸ºpackageçš„èµ„æºæ–‡ä»¶.\n16ã€OGNLè¡¨è¾¾å¼è¯­è¨€ ã€€OGNLæ˜¯Object Graphic Navigation Languageï¼ˆå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®. Struts2æ¡†æ¶é‡‡ç”¨OGNLä½œä¸ºé»˜è®¤çš„è¡¨è¾¾å¼è¯­è¨€.\nç›¸å¯¹äºELè¡¨è¾¾å¼ï¼ŒOGNLæä¾›äº†ï¼š\n æ”¯æŒå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼šå¦‚xxx.sayHello()ï¼› æ”¯æŒç±»é™æ€æ–¹æ³•è°ƒç”¨å’Œå€¼è®¿é—®ï¼Œè¡¨è¾¾å¼çš„æ ¼å¼ä¸º@[ç±»å…¨åï¼ˆåŒ…æ‹¬è·¯å¾„ï¼‰]@[æ–¹æ³•å|å€¼å] ä¾‹å¦‚ï¼š@java.lang.String@format('foo %s'ï¼Œbar) æˆ–è€… @com.haibao.Constant@APP_NAME æ“ä½œé›†åˆå¯¹è±¡.  ã€€Ognlæœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆContextï¼‰æ¦‚å¿µï¼Œå®ƒå®ç°äº†äº†java.utils.Mapæ¥å£ï¼ŒStruts2ä¸­è¯´æ˜ï¼š\n ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰çš„å®ç°ä¸ºActionContext. å½“Struts2æ¥å—ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œä¼šè¿…é€Ÿåˆ›å»ºActionContextï¼ŒValueStackï¼Œaction. ç„¶åæŠŠactionå­˜è¿›ValueStackï¼Œæ‰€ä»¥actionçš„å®ä¾‹å˜é‡å¯ä»¥è¢«OGNLè®¿é—®. è®¿é—®ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ä¸­çš„å¯¹è±¡éœ€è¦ä½¿ç”¨#ç¬¦å·æ ‡æ³¨å‘½åç©ºé—´. å¦‚#applicationã€#session. å¦‚ï¼š#application['userName']==#application.userName//è·å¾—applicationä¸­userNameå€¼.  ï¼ˆ#sessionå¯¹è±¡ã€#requestå¯¹è±¡ã€#parameteå¯¹è±¡ã€attrå¯¹è±¡â€”æŒ‰ç…§pageâ€”requestâ€”sessionâ€”applicationé¡ºåºè®¿é—®å…¶å±æ€§ï¼‰. OGNLè®¾å®šäº†ä¸€ä¸ªè·Ÿå¯¹è±¡ï¼ˆrootï¼‰å¯¹è±¡ï¼Œåœ¨Struts2ä¸­æ ¹å¯¹è±¡å°±æ˜¯ValueStackï¼ˆå€¼æ ˆï¼‰. å¦‚æœè®¿é—®æ ¹å¯¹è±¡ä¸­çš„å±æ€§ï¼Œåˆ™å¯ä»¥çœç•¥#å‘½åç©ºé—´ï¼Œç›´æ¥è®¿é—®è¯¥å¯¹è±¡çš„å±æ€§å³å¯. å¦‚ï¼š${foo}//è·å¾—æ ˆå€¼ä¸­æŸä¸ªå¯¹è±¡çš„fooå±æ€§.  æ³¨æ„ï¼šStruts2ä¸­ï¼ŒOGNLè¡¨è¾¾å¼éœ€è¦é…åˆStrutsæ ‡ç­¾ä½¿ç”¨. å¦‚ï¼š\u0026lt;s:property value=\u0026quot;name\u0026quot;\u0026gt;ï¼›ä½¿ç”¨ELè¡¨è¾¾å¼èƒ½å¤Ÿè®¿é—®valueStackä¸­å¯¹è±¡çš„å±æ€§ï¼ŒåŸå› æ˜¯ï¼šStruts2å¯¹HTTPServletRequestä½œäº†è¿›ä¸€æ­¥çš„å°è£….\n17ã€é‡‡ç”¨OGNLè¡¨è¾¾å¼åˆ›å»ºList/Mapé›†åˆå¯¹è±¡ 17.1ã€è¯•ç”¨å¦‚ä¸‹ç›´æ¥ç”Ÿæˆä¸€ä¸ªListå¯¹è±¡ï¼š \u0026lt;s:set name=\u0026quot;list\u0026quot; value=\u0026quot;{'zhangsan','lisi','wangwu'}\u0026quot;/\u0026gt; \u0026lt;s:iterator value=\u0026quot;#list\u0026quot;\u0026gt;\u0026lt;!-- è¿­ä»£å™¨ --\u0026gt; \u0026lt;s:property/\u0026gt;\u0026lt;br\u0026gt; \u0026lt;/s:iterator\u0026gt;  Setæ ‡ç­¾ç”¨äºå°†æŸä¸ªå€¼æ”¾å…¥æŒ‡å®šèŒƒå›´\n scopeï¼šæŒ‡å®šå˜é‡è¢«æ”¾ç½®çš„èŒƒå›´ï¼Œè¯¥å±æ€§å¯ä»¥æ¥å—applicationã€sessionã€requestã€pageæˆ–action. å¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™é»˜è®¤æ”¾ç½®åœ¨OGNL Contextä¸­. valueï¼šèµ‹ç»™å˜é‡çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™å°†ValueStackæ ˆé¡¶çš„å€¼èµ‹å€¼ç»™å˜é‡.  ç”Ÿæˆä¸€ä¸ªMapå¯¹è±¡ï¼š(Key\u0026ndash;Value)\n\u0026lt;s:set name=\u0026quot;foobar\u0026quot; value=\u0026quot;#{'k1': 'value1','k2':'value2'}\u0026quot;/\u0026gt; \u0026lt;s:iterator value=\u0026quot;# foobar \u0026quot;\u0026gt;\u0026lt;!-- è¿­ä»£å™¨ --\u0026gt; \u0026lt;s:property value=\u0026quot;key\u0026quot;/\u0026gt;=\u0026lt;s:property value=\u0026quot;value\u0026quot;/\u0026gt;\u0026lt;br\u0026gt; \u0026lt;/s:iterator\u0026gt;  java è¿­ä»£æ–¹æ³•ï¼š\nfor(Map.Entry\u0026lt;String,Integer\u0026gt;entry:maps.entrySet){ System.out.println(entry.getKey()+\u0026quot;=\u0026quot;+entry.getValue()); }  18ã€é‡‡ç”¨OGNLè¡¨è¾¾å¼åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ ä½¿ç”¨inå’Œnot in inè¡¨è¾¾å¼\n\u0026lt;s:if test=\u0026quot;foor\u0026quot; in {'foo', 'bar'}\u0026gt; åœ¨ \u0026lt;/s:if\u0026gt; \u0026lt;s:else\u0026gt; ä¸åœ¨ \u0026lt;/s:else\u0026gt; not in è¡¨è¾¾å¼ \u0026lt;s:if test=\u0026quot;foor\u0026quot; not in {'foo','bar'}\u0026gt; ä¸åœ¨ \u0026lt;/s:if\u0026gt; \u0026lt;s:else\u0026gt; åœ¨ \u0026lt;/s:else\u0026gt;  é™„åŠ ï¼š é™¤äº†inå’Œnot inä¹‹å¤–OGNLè¿˜å…è®¸ä½¿ç”¨æŸä¸ªè§„åˆ™è·å¾—é›†åˆå¯¹è±¡çš„å­é›†\n ?:è·å¾—æ‰€æœ‰ç¬¦åˆé€»è¾‘çš„å…ƒç´ . ^:è·å¾—ç¬¦åˆé€»è¾‘çš„ç¬¬ä¸€ä¸ªå…ƒç´ . $:è·å¾—ç¬¦åˆé€»è¾‘çš„æœ€åä¸€ä¸ªå…ƒç´ .  ä¾‹å¦‚ï¼š\n\u0026lt;s:iterator value=\u0026quot;books.{?#this.price}35}\u0026quot;\t/\u0026gt;  19ã€å¸¸ç”¨æ ‡ç­¾ 19.1ã€propertæ ‡ç­¾ï¼š ç”¨äºè¾“å‡ºæŒ‡å®šå€¼ï¼š\n\u0026lt;s:set name=\u0026quot;name\u0026quot; value=\u0026quot;kk\u0026quot;/\u0026gt; \u0026lt;s:property value=\u0026quot;#name\u0026quot;/\u0026gt;   default:å¯é€‰å±æ€§ï¼Œå¦‚æœéœ€è¦è¾“å‡ºæŒ‡å®šçš„å±æ€§å€¼ä¸ºnullï¼Œåˆ™æ˜¾ç¤ºè¯¥å±æ€§æŒ‡å®šçš„å€¼. valueï¼šå¯é€‰å±æ€§ï¼ŒæŒ‡å®šéœ€è¦è¾“å‡ºçš„å±æ€§å€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å±æ€§ï¼Œåˆ™é»˜è®¤è¾“å‡ºValueStackæ ˆé¡¶çš„å€¼. escapeï¼šå¯é€‰å±æ€§ï¼ŒæŒ‡å®šæ˜¯å¦æ ¼å¼åŒ–HTMLä»£ç . idï¼šå¯é€‰å±æ€§ï¼ŒæŒ‡å®šè¿˜å…ƒç´ çš„æ ‡è¯†.  19.2ã€iteratoræ ‡ç­¾ iteratoræ ‡ç­¾ç”¨äºå¯¹é›†åˆè¿›è¡Œè¿­ä»£ï¼Œæ²»ç†çš„é›†åˆåŒ…å«Listã€Setå’Œæ•°ç»„\n\u0026lt;s:set name=\u0026quot;list\u0026quot; value=\u0026quot;{'foo','bar'}\u0026quot;/\u0026gt; \u0026lt;s:iterator value=\u0026quot;#list\u0026quot; status=\u0026quot;st\u0026quot;\u0026gt; \u0026lt;s:color=\u0026lt;s:if test=\u0026quot;#st.odd\u0026quot;\u0026gt;red\u0026lt;/s:if\u0026gt;\u0026lt;s:else\u0026gt;blue\u0026lt;/s:else\u0026gt;\u0026gt; \u0026lt;s:property/\u0026gt;\u0026lt;/font\u0026gt;\u0026lt;br\u0026gt; \u0026lt;/s:iterator\u0026gt;   value:å¯é€‰å±æ€§ï¼ŒæŒ‡å®šè¢«è¿­ä»£çš„é›†åˆï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™ä½¿ç”¨ValueStackæ ˆé¡¶çš„é›†åˆ id:å¯é€‰å±æ€§ï¼ŒæŒ‡å®šå³åˆç†å…ƒç´ çš„id. ï¼ˆè¿‡æ—¶ï¼‰ statusï¼šè¯¥å±æ€§æŒ‡å®šè¿­ä»£æ—¶çš„IteratorStatuså®ä¾‹. è¯¥å®ä¾‹åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š  int getCount()ï¼Œè¿”å›å½“å‰è¿­ä»£äº†å‡ ä¸ªå…ƒç´  int getIndex()ï¼Œè¿”å›å½“å‰è¿­ä»£å…ƒç´ çš„ç´¢å¼• boolean isEven()ï¼Œè¿”å›å½“å‰è¢«è¿­ä»£å…ƒç´ çš„ç´¢å¼•æ˜¯å¦ä¸ºå¶æ•° boolean isOdd()ï¼Œè¿”å›å½“å‰è¢«è¿­ä»£å…ƒç´ çš„ç´¢å¼•æ˜¯å¦ä¸ºå¥‡æ•° boolean isFirst()ï¼Œè¿”å›å½“å‰è¢«è¿­ä»£å…ƒç´ çš„ç´¢å¼•æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´  boolean isLast()ï¼Œè¿”å›å½“å‰è¢«è¿­ä»£å…ƒç´ çš„ç´¢å¼•æ˜¯å¦æœ€åä¸€ä¸ªå…ƒç´     19.3ã€urlæ ‡ç­¾ \u0026lt;s:url value=\u0026quot;hellowoeld_add\u0026quot; namespace=\u0026quot;/test\u0026quot;\u0026gt;\u0026lt;s:param name=\u0026quot;person\u0026quot; value=\u0026quot;23\u0026quot;/\u0026gt;\u0026lt;/s:url\u0026gt;  ç”Ÿæˆç±»ä¼¼å¦‚ä¸‹è·¯å¾„ï¼š /struts/test/helloworld_add.adtion?persom=23 çº¢è‰²éƒ¨åˆ†ä¸ºå†…å®¹è·¯å¾„\nå½“æ ‡ç­¾çš„å±æ€§ä½œä¸ºå­—ç¬¦ä¸²ç±»å‹å¤„ç†æ—¶ï¼Œâ€œ%â€ç¬¦å·çš„ç”¨é€”è¯•è®¡ç®—OGNLè¡¨è¾¾å¼çš„å€¼\n\u0026lt;s:set value=\u0026quot;myurl\u0026quot; value='\u0026quot;http://www.sohu.com\u0026quot;'/\u0026gt; \u0026lt;s:url value=\u0026quot;myurl\u0026quot;/\u0026gt;\u0026lt;/br\u0026gt; \u0026lt;s:url value=\u0026quot;%{#myurl}\u0026quot;/\u0026gt;  è¾“å‡ºç»“æœï¼š\n# myurl http://www.sohu.com  19.4ã€è¡¨å•æ ‡ç­¾ï¼šcheckboxlistå¤é€‰æ¡† å¦‚æœé›†åˆä¸ºlist\n\u0026lt;s:checkboxlist name=\u0026quot;list\u0026quot; list=\u0026quot;{'Java','.Net','Ror','PHP'}\u0026quot; value=\u0026quot;{'Java','.Net'}\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;Java\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Java\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;.Net\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;.Net\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot; Ror\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Ror\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot; PHP\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;PHP\u0026lt;/lable\u0026gt;  å¦‚æœé›†åˆä¸ºMap\n\u0026lt;s:checkboxlist name=\u0026quot;map\u0026quot; list=\u0026quot;#{1:'Java',2:'.Net',3:'Ror',4:'PHP'}\u0026quot; listKey=\u0026quot;key\u0026quot; listValue=\u0026quot;value\u0026quot; value=\u0026quot;{1,2,3}\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;1\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Java\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;2\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;.Net\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;3\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Ror\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;4\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;PHP\u0026lt;/lable\u0026gt;  å¦‚æœé›†åˆé‡Œå­˜æ”¾çš„æ˜¯javabean\n\u0026lt;% Person p1 = new Person(1,\u0026quot;ç¬¬ä¸€ä¸ª\u0026quot;); Person p1 = new Person(2,\u0026quot;ç¬¬ä¸€ä¸ª\u0026quot;); List\u0026lt;Person\u0026gt; list = new ArrayList\u0026lt;Person\u0026gt;(); list.add(p1); list.add(p2); request.setAttribute(\u0026quot;person\u0026quot;, list); %\u0026gt; \u0026lt;s:checkboxlist list=\u0026quot;#request.persons\u0026quot; listKey=\u0026quot;personid\u0026quot; listValue=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/s:checkboxlist\u0026gt;  personidå’Œnameä¸ºPersonçš„å±æ€§ ç”Ÿæˆå¦‚ä¸‹ä»£ç ï¼š\n\u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;beans\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;ç¬¬ä¸€ä¸ª\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;beans\u0026quot; value=\u0026quot;2\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;ç¬¬äºŒä¸ª\u0026lt;/lable\u0026gt;  19.5ã€è¡¨å•æ ‡ç­¾ï¼šradioå•é€‰æ¡† å¦‚æœé›†åˆä¸ºlist\n\u0026lt;s:radio name=\u0026quot;list\u0026quot; list=\u0026quot;{'Java','.Net','Ror','PHP'}\u0026quot; value=\u0026quot;'Java'\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;Java\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Java\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;.Net\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;Ror\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;list\u0026quot; value=\u0026quot;PHP\u0026quot;/\u0026gt;  å¦‚æœé›†åˆä¸ºMap\n\u0026lt;s:radio name=\u0026quot;map\u0026quot; list=\u0026quot;#{1:'Java',2:'.Net'3:,'Ror',4:'PHP'}\u0026quot; listKey=\u0026quot;key\u0026quot; listValue=\u0026quot;value\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;1\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Java\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;2\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;.Net\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;3\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;Ror\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;map\u0026quot; value=\u0026quot;4\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;PHP\u0026lt;/lable\u0026gt;  å¦‚æœé›†åˆé‡Œå­˜æ”¾çš„æ˜¯javabean\n\u0026lt;% Person p1 = new Person(1,\u0026quot;ç¬¬ä¸€ä¸ª\u0026quot;); Person p1 = new Person(2,\u0026quot;ç¬¬ä¸€ä¸ª\u0026quot;); List\u0026lt;Person\u0026gt; list = new ArrayList\u0026lt;Person\u0026gt;(); list.add(p1); list.add(p2); request.setAttribute(\u0026quot;person\u0026quot;, list); %\u0026gt; \u0026lt;s:radio name=\u0026quot;beans\u0026quot; list=\u0026quot;#request.persons\u0026quot; listKey=\u0026quot;personid\u0026quot; listValue=\u0026quot;name\u0026quot;/\u0026gt;  personidå’Œnameä¸ºPersonçš„å±æ€§ ç”Ÿæˆå¦‚ä¸‹ä»£ç ï¼š\n\u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;beans\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;ç¬¬ä¸€ä¸ª\u0026lt;/lable\u0026gt; \u0026lt;input type=\u0026quot;radio\u0026quot; name=\u0026quot;beans\u0026quot; value=\u0026quot;2\u0026quot;/\u0026gt;\u0026lt;lable\u0026gt;ç¬¬äºŒä¸ª\u0026lt;/lable\u0026gt;  19.6ã€è¡¨å•æ ‡ç­¾selectä¸‹æ‹‰é€‰æ‹©æ¡† \u0026lt;s:select name=\u0026quot;list\u0026quot; list=\u0026quot;{'Java','.Net'}\u0026quot; value=\u0026quot;'Java'\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;s:select name=\u0026quot;list\u0026quot; id=\u0026quot;list\u0026quot;\u0026gt; \u0026lt;option value=\u0026quot;Java\u0026quot; selected=\u0026quot;selected\u0026quot;\u0026gt;Java\u0026lt;option/\u0026gt; \u0026lt;option value=\u0026quot;.Net\u0026quot;\u0026gt;.Net \u0026lt;option/\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;s:select name=\u0026quot;map\u0026quot; list=\u0026quot;#{1:'Java',2:'.Net'3:,'Ror',4:'PHP'}\u0026quot; listKey=\u0026quot;key\u0026quot; listValue=\u0026quot;value\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt;  ç”Ÿæˆå¦‚ä¸‹htmlä»£ç ï¼š\n\u0026lt;s:select name=\u0026quot;list\u0026quot; id=\u0026quot;list\u0026quot;\u0026gt; \u0026lt;option value=\u0026quot;1\u0026quot; selected=\u0026quot;selected\u0026quot;\u0026gt;Java\u0026lt;option/\u0026gt; \u0026lt;option value=\u0026quot;2\u0026quot;\u0026gt;.Net\u0026lt;option/\u0026gt; \u0026lt;/select\u0026gt;  20ã€\u0026lt;s:token/\u0026gt;æ ‡ç­¾æ”¾ç½®é‡å¤æäº¤ \u0026lt;s:token/\u0026gt;æ ‡ç­¾æ”¾ç½®é‡å¤æäº¤ç”¨æ³•å¦‚ä¸‹ï¼š ç¬¬ä¸€æ­¥ï¼šåœ¨è¡¨å•ä¸­åŠ å…¥\u0026lt;s:token/\u0026gt;\n\u0026lt;s:form action=\u0026quot;Action_execute()\u0026quot; method=\u0026quot;post\u0026quot; \u0026gt; å§“å\u0026lt;s:textfield name=\u0026quot;name\u0026quot;/\u0026gt;\u0026lt;s:token/\u0026gt; \u0026lt;input type=\u0026quot;submit\u0026quot; value=\u0026quot;å‘é€\u0026quot;/\u0026gt; \u0026lt;/s:form\u0026gt;  ç¬¬äºŒæ­¥ï¼š\n\u0026lt;action name=\u0026quot;Action_*\u0026quot; class=\u0026quot;com.haibao.action.XMLvalidate\u0026quot; method=\u0026quot;{1}\u0026quot;\u0026gt; \u0026lt;interceptor-ref name=\u0026quot;defaultStack\u0026quot;/\u0026gt; \u0026lt;interceptor-ref name=\u0026quot;token\u0026quot;/\u0026gt; \u0026lt;result name=\u0026quot;ivalid.token\u0026quot;\u0026gt;/message.jsp\u0026lt;/result\u0026gt; \u0026lt;result name=\u0026quot;success\u0026quot;\u0026gt;/WEB-INF/page/message.jsp\u0026lt;/result\u0026gt; \u0026lt;/action\u0026gt;  ä»¥ä¸Šé…ç½®åŠ å…¥äº†â€œtokenâ€æ‹¦æˆªå™¨å’Œâ€œivalid.tokenâ€ç»“æœï¼Œå› ä¸ºâ€œtokenâ€æ‹¦æˆªå™¨åœ¨ä¼šè¯çš„tokenä¸è¯·æ±‚çš„tokenä¸ä¸€è‡´æ—¶ï¼Œå°†ä¼šç›´æ¥è¿”å›â€œivalid.tokenâ€ç»“æœ.\n","date":1611878400,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611878400,"objectID":"97fdddcd9bf62e2f6e54ff9f344cbe06","permalink":"https://CoMath21.github.io/post/1-struts2/","publishdate":"2021-01-29T00:00:00Z","relpermalink":"/post/1-struts2/","section":"post","summary":"å…·ä½“ä»‹ç»Strust2çš„ç›¸å…³å†…å®¹.","tags":["ç¼–ç¨‹è¯­è¨€","Java","Struts2"],"title":"Struts2å­¦ä¹ ç¬”è®°","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"ã€€å¯¹äºè¿™ä¸€ç»„ç”µå½±æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æƒ³runtimeçš„åˆ†å¸ƒæƒ…å†µ.\n# coding=utf-8 import pandas as pd from matplotlib import pyplot as plt file_path = \u0026quot;./IMDB-Movie-Data.csv\u0026quot; df = pd.read_csv(file_path) # print(temp_list.tolist()) # nums = set([i for j in temp_list for i in j]) # print(len(nums)) time_list = df[\u0026quot;Runtime (Minutes)\u0026quot;].values max_time = time_list.max() min_time = time_list.min() dis = (max_time - min_time)//5 plt.figure(figsize=(20,8),dpi=80) plt.hist(time_list,dis) plt.xticks(range(min_time,max_time,5)) plt.show()  å¯¹äºè¿™ä¸€ç»„ç”µå½±æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ç»Ÿè®¡ç”µå½±åˆ†ç±»(genre)çš„æƒ…å†µï¼Œåº”è¯¥å¦‚ä½•å¤„ç†æ•°æ®ï¼Ÿ\næ€è·¯ï¼šé‡æ–°æ„é€ ä¸€ä¸ªå…¨ä¸º0çš„æ•°ç»„ï¼Œåˆ—åä¸ºåˆ†ç±»ï¼Œå¦‚æœæŸä¸€æ¡æ•°æ®ä¸­åˆ†ç±»å‡ºç°è¿‡ï¼Œå°±è®©0å˜ä¸º1.\n# coding=utf-8 import pandas as pd from matplotlib import pyplot as plt import numpy as np file_path = \u0026quot;./IMDB-Movie-Data.csv\u0026quot; # è¯»å–CSVæ–‡ä»¶ df = pd.read_csv(file_path) print(df[\u0026quot;Genre\u0026quot;].head(3)) # ç»Ÿè®¡åˆ†ç±»çš„åˆ—è¡¨ temp_list = df[\u0026quot;Genre\u0026quot;].str.split(\u0026quot;,\u0026quot;).tolist() #[[],[],[]] genre_list = list(set([i for j in temp_list for i in j])) # ç­‰ä»·äº genre_list = [] # for i in temp_genre_list: # genre_list.extend(i) # genre_list = list(set(genre_list)) # æ„é€ å…¨ä¸º0çš„æ•°ç»„ zeros_df = pd.DataFrame(np.zeros((df.shape[0],len(genre_list))),columns=genre_list) # ç»™æ¯ä¸ªç”µå½±å‡ºç°åˆ†ç±»çš„ä½ç½®èµ‹å€¼1 for i in range(df.shape[0]): #zeros_df.loc[0,[\u0026quot;Sci-fi\u0026quot;,\u0026quot;Mucical\u0026quot;]] = 1 zeros_df.loc[i,temp_list[i]] = 1 # ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„ç”µå½±çš„æ•°é‡å’Œ genre_count = zeros_df.sum(axis=0) # æ’åº genre_count = genre_count.sort_values() _x = genre_count.index _y = genre_count.values #ç”»å›¾ plt.figure(figsize=(20,8),dpi=80) plt.bar(range(len(_x)),_y,width=0.4,color=\u0026quot;orange\u0026quot;) plt.xticks(range(len(_x)),_x) plt.show()  æ•°æ®åˆå¹¶ä¹‹join ã€€join:é»˜è®¤æƒ…å†µä¸‹ä»–æ˜¯æŠŠè¡Œç´¢å¼•ç›¸åŒçš„æ•°æ®åˆå¹¶åˆ°ä¸€èµ·. æ•°æ®åˆå¹¶ä¹‹merge ã€€merge:æŒ‰ç…§æŒ‡å®šçš„åˆ—æŠŠæ•°æ®æŒ‰ç…§ä¸€å®šçš„æ–¹å¼åˆå¹¶åˆ°ä¸€èµ·\nmerge(left, right, how='inner', on=None, left_on=None, right_on=None, left_index=False, right_index=False, sort=False, suffixes=('_x', '_y'), copy=True, indicator=False, validate=None) import pandas as pd df1=pd.DataFrame({'key':['a','b','a','b','b'],'value1':range(5)}) df2=pd.DataFrame({'key':['a','c','c','c','c'],'value2':range(5)}) display(df1,df2,pd.merge(df1,df2))   é»˜è®¤çš„åˆå¹¶æ–¹å¼innerï¼Œäº¤é›†; merge outerï¼Œå¹¶é›†ï¼ŒNaNè¡¥å…¨; merge leftï¼Œå·¦è¾¹ä¸ºå‡†ï¼ŒNaNè¡¥å…¨; merge rightï¼Œå³è¾¹ä¸ºå‡†ï¼ŒNaNè¡¥å…¨.  åˆ†ç»„å’Œèšåˆ ã€€åœ¨pandasä¸­ç±»ä¼¼çš„åˆ†ç»„çš„æ“ä½œæœ‰å¾ˆç®€å•çš„æ–¹å¼æ¥å®Œæˆ\ngrouped = df.groupby(by=\u0026quot;columns_name\u0026quot;)  groupedæ˜¯ä¸€ä¸ªDataFrameGroupByå¯¹è±¡ï¼Œæ˜¯å¯è¿­ä»£çš„;groupedä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„é‡Œé¢æ˜¯ï¼ˆç´¢å¼•(åˆ†ç»„çš„å€¼)ï¼Œåˆ†ç»„ä¹‹åçš„DataFrameï¼‰.\né‚£ä¹ˆï¼Œåˆ†ç»„ä¹‹åçš„æ¯ä¸ªDataFrameçš„é•¿åº¦ï¼Ÿ é•¿åº¦æ˜¯ä¸€ä¸ªæ€è·¯ï¼Œä½†æ›´å¤šçš„æ–¹æ³•(èšåˆæ–¹æ³•)æ¥è§£å†³è¿™ä¸ªé—®é¢˜. DataFrameGroupByå¯¹è±¡æœ‰å¾ˆå¤šç»è¿‡ä¼˜åŒ–çš„æ–¹æ³•. å¦‚æœéœ€è¦å¯¹å›½å®¶å’Œçœä»½è¿›è¡Œåˆ†ç»„ç»Ÿè®¡\ngrouped = df.groupby(by=[df[\u0026quot;Country\u0026quot;],df[\u0026quot;State/Province\u0026quot;]])  å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªå¸Œæœ›å¯¹è·å–åˆ†ç»„ä¹‹åçš„æŸä¸€éƒ¨åˆ†æ•°æ®ï¼Œæˆ–è€…è¯´æˆ‘ä»¬åªå¸Œæœ›å¯¹æŸå‡ åˆ—æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ è·å–åˆ†ç»„ä¹‹åçš„æŸä¸€éƒ¨åˆ†æ•°æ®ï¼š\ndf.groupby(by=[\u0026quot;Country\u0026quot;,\u0026quot;State/Province\u0026quot;])[\u0026quot;Country\u0026quot;].count()  å¯¹æŸå‡ åˆ—æ•°æ®è¿›è¡Œåˆ†ç»„ï¼š\ndf[\u0026quot;Country\u0026quot;].groupby(by=[df[\u0026quot;Country\u0026quot;],df[\u0026quot;State/Province\u0026quot;]]).count()  è§‚å¯Ÿç»“æœï¼Œç”±äºåªé€‰æ‹©äº†ä¸€åˆ—æ•°æ®ï¼Œæ‰€ä»¥ç»“æœæ˜¯ä¸€ä¸ªSeriesç±»å‹.\nå¦‚æœæˆ‘æƒ³è¿”å›ä¸€ä¸ªDataFrameç±»å‹å‘¢ï¼Ÿ\nt1 = df[[\u0026quot;Country\u0026quot;]].groupby(by=[df[\u0026quot;Country\u0026quot;],df[\u0026quot;State/Province\u0026quot;]]).count() t2 = df.groupby(by=[\u0026quot;Country\u0026quot;,\u0026quot;State/Province\u0026quot;])[[\u0026quot;Country\u0026quot;]].count()  ä»¥ä¸Šçš„ä¸¤æ¡å‘½ä»¤ç»“æœä¸€æ ·ï¼Œå’Œä¹‹å‰çš„ç»“æœçš„åŒºåˆ«åœ¨äºå½“å‰è¿”å›çš„æ˜¯ä¸€ä¸ªDataFrameç±»å‹.\nç´¢å¼•å’Œå¤åˆç´¢å¼• ç®€å•çš„ç´¢å¼•æ“ä½œï¼š  è·å–indexï¼šdf.index æŒ‡å®šindex ï¼šdf.index = ['x','y'] é‡æ–°è®¾ç½®index : df.reindex(list(\u0026quot;abcedf\u0026quot;)) æŒ‡å®šæŸä¸€åˆ—ä½œä¸ºindex ï¼šdf.set_index(\u0026quot;Country\u0026quot;,drop=False) è¿”å›indexçš„å”¯ä¸€å€¼ï¼šdf.set_index(\u0026quot;Country\u0026quot;).index.unique()  ã€€å‡è®¾aä¸ºä¸€ä¸ªDataFrame,é‚£ä¹ˆå½“a.set_index([\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;])å³è®¾ç½®ä¸¤ä¸ªç´¢å¼•çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ ·å­çš„ç»“æœå‘¢ï¼Ÿ\na = pd.DataFrame({'a': range(7),'b': range(7, 0, -1),'c': ['one','one','one','two','two','two', 'two'],'d': list(\u0026quot;hjklmno\u0026quot;)})  Serieså¤åˆç´¢å¼• DataFrameå¤åˆç´¢å¼• ä¾‹.ç°åœ¨æœ‰2015åˆ°2017å¹´25ä¸‡æ¡911çš„ç´§æ€¥ç”µè¯çš„æ•°æ®ï¼Œè¯·ç»Ÿè®¡å‡ºå‡ºè¿™äº›æ•°æ®ä¸­ä¸åŒç±»å‹çš„ç´§æ€¥æƒ…å†µçš„æ¬¡æ•°.\nimport pandas as pd import numpy as np from matplotlib import pyplot as plt df = pd.read_csv(\u0026quot;./911.csv\u0026quot;) # print(df.info()) temp_list = df[\u0026quot;title\u0026quot;].str.split(\u0026quot;:\u0026quot;).tolist() cate_list = [i[0] for i in temp_list] cate_set_list = list(set(cate_list)) df[\u0026quot;type\u0026quot;] = pd.DataFrame(np.array(cate_list).reshape((df.shape[0],1))) # print(df.head()) cate_zeros = pd.DataFrame(np.zeros((df.shape[0],len(cate_set_list))),columns=cate_set_list) for cate in cate_set_list: cate_zeros[cate][df[\u0026quot;type\u0026quot;].str.contains(cate)] = 1 zeros_sum = cate_zeros.sum(axis=0) sum_values = zeros_sum.values plt.figure(figsize=(8, 6),dpi=80) plt.bar(cate_set_list,sum_values,color=\u0026quot;orange\u0026quot;,width=0.4) plt.show()  ç»Ÿè®¡å‡ºä¸åŒæœˆä»½ä¸åŒç±»å‹ç´§æ€¥ç”µè¯çš„æ¬¡æ•°çš„å˜åŒ–æƒ…å†µï¼Œåº”è¯¥æ€ä¹ˆåšå¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å°†æ—¶é—´æˆ³æŒ‰ç…§å³è¾¹â€œ-â€è¿›è¡Œåˆ‡å‰²ï¼Œç„¶åå°†å‰é¢çš„å­—ç¬¦ä¸²å®šä¹‰ä¸ºåŸæ•°ç»„çš„æœ€åä¸€åˆ—ï¼Œåœ¨è¿›è¡Œå…¶ä»–æ“ä½œ. ä¹Ÿå¯ä»¥ä½¿ç”¨pandasçš„æ—¶é—´åºåˆ—.\npandasä¸­çš„æ—¶é—´åºåˆ— ã€€ä¸ç®¡åœ¨ä»€ä¹ˆè¡Œä¸šï¼Œæ—¶é—´åºåˆ—éƒ½æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ•°æ®å½¢å¼ï¼Œå¾ˆå¤šç»Ÿè®¡æ•°æ®ä»¥åŠæ•°æ®çš„è§„å¾‹ä¹Ÿéƒ½å’Œæ—¶é—´åºåˆ—æœ‰ç€éå¸¸é‡è¦çš„è”ç³»,è€Œä¸”åœ¨pandasä¸­å¤„ç†æ—¶é—´åºåˆ—æ˜¯éå¸¸ç®€å•çš„ç”Ÿæˆä¸€æ®µæ—¶é—´èŒƒå›´.\npd.date_range(start=None, end=None, periods=None, freq='D')  startå’Œendä»¥åŠfreqé…åˆèƒ½å¤Ÿç”Ÿæˆstartå’ŒendèŒƒå›´å†…ä»¥é¢‘ç‡freqçš„ä¸€ç»„æ—¶é—´ç´¢å¼•. startå’Œperiodsä»¥åŠfreqé…åˆèƒ½å¤Ÿç”Ÿæˆä»startå¼€å§‹çš„é¢‘ç‡ä¸ºfreqçš„periodsä¸ªæ—¶é—´ç´¢å¼•. åœ¨DataFrameä¸­ä½¿ç”¨æ—¶é—´åºåˆ— index=pd.date_range(\u0026quot;20170101\u0026quot;,periods=10) df = pd.DataFrame(np.random.rand(10),index=index)  å›åˆ°æœ€å¼€å§‹çš„911æ•°æ®çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pandasæä¾›çš„æ–¹æ³•æŠŠæ—¶é—´å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ—¶é—´åºåˆ—.\ndf[\u0026quot;timeStamp\u0026quot;] = pd.to_datetime(df[\u0026quot;timeStamp\u0026quot;],format=\u0026quot;\u0026quot;)  formatå‚æ•°å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥ä¸ç”¨å†™ï¼Œä½†æ˜¯å¯¹äºpandasæ— æ³•æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‚æ•°ï¼Œæ¯”å¦‚åŒ…å«ä¸­æ–‡.\npandasé‡é‡‡æ · ã€€é‡é‡‡æ ·ï¼šæŒ‡çš„æ˜¯å°†æ—¶é—´åºåˆ—ä»ä¸€ä¸ªé¢‘ç‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªé¢‘ç‡è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ï¼Œå°†é«˜é¢‘ç‡æ•°æ®è½¬åŒ–ä¸ºä½é¢‘ç‡æ•°æ®ä¸ºé™é‡‡æ ·ï¼Œä½é¢‘ç‡è½¬åŒ–ä¸ºé«˜é¢‘ç‡ä¸ºå‡é‡‡æ ·.pandasæä¾›äº†ä¸€ä¸ªresampleçš„æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å®ç°é¢‘ç‡è½¬åŒ–. PeriodIndex ã€€ä¹‹å‰æ‰€å­¦ä¹ çš„DatetimeIndexå¯ä»¥ç†è§£ä¸ºæ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬è¦å­¦ä¹ çš„PeriodIndexå¯ä»¥ç†è§£ä¸ºæ—¶é—´æ®µï¼\nperiods = pd.PeriodIndex(year=data[\u0026quot;year\u0026quot;],month=data[\u0026quot;month\u0026quot;],day=data[\u0026quot;day\u0026quot;],hour=data[\u0026quot;hour\u0026quot;],freq=\u0026quot;H\u0026quot;)  é‚£ä¹ˆå¦‚æœç»™è¿™ä¸ªæ—¶é—´æ®µé™é‡‡æ ·å‘¢ï¼Ÿ\ndata = df.set_index(periods).resample(\u0026quot;10D\u0026quot;).mean()  ","date":1611792000,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611792000,"objectID":"25241c6db9aa838d1b87741feaee85e3","permalink":"https://CoMath21.github.io/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%904/","publishdate":"2021-01-28T00:00:00Z","relpermalink":"/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%904/","section":"post","summary":"Pythonæ•°æ®åˆ†æä¹‹å¸¸ç”¨ç»Ÿè®¡æ–¹æ³•.","tags":["ç¼–ç¨‹è¯­è¨€","Python","æ•°æ®åˆ†æ"],"title":"Pythonæ•°æ®åˆ†æï¼ˆå››ï¼‰","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"","date":1611792000,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611792000,"objectID":"9226e139b2d30f2cbf1e37cc4f3ba49e","permalink":"https://CoMath21.github.io/post/1-spring2.5/","publishdate":"2021-01-28T00:00:00Z","relpermalink":"/post/1-spring2.5/","section":"post","summary":"å…·ä½“ä»‹ç»Spring2.5çš„ç›¸å…³å†…å®¹.","tags":["ç¼–ç¨‹è¯­è¨€","Java","Spring"],"title":"Spring2.5å­¦ä¹ ç¬”è®°","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"ã€€Numpyèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¤„ç†æ•°å€¼ï¼Œpandasé™¤äº†å¤„ç†æ•°å€¼ä¹‹å¤–(åŸºäºnumpy)ï¼Œè¿˜èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¤„ç†å…¶ä»–ç±»å‹çš„æ•°æ®.\npandasçš„å¸¸ç”¨æ•°æ®ç±»å‹ Series ä¸€ç»´ï¼Œå¸¦æ ‡ç­¾æ•°ç»„ t = pd.Series(np.arange(10),index=list(string.ascoo_uppercase[:10]))  Seriesåˆ‡ç‰‡å’Œç´¢å¼• Seriesçš„ç´¢å¼•å’Œå€¼ å¯¹äºä¸€ä¸ªé™Œç”Ÿçš„seriesç±»å‹ï¼Œå¯ä»¥é€šè¿‡t.indexè·å–å…¶ç´¢å¼•å€¼ pandasè¯»å–å¤–éƒ¨æ•°æ®ï¼š  ç›´æ¥ä½¿ç”¨pd. read_csv()å³å¯. å¦‚æœå¾…æ•°æ®çš„æ•°æ®æ²¡æœ‰åˆ—åï¼Œåˆ™éœ€è¦è¡¥å……ï¼Œå³åœ¨è¯»å–æ–‡ä»¶æ—¶ç»™å®šå‚æ•°namesçš„å€¼.  pd.read_csv(â€œâ€™â€™,names=column_names)   column_namesï¼šæŒ‡å®šç±»åˆ«åå­—,[\u0026lsquo;Sample code number\u0026rsquo;,\u0026lsquo;Clump Thickness\u0026rsquo;, \u0026lsquo;Uniformity of Cell Size\u0026rsquo;,\u0026lsquo;Uniformity of Cell Shape\u0026rsquo;,\u0026lsquo;Marginal Adhesion\u0026rsquo;, \u0026lsquo;Single Epithelial Cell Size\u0026rsquo;,\u0026lsquo;Bare Nuclei\u0026rsquo;,\u0026lsquo;Bland Chromatin\u0026rsquo;,\u0026lsquo;Normal Nucleoli\u0026rsquo;,\u0026lsquo;Mitoses\u0026rsquo;,\u0026lsquo;Class\u0026rsquo;] return:æ•°æ®. replace(to_replace=â€™â€™,value=)ï¼šè¿”å›æ•°æ®. dropna():è¿”å›æ•°æ®. æ³¨ï¼šè¯»å–æ–‡ä»¶åªè¦æ˜¯.CSVæ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨load_csv()æ–¹æ³•ï¼Œå³ä½¿æ–‡ä»¶åœ°å€æ˜¯ç½‘ç«™.  DataFrame äºŒç»´ï¼ŒSerieså®¹å™¨ DataFrameå¯¹è±¡æ—¢æœ‰è¡Œç´¢å¼•ï¼Œåˆæœ‰åˆ—ç´¢å¼• è¡Œç´¢å¼•ï¼Œè¡¨æ˜ä¸åŒè¡Œï¼Œæ¨ªå‘ç´¢å¼•ï¼Œå«indexï¼Œ0è½´ï¼Œaxis=0ï¼› åˆ—ç´¢å¼•ï¼Œè¡¨åä¸åŒåˆ—ï¼Œçºµå‘ç´¢å¼•ï¼Œå«columnsï¼Œ1è½´ï¼Œaxis=1ï¼ å’Œä¸€ä¸ªndarrayä¸€æ ·ï¼Œé€šè¿‡ndimï¼Œshapeï¼Œdtypeäº†è§£è¿™ä¸ªndarrayçš„åŸºæœ¬ä¿¡æ¯ï¼ è·å¾—ä½¿ç”¨æ¬¡æ•°æœ€é«˜çš„å‰å‡ ä¸ªåå­—æ˜¯ä»€ä¹ˆï¼Ÿ\nimport pandas as pd df = pd.read_csv(\u0026quot;./dogNames.csv\u0026quot;) # print(df.head()) # print(df.info()) # dataFrame ä¸­æ’åºçš„æ–¹æ³• df = df.sort_values(\u0026quot;Count_AnimalName\u0026quot;,ascending=False) print(df.head())  def sort_values(self, by, axis=0, ascending=True, inplace=False, kind='quicksort', na_position='last') # ascendingï¼šå‡åºï¼šTrue\t# é™åºï¼šFalse  é—®é¢˜ï¼šæ•°æ®æœ‰10åˆ—ï¼Œæˆ‘æƒ³æŒ‰ç…§å…¶ä¸­çš„ç¬¬1ï¼Œç¬¬3ï¼Œç¬¬8åˆ—æ’åºï¼Ÿ\n# pandaså–è¡Œæˆ–è€…åˆ—çš„æ³¨æ„ç‚¹ # - æ–¹æ‹¬å·å†™æ•°ç»„,è¡¨ç¤ºå–è¡Œ,å¯¹è¡Œè¿›è¡Œæ“ä½œ # - å†™å­—ç¬¦ä¸²,è¡¨ç¤ºçš„å»åˆ—ç´¢å¼•,å¯¹åˆ—è¿›è¡Œæ“ä½œ print(df[:20]) print(df[\u0026quot;Row_Labels\u0026quot;]) print(type(df[\u0026quot;Row_Labels\u0026quot;]))  è¿˜æœ‰æ›´å¤šçš„ç»è¿‡pandasä¼˜åŒ–è¿‡çš„é€‰æ‹©æ–¹å¼ï¼š\n df.loc é€šè¿‡æ ‡ç­¾ç´¢å¼•è¡Œæ•°æ®ï¼ˆè¡Œåˆ—çš„åå­—ï¼‰  df.loc[â€œaâ€,â€wâ€] # aè¡Œwåˆ— df.loc[â€œaâ€,:] # aè¡Œ df.loc[:,â€wâ€] # wåˆ— df.loc[[â€œaâ€,â€câ€],:] # aï¼Œcè¡Œ df.loc[:,[â€œwâ€,â€zâ€]] # wï¼Œzåˆ— df.loc[[â€œaâ€,â€câ€ ,[â€œwâ€,â€zâ€]] # a,cè¡Œï¼Œw,zåˆ— df.loc[[â€œaâ€:â€câ€ ,[â€œwâ€,â€zâ€]] # aåˆ°cè¡Œï¼Œw,zåˆ—  df.iloc é€šè¿‡ä½ç½®è·å–è¡Œæ•°æ®ï¼ˆè¡Œåˆ—å·-1ï¼‰  df.iloc[1,:] # ç¬¬äºŒè¡Œ df.iloc[:,2] # ç¬¬ä¸‰åˆ— df.iloc[:,[2,1]] # ç¬¬ä¸‰åˆ—ç¬¬äºŒåˆ— df.iloc[[0,2], [2,1]]\t# ç¬¬1,3è¡Œ, ç¬¬3,2åˆ—  èµ‹å€¼æ›´æ”¹æ•°æ®çš„è¿‡ç¨‹ï¼š å¸ƒå°”ç´¢å¼• ã€€æ‰¾åˆ°æ‰€æœ‰çš„ä½¿ç”¨æ¬¡æ•°è¶…è¿‡800çš„ç‹—çš„åå­—. æ‰¾åˆ°æ‰€æœ‰çš„ä½¿ç”¨æ¬¡æ•°è¶…è¿‡700å¹¶ä¸”åå­—çš„å­—ç¬¦ä¸²çš„é•¿åº¦å¤§äº4çš„ç‹—çš„åå­— å­—ç¬¦ä¸²æ–¹æ³• Pandasç¼ºå¤±æ•°æ®çš„å¤„ç† æ•°æ®ç¼ºå¤±é€šå¸¸æœ‰ä¸¤ç§æƒ…å†µï¼š ã€€ä¸€ç§å°±æ˜¯ç©ºï¼ŒNoneç­‰ï¼Œåœ¨pandasæ˜¯NaN(å’Œnp.nanä¸€æ ·);å¦ä¸€ç§æ˜¯æˆ‘ä»¬è®©å…¶ä¸º0ï¼Œè“è‰²æ¡†ä¸­å¯¹äºNaNçš„æ•°æ®ï¼Œåœ¨numpyä¸­æˆ‘ä»¬æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ\nã€€åœ¨pandasä¸­æˆ‘ä»¬å¤„ç†èµ·æ¥éå¸¸å®¹æ˜“.\nåˆ¤æ–­æ•°æ®æ˜¯å¦ä¸ºNaNï¼špd.isnull(df),pd.notnull(df)\n å¤„ç†æ–¹å¼1ï¼šåˆ é™¤NaNæ‰€åœ¨çš„è¡Œåˆ—dropna (axis=0, how=\u0026lsquo;any\u0026rsquo;, inplace=False)# æ˜¯å¦åŸåœ°ä¿®æ”¹ å¤„ç†æ–¹å¼2ï¼šå¡«å……æ•°æ®ï¼Œt.fillna(t.mean()),t.fiallna(t.median()),t.fillna(0) å¤„ç†ä¸º0çš„æ•°æ®ï¼št[t==0]=np.nan  å½“ç„¶å¹¶ä¸æ˜¯æ¯æ¬¡ä¸º0çš„æ•°æ®éƒ½éœ€è¦å¤„ç†è®¡ç®—å¹³å‡å€¼ç­‰æƒ…å†µï¼Œnanæ˜¯ä¸å‚ä¸è®¡ç®—çš„ï¼Œä½†0ä¼š.\næ•°æ®å˜å½¢ï¼š  å¤„ç†é‡å¤æ•°æ®  åˆ¤æ–­æ•°æ®æ˜¯å¦é‡å¤ï¼Œduplicated() å»é™¤é‡å¤æ•°æ®ï¼Œdrop_dumplicates()ï¼Œå¯æŒ‡å®šåˆ—åŠå¦‚ä½•ä¿ç•™æ•°æ®   ä½¿ç”¨å‡½æ•°æˆ–mapè½¬åŒ–æ•°æ®ï¼Œé€šå¸¸æ ¹æ®å­—å…¸è¿›è¡Œæ•°æ®è½¬åŒ–  data = pd.DataFrame({'food': ['bacon', 'pulled pork', 'bacon', 'Pastrami', 'corned beef', 'Bacon', 'pastrami', 'honey ham', 'nova lox'], 'ounces': [4, 3, 12, 6, 7.5, 8, 3, 5, 6]})  # æ·»åŠ ä¸€åˆ—ï¼Œç”¨äºæŒ‡å®šé£Ÿç‰©çš„æ¥æº meat_to_animal = { 'bacon': 'pig', 'pulled pork': 'pig', 'pastrami': 'cow', 'corned beef': 'cow', 'honey ham': 'pig', 'nova lox': 'salmon' } # ä½¿ç”¨map() lowercased = data['food'].str.lower() data['animal'] = lowercased.map(meat_to_animal)   æ›¿æ¢å€¼ï¼Œreplace() ç¦»æ•£åŒ–å’Œåˆ†äº«æ“ä½œï¼Œpd.cut()ï¼Œè¿”å›Categoricalå¯¹è±¡  å“‘å˜é‡æ“ä½œï¼Œpd.get_dummies() å‘é‡åŒ–å­—ç¬¦ä¸²æ“ä½œ  å­—ç¬¦ä¸²åˆ—è¶Šè‹ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²ï¼Œser_obj.str.contains() å­—ç¬¦ä¸²åˆ—åˆ‡ç‰‡æ“ä½œï¼Œser_obj.str[a:b]    ","date":1611705600,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611705600,"objectID":"160ed39b47e3b45a7d11a8d243db6c3c","permalink":"https://CoMath21.github.io/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%903/","publishdate":"2021-01-27T00:00:00Z","relpermalink":"/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%903/","section":"post","summary":"Pythonæ•°æ®åˆ†æä¹‹Pandas.","tags":["ç¼–ç¨‹è¯­è¨€","Python","æ•°æ®åˆ†æ","Pandas"],"title":"Pythonæ•°æ®åˆ†æï¼ˆä¸‰ï¼‰","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"Numpy ã€€Numpyæ˜¯ä¸€ä¸ªåœ¨Pythonä¸­åšç§‘å­¦è®¡ç®—çš„åŸºç¡€åº“ï¼Œé‡åœ¨æ•°å€¼è®¡ç®—ï¼Œä¹Ÿæ˜¯å¤§éƒ¨åˆ†PYTHONç§‘å­¦è®¡ç®—åº“çš„åŸºç¡€åº“ï¼Œå¤šç”¨äºåœ¨å¤§å‹ã€å¤šç»´æ•°ç»„ä¸Šæ‰§è¡Œæ•°å€¼è¿ç®—.\nNumpyç®€å•åˆ›å»ºæ•°ç»„ import numpy as np # åˆ›å»ºç®€å•çš„åˆ—è¡¨ a = [1, 2, 3, 4]\tæ­¤å¤„è¾“å‡ºaçš„è¯æ˜¯[1,2,3,4] # å°†åˆ—è¡¨è½¬æ¢ä¸ºæ•°ç»„ b = np.array(a)\tæ­¤å¤„bè¾“å‡ºçš„è¯æ˜¯[1 2 3 4] np.array(a) = np.array(range(1,4)) = np.arange(1,4) np,arrange([start, ] stop[, step,], ftype=None) # å»å°æ•° np.round(x,ä¿ç•™ä½æ•°)  NumpyæŸ¥çœ‹æ•°ç»„å±æ€§ æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼šb.size\næ•°ç»„å½¢çŠ¶ï¼šb.shape\nä¸€ç»´ï¼šåˆ—æ•°(8,)ï¼›äºŒç»´ï¼šè¡Œåˆ—(2, 4)ï¼›ä¸‰ç»´ï¼šå—è¡Œåˆ—(2, 2, 4)\né‡å¡‘reshapeï¼šæ•°ç»„ä¸€ä¸ªæ–°çš„å½¢çŠ¶è€Œä¸æ”¹å˜å…¶æ•°æ®.\n# å…·æœ‰è¿”å›å€¼çš„ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ numpy.reshape(a, newshape, order='C')\torder : {â€˜Câ€™, â€˜Fâ€™, â€˜Aâ€™} # C:æ¨ªç€è¯»æ¨ªç€å†™; E:ç«–ç€çš„ç«–ç€å†™; A:ç«–ç€åº¦æ¨ªç€å†™  ä¾‹.\na = np.array([[1,2,3], [4,5,6]]) print(a) [[1 2 3] [4 5 6]] print(np.reshape(a, (3,2))) [[1 2] [3 4] [5 6]]  æ•°ç»„ç»´åº¦ï¼šb.ndim\næ•°ç»„å…ƒç´ ç±»å‹ï¼šb.dtype\nå¿«é€Ÿåˆ›å»ºNç»´æ•°ç»„çš„apiå‡½æ•°\n#åˆ›å»º10è¡Œ10åˆ—çš„æ•°å€¼ä¸ºæµ®ç‚¹1çš„çŸ©é˜µ array_one = np.ones([10, 10]) #åˆ›å»º10è¡Œ10åˆ—çš„æ•°å€¼ä¸ºæµ®ç‚¹0çš„çŸ©é˜µ array_zero = np.zeros([10, 10]) #é™åˆ°ä¸€ç»´ï¼š b.flatten(order='C') # æŠŠaé™åˆ°ä¸€ç»´ï¼Œé»˜è®¤æ˜¯æŒ‰æ¨ªçš„æ–¹å‘é™order:{â€˜Câ€™, â€˜Fâ€™,â€˜Aâ€™,â€˜Kâ€™} b.flatten('F') # æŒ‰ç«–çš„æ–¹å‘é™  è½´(axis) ã€€åœ¨numpyä¸­å¯ä»¥ç†è§£ä¸ºæ–¹å‘,ä½¿ç”¨0,1,2\u0026hellip;æ•°å­—è¡¨ç¤º,å¯¹äºä¸€ä¸ªä¸€ç»´æ•°ç»„,åªæœ‰ä¸€ä¸ª0è½´,å¯¹äº2ç»´æ•°ç»„(shape(2,2)),æœ‰0è½´å’Œ1è½´,å¯¹äºä¸‰ç»´æ•°ç»„(shape(2,2, 3)),æœ‰0,1,2è½´. Numpyè¯»å–æ•°æ® ï¼ˆä»¥åç»“åˆæ¡†æ¶ä¹‹ç±»çš„è¯»å–æ–‡ä»¶å¤§å¤šæ•°æ˜¯ä»CSVæ–‡ä»¶ä¸­è¯»å–ï¼‰\nã€€CSVï¼ˆComma-Separated Value,é€—å·åˆ†éš”å€¼æ–‡ä»¶ï¼‰ï¼šç”±äºcsvä¾¿äºå±•ç¤º,è¯»å–å’Œå†™å…¥,æ‰€ä»¥å¾ˆå¤šåœ°æ–¹ä¹Ÿæ˜¯ç”¨csvçš„æ ¼å¼å­˜å‚¨å’Œä¼ è¾“ä¸­å°å‹çš„æ•°æ®,ä¸ºäº†æ–¹ä¾¿æ•™å­¦,æˆ‘ä»¬ä¼šç»å¸¸æ“ä½œcsvæ ¼å¼çš„æ–‡ä»¶,ä½†æ˜¯æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ä¹Ÿæ˜¯å¾ˆå®¹æ˜“çš„å®ç°çš„.\næ–¹æ³•\nnp.loadtxt(fname,dtype=np.float,delimiter=None,skiprows=0,usecols=None,unpack=False)  æ³¨æ„ å…¶ä¸­æ·»åŠ çš„delimiterå’Œdtypeä»¥åŠunpackæ•ˆæœ.\n delimiterï¼šæŒ‡å®šè¾¹ç•Œç¬¦å·æ˜¯ä»€ä¹ˆï¼Œä¸æŒ‡å®šä¼šå¯¼è‡´æ¯è¡Œæ•°æ®ä¸ºä¸€ä¸ªæ•´ä½“æ³•äººå­—ç¬¦ä¸²è€ŒæŠ¥é”™ dtypeï¼šé»˜è®¤æƒ…å†µä¸‹å¯¹äºè¾ƒå¤§çš„æ•°æ®å°†å˜ä¸ºç§‘å­¦è®¡æ•°æ³•çš„æ–¹å¼ upackï¼šé»˜è®¤å€¼æ˜¯False(0)ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæœ‰å¤šå°‘æ¡æ•°æ®å°±ä¼šæœ‰å¤šå°‘è¡Œï¼›ä¸ºTrue(1)çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸€åˆ—çš„æ•°æ®ä¼šç»„æˆä¸€è¡Œï¼Œè¢æœ¯æ•°æ®æœ‰å¤šå°‘åˆ—ï¼ŒåŠ è½½å‡ºæ¥å°±ä¼šæœ‰å¤šå°‘è¡Œï¼Œç›¸å½“äºè½¬ç½®çš„æ•ˆæœ. å…¶ä»–è½¬ç½®æ–¹æ³•ï¼št.transpose()\tt.T\tt.swapaxes(1,0) # 1è½´å’Œ1è½´äº’æ¢.  Numpyç´¢å¼•å’Œåˆ‡ç‰‡ # å–è¡Œï¼š T[è¡Œ] # å–è¿ç»­çš„å¤šè¡Œï¼š T [2:] # å–ä¸è¿ç»­çš„å¤šè¡Œï¼š T [ [2,8,10] ] = T [[2,10,3],:] å–ç¬¬2è¡Œï¼šT [1,:] å–ç¬¬ä¸‰è¡Œä»¥åæ‰€æœ‰è¡Œï¼šT [2:,:] #å–åˆ—ï¼š T [:,0] #å–è¿ç»­çš„å¤šåˆ—ï¼š T [:, 2 :] #å–ä¸è¿ç»­çš„å¤šåˆ—ï¼š T [:,[ 0,2]] #å»è¡Œå’Œåˆ—ï¼Œå–ç¬¬3è¡Œï¼Œç¬¬å››åˆ—çš„å€¼ï¼š a = T [ 2, 3] print(type(a))\t# int #å–å¤šè¡Œå’Œå¤šåˆ—ï¼Œå–ç¬¬3è¡Œåˆ°ç¬¬äº”è¡Œï¼Œç¬¬2åˆ—åˆ°ç¬¬4åˆ—çš„ç»“æœ #å»çš„æ˜¯è¡Œå’Œåˆ—äº¤å‰ç‚¹çš„ä½ç½® b = T [2:5,1:4] #å–å¤šä¸ªä¸ç›¸é‚»çš„ç‚¹--é€‰å‡ºæ¥çš„ç»“æœæ˜¯ï¼ˆ0ï¼Œ0ï¼‰ ï¼ˆ2ï¼Œ1ï¼‰ ï¼ˆ2ï¼Œ3ï¼‰ c = T [[0,2,2],[0,1,3]]  Numpyä¸­å¸ƒå°”ç´¢å¼• # numpyä¸­ä¸‰å…ƒè¿ç®—ç¬¦ np.where(condition, if True, if False)  Numpyä¸­çš„clip(è£å‰ª) numpy.clip(a, a_min, a_max, out=None)  [a_min, a_max] é‡Œé¢çš„æ•°è¢«ä¿ç•™ä¸‹æ¥,å¤–é¢çš„è¢«æˆªå–ä¸ºa_minæˆ–è€…a_max .\noutï¼šå¯ä»¥æŠŠç»“æœæ”¾ç½®åœ¨æ­¤æ•°ç»„ä¸­.\nä¾‹å¦‚ï¼ŒæŒ‡å®šé—´éš”ä¸º[0ï¼Œ1]ï¼Œåˆ™å°äº0çš„å€¼èµ‹å€¼ä¸º0ï¼Œå¹¶ä¸”å¤§äº1çš„å€¼èµ‹å€¼ä¸º1.\nè¡¥å……ï¼šintç±»å‹çš„æƒ…å†µä¸‹æ— æ³•èµ‹å€¼ä¸ºnanï¼Œæ‰€ä»¥éœ€è¦å°†ç±»å‹æ”¹ä¸ºfloat.\nt.astype(float) t[x,y]=np.nan  æ•°ç»„çš„æ‹¼æ¥ï¼š np.vstack((t1,t2))\t# ç«–ç›´æ‹¼æ¥ np.hstack((t1,t2))\t# æ°´å¹³æ‹¼æ¥  æ•°ç»„çš„è¡Œåˆ—äº¤æ¢ Numpyæ›´å¤šå¥½ç”¨çš„æ–¹æ³•  è·å–æœ€å¤§å€¼æœ€å°å€¼çš„ä½ç½® np.argmax(t,axis=0) np.argmin(t,axis=1) åˆ›å»ºä¸€ä¸ªå…¨0çš„æ•°ç»„: np.zeros((3,4)) åˆ›å»ºä¸€ä¸ªå…¨1çš„æ•°ç»„:np.ones((3,4)) åˆ›å»ºä¸€ä¸ªå¯¹è§’çº¿ä¸º1çš„æ­£æ–¹å½¢æ•°ç»„(æ–¹é˜µ)ï¼šnp.eye(3)  Numpyç”Ÿæˆéšæœºæ•° Numpyä¸­çš„æ³¨æ„ç‚¹copyå’Œview  a=b å®Œå…¨ä¸å¤åˆ¶ï¼Œaå’Œbç›¸äº’å½±å“ a = b[:],è§†å›¾çš„æ“ä½œï¼Œä¸€ç§åˆ‡ç‰‡ï¼Œä¼šåˆ›å»ºæ–°çš„å¯¹è±¡aï¼Œä½†æ˜¯açš„æ•°æ®å®Œå…¨ç”±bä¿ç®¡ï¼Œä»–ä»¬ä¸¤ä¸ªçš„æ•°æ®å˜åŒ–æ˜¯ä¸€è‡´çš„ï¼Œ a = b.copy(),å¤åˆ¶ï¼Œaå’Œbäº’ä¸å½±å“  Numpyä¸­çš„nanå’Œinfï¼ˆéƒ½æ˜¯floatç±»å‹ï¼‰ nan(NAN,Nan):not a numberè¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­—.\nä»€ä¹ˆæ—¶å€™numpyä¸­ä¼šå‡ºç°nan\nå½“æˆ‘ä»¬è¯»å–æœ¬åœ°çš„æ–‡ä»¶ä¸ºfloatçš„æ—¶å€™ï¼Œå¦‚æœæœ‰ç¼ºå¤±ï¼Œå°±ä¼šå‡ºç°nanï¼ ã€€å½“åšäº†ä¸€ä¸ªä¸åˆé€‚çš„è®¡ç®—çš„æ—¶å€™(æ¯”å¦‚æ— ç©·å¤§(inf)å‡å»æ— ç©·å¤§)ï¼\ninf(-inf,inf):infinity,infè¡¨ç¤ºæ­£æ— ç©·ï¼Œ-infè¡¨ç¤ºè´Ÿæ— ç©·\nä»€ä¹ˆæ—¶å€™å›å‡ºç°infåŒ…æ‹¬ï¼ˆ-infï¼Œ+infï¼‰\næ¯”å¦‚ä¸€ä¸ªæ•°å­—é™¤ä»¥0ï¼Œï¼ˆpythonä¸­ç›´æ¥ä¼šæŠ¥é”™ï¼Œnumpyä¸­æ˜¯ä¸€ä¸ªinfæˆ–è€…-infï¼‰ Numpyä¸­çš„nançš„æ³¨æ„ç‚¹ t.sum(axis=None) #æ±‚å’Œ t.mean(a,axis=None) # å‡å€¼ å—ç¦»ç¾¤ç‚¹çš„å½±å“è¾ƒå¤§ np.median(t,axis=None) # ä¸­å€¼ï¼š t.max(axis=None) # æœ€å¤§å€¼ï¼š t.min(axis=None) # æœ€å°å€¼ï¼š np.ptp(t,axis=None) # æå€¼ å³æœ€å¤§å€¼å’Œæœ€å°å€¼åªå·® t.std(axis=None) # æ ‡å‡†å·®  ndarryç¼ºå¤±å€¼å¡«å……å‡å€¼ tä¸­å­˜åœ¨nanå€¼ï¼Œå¦‚ä½•æ“ä½œæŠŠå…¶ä¸­çš„nanå¡«å……ä¸ºæ¯ä¸€åˆ—çš„å‡å€¼\nt = array([[ 0., 1., 2., 3., 4., 5.], [ 6., 7., nan, 9., 10., 11.], [ 12., 13., 14., nan, 16., 17.], [ 18., 19., 20., 21., 22., 23.]]) def fill_ndarray(t1): #éå†æ¯ä¸€åˆ— for i in range(t1.shape[1]): temp_col = t1[:,i] #å½“å‰çš„ä¸€åˆ— nan_num = np.count_nonzero(temp_col!=temp_col) if nan_num != 0: #ä¸ä¸º0ï¼Œè¯´æ˜å½“å‰è¿™ä¸€åˆ—ä¸­æœ‰nan temp_not_nan_col = temp_col[temp_col==temp_col] #å½“å‰ä¸€åˆ—ä¸ä¸ºnançš„array # é€‰ä¸­å½“å‰ä¸ºnançš„ä½ç½®ï¼ŒæŠŠå€¼èµ‹å€¼ä¸ºä¸ä¸ºnançš„å‡å€¼ temp_col[np.isnan(temp_col)] = temp_not_nan_col.mean() return t1 if __name__ == '__main__': t1 = np.arange(12).reshape((4, 3)).astype(\u0026quot;float\u0026quot;) t1[1, 1:] = np.nan print(t1) t1 = fill_ndarray(t1) print(t1)  è¾“å‡ºç»“æœ\n[[ 0. 1. 2.]\t[[ 0. 1. 2.] [ 3. nan nan]\t[ 3. 6. 7.] [ 6. 7. 8.]\t[ 6. 7. 8.] [ 9. 10. 11.]]\t[ 9. 10. 11.]]  ","date":1611532800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611532800,"objectID":"366acf95216fb391a3aaa0d6d31f7922","permalink":"https://CoMath21.github.io/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%902/","publishdate":"2021-01-25T00:00:00Z","relpermalink":"/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%902/","section":"post","summary":"Pythonæ•°æ®åˆ†æä¹‹Numpy.","tags":["ç¼–ç¨‹è¯­è¨€","Python","æ•°æ®åˆ†æ","Numpy"],"title":"Pythonæ•°æ®åˆ†æï¼ˆäºŒï¼‰","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"å‡†å¤‡å·¥ä½œ ç¯å¢ƒå®‰è£…ï¼ˆä¸æ˜¯å¿…è¦ï¼Œåªæ˜¯ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„æ“ä½œåŠç»´æŠ¤ï¼‰ CONDAï¼š condaç±»ä¼¼äºnpmæˆ–mavençš„åŒ…ç®¡ç†å·¥å…·ï¼Œåªæ˜¯condaæ˜¯é’ˆå¯¹äºpythonçš„. å¯ä»¥å®‰è£…mincondaæˆ–anacondaè¿›è¡Œå®‰è£…ï¼›Condaæ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼›Anacondaæ˜¯ä¸€ä¸ªå‘è¡ŒåŒ….è™½ç„¶Condaä¸Anacondaä¸€èµ·åŒ…è£…ï¼Œä½†ä¸¤è€…æ˜¯å…·æœ‰ä¸åŒç›®æ ‡çš„ä¸åŒå®ä½“. CONDAå®‰è£…ï¼ˆä»¥Win64ä¸ºä¾‹ï¼‰: å¯ä»¥åˆ°å®˜ç½‘ï¼›ä¹Ÿå¯ä»¥åˆ°å›½å†…æ¸…åé•œåƒæºè¿›è¡Œä¸‹è½½é•œåƒæ–‡ä»¶ï¼š å®‰è£… ï¼š æ‰“å¼€å®‰è£…åŒ…ï¼Œä¸€è·¯next å³å¯. æ³¨æ„ï¼Œå‹¾é€‰ æ·»åŠ ç¯å¢ƒå˜é‡ å’Œ é»˜è®¤python3.6 ä½œä¸ºAnacondaçš„è¯­è¨€. å®‰è£…æˆåŠŸåæ‰“å¼€cmdå‘½ä»¤è¾“å…¥\u0026quot;python\u0026quot;æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯. æŸ¥çœ‹å½“å‰æœ‰å“ªäº›å¯ä»¥ä½¿ç”¨çš„pythonç‰ˆæœ¬ï¼šconda search \u0026ndash;full -name python å®‰è£…pythonç‰ˆæœ¬ï¼ˆå®‰è£…çš„3.6çš„ç‰ˆæœ¬ï¼‰ï¼šconda create \u0026ndash;name tensorflow python=3.6\nJupyter notebook jupyter notebook:ä¸€æ¬¾ç¼–ç¨‹/æ–‡æ¡£/ç¬”è®°/å±•ç¤ºè½¯ä»¶. å¯åŠ¨å‘½ä»¤:jupyter notebook ï¼ˆå·²ç»å®‰è£…Anaconda/åœ¨condaç¯å¢ƒä¸‹ï¼‰ Jupyter notebookå¥½å¤„  æå…¶é€‚åˆæ•°æ®åˆ†æ æ”¯æŒå¤šè¯­è¨€ åˆ†äº«ä¾¿æ·ï¼šæ”¯æŒä»¥ç½‘é¡µçš„å½¢å¼åˆ†äº«ï¼ŒGitHub ä¸­å¤©ç„¶æ”¯æŒ Notebook å±•ç¤ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ nbviewer åˆ†äº«ä½ çš„æ–‡æ¡£. å½“ç„¶ä¹Ÿæ”¯æŒå¯¼å‡ºæˆ HTMLã€PDFã€Markdownç­‰å¤šç§æ ¼å¼çš„æ–‡æ¡£. è¿œç¨‹è¿è¡Œï¼šåœ¨ä»»ä½•åœ°ç‚¹éƒ½å¯ä»¥é€šè¿‡ç½‘ç»œé“¾æ¥è¿œç¨‹æœåŠ¡å™¨æ¥å®ç°è¿ç®—. äº¤äº’å¼å±•ç°ï¼šä¸ä»…å¯ä»¥è¾“å‡ºå›¾ç‰‡ã€è§†é¢‘ã€æ•°å­¦å…¬å¼ï¼Œç”šè‡³å¯ä»¥å‘ˆç°ä¸€äº›äº’åŠ¨çš„å¯è§†åŒ–å†…å®¹ï¼Œæ¯”å¦‚å¯ä»¥ç¼©æ”¾çš„åœ°å›¾æˆ–è€…æ˜¯å¯ä»¥æ—‹è½¬çš„ä¸‰ç»´æ¨¡å‹. è¿™å°±éœ€è¦äº¤äº’å¼æ’ä»¶ï¼ˆInteractive widgetsï¼‰æ¥æ”¯æŒ.  åŸºç¡€çŸ¥è¯† matplotlib æœ€æµè¡Œçš„Pythonåº•å±‚ç»˜å›¾åº“ï¼Œä¸»è¦åšæ•°æ®å¯è§†åŒ–å›¾è¡¨,åå­—å–æäºMATLABï¼Œæ¨¡ä»¿MATLABæ„å»ºï¼›èƒ½å°†æ•°æ®è¿›è¡Œå¯è§†åŒ–,æ›´ç›´è§‚çš„å‘ˆç°ã€ä½¿æ•°æ®æ›´åŠ å®¢è§‚ã€æ›´å…·è¯´æœåŠ› matplotlibä½¿ç”¨æµç¨‹ï¼š\n æ˜ç¡®é—®é¢˜ é€‰æ‹©å›¾å½¢çš„å‘ˆç°æ–¹å¼ å‡†å¤‡æ•°æ® ç»˜å›¾å’Œå›¾å½¢å®Œå–„  ä¾‹. å‡è®¾ä¸€å¤©ä¸­æ¯éš”ä¸¤ä¸ªå°æ—¶(range(2,26,2))çš„æ°”æ¸©(â„ƒ)åˆ†åˆ«æ˜¯[15, 13, 14.5, 17, 20, 25, 26, 26, 27, 22, 18, 15].\nè®¾ç½®å›¾ç‰‡å¤§å° fig = plt.figure(figsize=(10,6),dpi=80)  figureå›¾å½¢å›¾æ ‡çš„æ„æ€ï¼Œåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ç”»çš„å›¾ï¼›é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªfigureå¹¶ä¼ é€’å‚æ•°ï¼Œèƒ½å¤Ÿåœ¨åå°è‡ªåŠ¨ä½¿ç”¨è¯¥figureå®ä¾‹ï¼›åœ¨å›¾åƒæ¨¡ç³Šçš„æ—¶å€™å¯ä»¥ä¼ å…¥dpiå‚æ•°ï¼ˆæ¯è‹±å¯¸ä¸Šåƒç´ ç‚¹çš„ä¸ªæ•°ï¼‰\nä¿å­˜åˆ°æœ¬åœ° ã€€ä¿å­˜éœ€è¦åœ¨ç»˜åˆ¶å›¾å½¢ä¹‹åä¿å­˜\nplt.show(\u0026quot;è·¯å¾„/åå­—.png\u0026quot;)  ä¹Ÿå¯ä»¥ä¿å­˜ä¸ºSVGè¿™ç§çŸ¢é‡å›¾çš„æ ¼å¼\næè¿°ä¿¡æ¯,æ¯”å¦‚xè½´å’Œyè½´è¡¨ç¤ºä»€ä¹ˆ,è¿™ä¸ªå›¾è¡¨ç¤ºä»€ä¹ˆ  plt.xlabel(\u0026quot;Xè½´\u0026quot;) plt.ylabel(\u0026quot;Yè½´\u0026quot;) plt.title(\u0026quot;Title\u0026quot;) # å­˜åœ¨ä¸­æ–‡ä¹±ç é—®é¢˜  è°ƒæ•´xæˆ–è€…yçš„åˆ»åº¦çš„é—´è·  è®¾ç½®xè½´çš„åˆ»åº¦ï¼ˆä¸€ä¸ªå‚æ•°ï¼‰  plt.xticks(x)  æƒ³è¦å¯†é›†ç‚¹å¯ä»¥è®¾ç½®ï¼š\n_xticks = [i/2 for I in range(4,49)] plt.xticks(_xticks) # æ˜¾å¾—è¿‡äºå¯†é›† plt.xticks(_xticks[::3]) # æ¯éš”3å–ä¸€ä¸ªï¼›åªæœ‰åˆ—è¡¨çš„æ—¶å€™æ‰èƒ½ä½¿ç”¨[ ]å–æ­¥é•¿   è®¾ç½®xè½´çš„åˆ»åº¦ï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰  plt.xticks(x,_xticks_labels) _x = x # intç±»å‹ _xtick_labels = [\u0026quot;hello,{}\u0026quot;.format(i) for i in _x] plt.xticks(_x,_xtick_labels)  formatå‡½æ•°: æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å‡½æ•° str.format()ï¼Œå®ƒå¢å¼ºäº†å­—ç¬¦ä¸²æ ¼å¼åŒ–çš„åŠŸèƒ½. åŸºæœ¬è¯­æ³•æ˜¯é€šè¿‡ {} å’Œ : ï¼Œæ¥ä»£æ›¿ä»¥å‰çš„%.\nformat å‡½æ•°å¯ä»¥æ¥å—ä¸é™ä¸ªå‚æ•°ï¼Œä½ç½®å¯ä»¥ä¸æŒ‰é¡ºåº.\n\u0026quot;{} {}\u0026quot;.format(\u0026quot;hello\u0026quot;, \u0026quot;world\u0026quot;) # ä¸è®¾ç½®æŒ‡å®šä½ç½®ï¼ŒæŒ‰é»˜è®¤é¡ºåº 'hello world'  format å‡½æ•°å¯ä»¥æ¥å—ä¸é™ä¸ªå‚æ•°,ä½ç½®ä¹Ÿå¯ä»¥è®¾ç½®å‚æ•°ï¼š\nprint(\u0026quot;ç½‘ç«™åï¼š{name}, åœ°å€ {url}\u0026quot;.format(name=\u0026quot;ç™¾åº¦\u0026quot;, url=\u0026quot;www.Baidu.com\u0026quot;))  æ”¹è¿›ï¼š\n_x = list(x) # intç±»å‹ _xtick_labels = [\u0026quot;hello,{}\u0026quot;.format(i) for i in _x]\t# å–æ­¥é•¿ä¸€æ ·ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²ä¸€ä¸€å¯¹åº”ï¼Œæ•°æ®é•¿åº¦ä¸€æ · plt.xticks(_x[::8],_xtick_labels[::8])  ä½¿ç”¨rotationå‚æ•°æ—‹è½¬\nplt.xticks(_x[::8],_xtick_labels[::8],rotation=45)  ä¸­æ–‡æƒ…å†µå¤„ç†ï¼š ã€€matplotlibé»˜è®¤ä¸æ”¯æŒä¸­æ–‡å­—ç¬¦ï¼Œå› ä¸ºé»˜è®¤çš„è‹±æ–‡å­—ä½“æ— æ³•æ˜¾ç¤ºæ±‰å­—\nå¦‚ä½•ä¿®æ”¹matplotlibçš„é»˜è®¤å­—ä½“?\né€šè¿‡matplotlib.rcå¯ä»¥ä¿®æ”¹,å…·ä½“æ–¹æ³•å‚è§æºç (windows/linux) import matplotlib font = {'family': \u0026quot;simhei\u0026quot;,'size': '10'} # é»‘ä½“ matplotlib.rc(\u0026quot;font\u0026quot;,**font)  é€šè¿‡matplotlib ä¸‹çš„font_managerå¯ä»¥è§£å†³(windows/linux/mac)\n# è®¾ç½®ä¸­æ–‡å­—ä½“ï¼ˆæŒ‡å®šçš„å­—ä½“æ–‡ä»¶è·¯å¾„ï¼Œç„¶ååœ¨æ˜¾ç¤ºä¸­æ–‡çš„åœ°æ–¹æ·»åŠ fontpropertiesï¼‰ my_font = font_manager.FontProperties(fname=\u0026quot;/System/Library/Fonts/PingFang.ttc\u0026quot;) plt.xticks(x[::5],_x_ticks[::5],rotation=90,fontproperties=my_font)  çº¿æ¡çš„æ ·å¼(æ¯”å¦‚é¢œè‰²,é€æ˜åº¦ç­‰) plt.grid()\t# ç»˜åˆ¶ç½‘æ ¼ plt.grid(alpha=0.6)\t# ç»˜åˆ¶ç½‘æ ¼ï¼Œå¹¶è°ƒæ•´é€æ˜åº¦  ç»˜åˆ¶é£æ ¼åŠæè¿° ã€€æè¿°ä¸åŒæ›²çº¿å«ä¹‰ï¼šåœ¨plot()ä¸­æ·»åŠ å‚æ•°label=\u0026quot;Name\u0026quot; å†æ·»åŠ è¯­å¥ï¼š\nplt.legend(loc=0)/plt.legend(prop=my_font) # locä½ç½®ï¼š0=best/upper left  å¸¸ç”¨ç»Ÿè®¡å›¾ ã€€ç»Ÿè®¡å›¾æ˜¯æ•°æ®åˆ†æå’Œæ•°å­¦å»ºæ¨¡æœ€ç›´æ¥ã€æœ€æœ‰æ•ˆçš„å¯è§†åŒ–å½¢å¼.è¿™é‡Œåªæ˜¯ç®€å•è¯´æ˜åœ¨Pythonä¸­ä¸åŒçš„ç»˜å›¾å‘½ä»¤.\n æŠ˜çº¿å›¾:ä»¥æŠ˜çº¿çš„ä¸Šå‡æˆ–ä¸‹é™æ¥è¡¨ç¤ºç»Ÿè®¡æ•°é‡çš„å¢å‡å˜åŒ–çš„ç»Ÿè®¡å›¾.  ç‰¹ç‚¹:èƒ½å¤Ÿæ˜¾ç¤ºæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ï¼Œåæ˜ äº‹ç‰©çš„å˜åŒ–æƒ…å†µ(å˜åŒ–).   ç›´æ–¹å›¾:ç”±ä¸€ç³»åˆ—é«˜åº¦ä¸ç­‰çš„çºµå‘æ¡çº¹æˆ–çº¿æ®µè¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„æƒ…å†µ. ä¸€èˆ¬ç”¨æ¨ªè½´è¡¨ç¤ºæ•°æ®èŒƒå›´ï¼Œçºµè½´è¡¨ç¤ºåˆ†å¸ƒæƒ…å†µ.  ç‰¹ç‚¹:ç»˜åˆ¶è¿ç»­æ€§çš„æ•°æ®,å±•ç¤ºä¸€ç»„æˆ–è€…å¤šç»„æ•°æ®çš„åˆ†å¸ƒçŠ¶å†µ(ç»Ÿè®¡).   æ¡å½¢å›¾:æ’åˆ—åœ¨å·¥ä½œè¡¨çš„åˆ—æˆ–è¡Œä¸­çš„æ•°æ®å¯ä»¥ç»˜åˆ¶åˆ°æ¡å½¢å›¾ä¸­.  ç‰¹ç‚¹:ç»˜åˆ¶è¿ç¦»æ•£çš„æ•°æ®,èƒ½å¤Ÿä¸€çœ¼çœ‹å‡ºå„ä¸ªæ•°æ®çš„å¤§å°,æ¯”è¾ƒæ•°æ®ä¹‹é—´çš„å·®åˆ«(ç»Ÿè®¡).   æ•£ç‚¹å›¾:ç”¨ä¸¤ç»„æ•°æ®æ„æˆå¤šä¸ªåæ ‡ç‚¹ï¼Œè€ƒå¯Ÿåæ ‡ç‚¹çš„åˆ†å¸ƒ,åˆ¤æ–­ä¸¤å˜é‡ä¹‹é—´æ˜¯å¦å­˜åœ¨æŸç§å…³è”æˆ–æ€»ç»“åæ ‡ç‚¹çš„åˆ†å¸ƒæ¨¡å¼.  ç‰¹ç‚¹:åˆ¤æ–­å˜é‡ä¹‹é—´æ˜¯å¦å­˜åœ¨æ•°é‡å…³è”è¶‹åŠ¿,å±•ç¤ºç¦»ç¾¤ç‚¹(åˆ†å¸ƒè§„å¾‹).    ç»˜åˆ¶æŠ˜çº¿å›¾ï¼šplt.plot(x,y) import numpy as np linear_data = np.arange(1, 9) quadratic_data = linear_data ** 2 plt.figure() plt.plot(linear_data, '-o', quadratic_data, '-o') # æ³¨æ„ï¼Œè¿™é‡ŒåªæŒ‡å®šäº†yè½´æ•°æ®ï¼Œxè½´çš„æ•°æ®æ˜¯matplotlibè‡ªåŠ¨ç”Ÿæˆçš„ # æ·»åŠ åæ ‡è½´æ ‡ç­¾åŠå›¾ä¾‹ plt.xlabel('x data') plt.ylabel('y data') plt.title('Line Chart Title') plt.legend(['legend1', 'legend2', 'legend3']) # å¡«å……ä¸¤ä¸ªlineé—´çš„åŒºåŸŸplt.gca().fill_between(x,y1,y2,color,é€æ˜åº¦) plt.gca().fill_between(range(len(linear_data)), linear_data, quadratic_data, facecolor='green', alpha=0.25)  æ³¨æ„ï¼š\n# å¯¹äºå­¦æœ¯åˆ¶å›¾ï¼Œå¯åœ¨æ ‡é¢˜ä¸­åŒ…å«latexè¯­æ³• ax = plt.gca() ax.set_title('Quadratic ($x^2$) vs. Linear ($x$)')  ç»˜åˆ¶æ•£ç‚¹å›¾ï¼šplt.scatter(x,y) å‡è®¾é€šè¿‡çˆ¬è™«ä½ è·å–åˆ°äº†åŒ—äº¬2016å¹´3,10æœˆä»½æ¯å¤©ç™½å¤©çš„æœ€é«˜æ°”æ¸©(åˆ†åˆ«ä½äºåˆ—è¡¨a,b),é‚£ä¹ˆæ­¤æ—¶å¦‚ä½•å¯»æ‰¾å‡ºæ°”æ¸©å’Œéšæ—¶é—´(å¤©)å˜åŒ–çš„æŸç§è§„å¾‹?\nfrom matplotlib import pyplot as plt import matplotlib # è®¾ç½®å­—ä½“æ ·å¼ font = {'family': \u0026quot;simhei\u0026quot;, 'size':'10'} matplotlib.rc(\u0026quot;font\u0026quot;,**font) # æ•°æ® y_3 = [11,17,16,11,12,11,12,6,6,7,8,9,12,15,14,17,18,21,16,17,20,14,15,15,15,19,21,22,22,22,23] y_10 = [26,26,28,19,21,17,16,19,18,20,20,19,22,23,17,20,21,20,22,15,11,15,5,13,17,10,11,13,12,13,6] # 3æœˆï¼Œ10æœˆèŒƒå›´ x_3 = range(1,32) x_10 = range(50,81) # åˆå¹¶æ¨ªåæ ‡ plt.figure(figsize=(14,8),dpi=80) # ç»˜åˆ¶æ•£ç‚¹å›¾ plt.scatter(x_3,y_3,label=\u0026quot;3æœˆä»½\u0026quot;) plt.scatter(x_10,y_10,label=\u0026quot;10æœˆä»½\u0026quot;) # è®¾ç½®xè½´ _x = list(x_3) + list(x_10) _xticks_labels = [\u0026quot;3æœˆ{}æ—¥\u0026quot;.format(i) for i in x_3] _xticks_labels += [\u0026quot;10æœˆ{}æ—¥\u0026quot;.format(i) for i in x_10] plt.xticks(_x[::3],_xticks_labels[::3],rotation=45) plt.legend(loc=\u0026quot;upper left\u0026quot;) # æ˜¾ç¤ºè®¾ç½® plt.xlabel(\u0026quot;æœˆä»½\u0026quot;) plt.ylabel(\u0026quot;æ¸©åº¦\u0026quot;) plt.title(\u0026quot;æ ‡é¢˜\u0026quot;) # å±•ç¤º plt.show()  ç»˜åˆ¶æ¡å½¢å›¾/æŸ±çŠ¶å›¾ï¼š plt.bar(x, y, width=0.2, color='orange') plt.bar(x, y, height=0.2, color='orange')  ä¾‹.\nfrom matplotlib import pyplot as plt import matplotlib # è®¾ç½®å­—ä½“æ ·å¼ font = {'family': \u0026quot;simhei\u0026quot;, 'size':'10'} matplotlib.rc(\u0026quot;font\u0026quot;,**font) a = [\u0026quot;æˆ˜ç‹¼2\u0026quot;,\u0026quot;é€Ÿåº¦ä¸æ¿€æƒ…8\u0026quot;,\u0026quot;åŠŸå¤«ç‘œä¼½\u0026quot;,\u0026quot;è¥¿æ¸¸ä¼å¦–ç¯‡\u0026quot;,\u0026quot;å˜å½¢é‡‘åˆš5ï¼šæœ€åçš„éª‘å£«\u0026quot;,\u0026quot;æ‘”è·¤å§ï¼çˆ¸çˆ¸\u0026quot;,\u0026quot;åŠ å‹’æ¯”æµ·ç›—5ï¼šæ­»æ— å¯¹è¯\u0026quot;,\u0026quot;é‡‘åˆšï¼šéª·é«…å²›\u0026quot;,\u0026quot;æé™ç‰¹å·¥ï¼šç»ˆæå›å½’\u0026quot;,\u0026quot;ç”ŸåŒ–å±æœº6ï¼šç»ˆç« \u0026quot;,\u0026quot;ä¹˜é£ç ´æµª\u0026quot;,\u0026quot;ç¥å·å¥¶çˆ¸3\u0026quot;,\u0026quot;æ™ºå–å¨è™å±±\u0026quot;,\u0026quot;å¤§é—¹å¤©ç«º\u0026quot;,\u0026quot;é‡‘åˆšç‹¼3ï¼šæ®Šæ­»ä¸€æˆ˜\u0026quot;,\u0026quot;èœ˜è››ä¾ ï¼šè‹±é›„å½’æ¥\u0026quot;,\u0026quot;æ‚Ÿç©ºä¼ \u0026quot;,\u0026quot;é“¶æ²³æŠ¤å«é˜Ÿ2\u0026quot;,\u0026quot;æƒ…åœ£\u0026quot;,\u0026quot;æ–°æœ¨ä¹ƒä¼Š\u0026quot;] b = [56.01,26.94,17.53,16.49,15.45,12.96,11.8,11.61,11.28,11.12,10.49,10.3,8.75,7.55,7.32,6.99,6.88,6.86,6.58,6.23] plt.figure(figsize=(12,8),dpi=80) x = range(len(a)) plt.bar(x, b, width=0.2, color='orange') plt.xticks(x, a, rotation=45) plt.show()  å‘ç°å­—æ•°é•¿çš„åå­—é”™ä½,æ¨ªå‘çš„æ¡å½¢å›¾,å°†\nplt.bar(x, y, width=0.2, color='orange')  æ”¹æˆ\nplt.bar(x, y, height=0.2, color='orange')  å†é€‚å½“è°ƒæ•´å…¶ä»–å‚æ•°. ä¾‹.å‡è®¾ä½ çŸ¥é“äº†åˆ—è¡¨aä¸­ç”µå½±åˆ†åˆ«åœ¨2017-09-14(b_14), 2017-09-15(b_15), 2017-09-16(b_16)ä¸‰å¤©çš„ç¥¨æˆ¿,ä¸ºäº†å±•ç¤ºåˆ—è¡¨ä¸­ç”µå½±æœ¬èº«çš„ç¥¨æˆ¿ä»¥åŠåŒå…¶ä»–ç”µå½±çš„æ•°æ®å¯¹æ¯”æƒ…å†µ,åº”è¯¥å¦‚ä½•æ›´åŠ ç›´è§‚çš„å‘ˆç°è¯¥æ•°æ®?\nfrom matplotlib import pyplot as plt import matplotlib # è®¾ç½®å­—ä½“æ ·å¼ font = {'family': \u0026quot;simhei\u0026quot;, 'size':'10'} matplotlib.rc(\u0026quot;font\u0026quot;,**font) a = [\u0026quot;çŒ©çƒå´›èµ·3ï¼šç»ˆæä¹‹æˆ˜\u0026quot;,\u0026quot;æ•¦åˆ»å°”å…‹\u0026quot;,\u0026quot;èœ˜è››ä¾ ï¼šè‹±é›„å½’æ¥\u0026quot;,\u0026quot;æˆ˜ç‹¼2\u0026quot;] b_16 = [15746,312,4497,319] b_15 = [12357,156,2045,168] b_14 = [2358,399,2358,362] bar_width = 0.2 plt.figure(figsize=(10,8),dpi=80) x_14 = list(range(len(a))) x_15 = [i+bar_width for i in x_14] x_16 = [i+bar_width for i in x_15] plt.bar(x_14, b_14, width=bar_width,label=\u0026quot;2017-09-14\u0026quot;) plt.bar(x_15, b_15, width=bar_width,label=\u0026quot;2017-09-15\u0026quot;) plt.bar(x_16, b_16, width=bar_width,label=\u0026quot;2017-09-16\u0026quot;) plt.xticks(x_15, a) plt.legend() plt.show()  å †å æŸ±çŠ¶å›¾\n# stack bar chart plt.figure() x_vals = list(range(len(linear_data))) plt.bar(x_vals, linear_data, width=0.3) plt.bar(x_vals, quadratic_data, width=0.3, bottom=linear_data)  ç»˜åˆ¶ç›´æ–¹å›¾ é¢‘æ•°åˆ†å¸ƒç›´æ–¹å›¾ ã€€å‡è®¾ä½ è·å–äº†250éƒ¨ç”µå½±çš„æ—¶é•¿(åˆ—è¡¨aä¸­),å¸Œæœ›ç»Ÿè®¡å‡ºè¿™äº›ç”µå½±æ—¶é•¿çš„åˆ†å¸ƒçŠ¶æ€(æ¯”å¦‚æ—¶é•¿ä¸º100åˆ†é’Ÿåˆ°120åˆ†é’Ÿç”µå½±çš„æ•°é‡,å‡ºç°çš„é¢‘ç‡)ç­‰ä¿¡æ¯,ä½ åº”è¯¥å¦‚ä½•å‘ˆç°è¿™äº›æ•°æ®?\nfrom matplotlib import pyplot as plt import matplotlib # è®¾ç½®å­—ä½“æ ·å¼ font = {'family': \u0026quot;simhei\u0026quot;, 'size':'10'} matplotlib.rc(\u0026quot;font\u0026quot;,**font) a=[131, 98, 125, 131, 124, 139, 131, 117, 128, 108, 135, 138, 131, 102, 107, 114, 119, 128, 121, ...] # è®¡ç®—ç»„è· dis = 3 num_bins = (max(a)-min(a))//dis plt.figure(figsize=(12,8),dpi=80) plt.hist(a, num_bins) plt.xticks(range(min(a),max(a)+dis,dis)) plt.grid() plt.show()  é¢‘ç‡åˆ†å¸ƒç›´æ–¹å›¾ plt.hist(a, num_bins,normed=1/True)  ä¾‹. åœ¨ç¾å›½2004å¹´äººå£æ™®æŸ¥å‘ç°æœ‰124 millionçš„äººåœ¨ç¦»å®¶ç›¸å¯¹è¾ƒè¿œçš„åœ°æ–¹å·¥ä½œ. æ ¹æ®ä»–ä»¬ä»å®¶åˆ°ä¸Šç­åœ°ç‚¹æ‰€éœ€è¦çš„æ—¶é—´,é€šè¿‡æŠ½æ ·ç»Ÿè®¡(æœ€åä¸€åˆ—)å‡ºäº†ä¸‹è¡¨çš„æ•°æ®,è¿™äº›æ•°æ®èƒ½å¤Ÿç»˜åˆ¶æˆç›´æ–¹å›¾ä¹ˆ? æ•°æ®è¢«ç»Ÿè®¡åï¼Œç»„è·ä¸åŒï¼ˆä¸èƒ½ä½¿ç”¨histï¼‰\nè§£å†³åŠæ³•ï¼šä½¿ç”¨barï¼ˆæ¡å½¢å›¾ï¼‰åœ¨è¿›è¡Œè°ƒæ•´.\nfrom matplotlib import pyplot as plt import matplotlib # è®¾ç½®å­—ä½“æ ·å¼ font = {'family': \u0026quot;simhei\u0026quot;, 'size':'10'} matplotlib.rc(\u0026quot;font\u0026quot;,**font) interval = [0,5,10,15,20,25,30,35,40,45,60,90] width = [5,5,5,5,5,5,5,5,5,15,30,60] quantity = [836,2737,3723,3926,3596,1438,3273,642,824,613,215,47] plt.figure(figsize=(14,8),dpi=80) # é»˜è®¤å®½åº¦æ˜¯0.8ï¼Œä¸ºäº†æ˜¯æ¡å½¢å›¾è¿èµ·æ¥ï¼Œä»¤width=1 plt.bar(range(12), quantity, width=1) # è®¾ç½®Xè½´çš„åˆ»åº¦â€”â€”ä¸ºäº†è®©èµ·ç‚¹ä»é›¶å¼€å§‹ï¼Œæ‰€ä»¥i-1 _x = [i-0.5 for i in range(13)] _xticks_labels = interval+[150] plt.xticks(_x, _xticks_labels) plt.grid(linestyle='--') plt.show()  å¤æ‚åˆ†æå›¾ # ä½¿ç”¨gridspecå’Œç›´æ–¹å›¾ç»˜åˆ¶ä¸€ä¸ªå¤æ‚åˆ†æå›¾ import matplotlib.gridspec as gridspec x = np.random.random(size=10000) y = np.random.normal(loc=0., scale=1., size=10000) plt.figure() gspec = gridspec.GridSpec(3, 3) top_hist = plt.subplot(gspec[0, 1:]) side_hist = plt.subplot(gspec[1:, 0]) lower_right = plt.subplot(gspec[1:, 1:]) lower_right.scatter(x, y) top_hist.hist(x, bins=100, normed=True) side_hist.hist(y, bins=100, orientation='horizontal', normed=True) side_hist.invert_xaxis()  çƒ­å›¾ ã€€å¯ç”¨äºä¸‰ç»´æ•°æ®å¯è§†åŒ–\nplt.imshow(arr) plt.hist2d() plt.colorbar() # æ·»åŠ é¢œè‰²æ¡  å…¶ä»–  matplotlibæ”¯æŒçš„å›¾å½¢æ˜¯éå¸¸å¤šçš„ï¼Œå¦‚æœæœ‰å…¶ä»–çš„éœ€æ±‚ï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹urlåœ°å€ï¼šhttp://matplotlib.org/gallery/index.html echartsä¸­å¯ä»¥çœ‹æ¡†æ¶å®ä¾‹ æ›´å¤šç»˜å›¾å·¥å…·ï¼š plotly:å¯è§†åŒ–å·¥å…·ä¸­çš„github,ç›¸æ¯”äºmatplotlibæ›´åŠ ç®€å•,å›¾å½¢æ›´åŠ æ¼‚äº®,åŒæ—¶å…¼å®¹matplotlibå’Œpandas ä½¿ç”¨ç”¨æ³•:ç®€å•,ç…§ç€æ–‡æ¡£å†™å³å¯ æ–‡æ¡£åœ°å€: https://plot.ly/python/  å¤‡æ³¨ï¼šå¦‚æœæƒ³ä½¿ç”¨å­å›¾ï¼Œç”¨subplotå‡½æ•°ï¼Œå¦‚æœå¯¹æ¯”å­å›¾åˆ™å¾äºšåæ ‡è½´ç›¸åŒï¼Œæ·»åŠ sharey=ï¼ˆè·Ÿå“ªå¼ å›¾å…±äº«åæ ‡è½´ï¼‰\nPandasç»˜å›¾ Pandasçš„DataFrameç»˜å›¾ å…ˆè½¬æ¢æˆdataframeæ ¼å¼è¿›è¡Œç”»å›¾\ndf.plot(kind=) pd.plotting.Tools pd.plotting.scatter_matrix() pd.plotting.parallel_coordinates()  ç»˜åˆ¶æŠ˜çº¿å›¾ np.random.seed(100) df = pd.DataFrame({'A': np.random.randn(365).cumsum(0), 'B': np.random.randn(365).cumsum(0) + 20, 'C': np.random.randn(365).cumsum(0) - 20}, index=pd.date_range('2017/1/1', periods=365)) df.plot()  ç»˜åˆ¶æ•£ç‚¹å›¾ df.plot('A', 'B', kind='scatter')  # é¢œè‰²(c)å’Œå¤§å°(s)æœ‰'B'åˆ—çš„æ•°æ®å†³å®š ax = df.plot('A', 'C', kind='scatter', c='B', s=df['B'], colormap='viridis')  ç›’å½¢å›¾ df.plot(kind='box')  æŸ±çŠ¶å›¾ df.plot(kind='hist', alpha=0.7) df.plot(kind='kde') # æ‹Ÿåˆåˆ†å¸ƒ  Seabornç»˜å›¾ seabornçš„å®‰è£…ï¼š\n1. conda install seaborn 2. pip install seaborn  ","date":1611273600,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611273600,"objectID":"bc0ba72ae8f8aed4b3757171e8e3b7df","permalink":"https://CoMath21.github.io/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%901/","publishdate":"2021-01-22T00:00:00Z","relpermalink":"/post/0-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%901/","section":"post","summary":"Pythonæ•°æ®åˆ†æå‰çš„å‡†å¤‡.","tags":["ç¼–ç¨‹è¯­è¨€","Python","æ•°æ®åˆ†æ"],"title":"Pythonæ•°æ®åˆ†æï¼ˆä¸€ï¼‰","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":["å­¦ä¹ ç¬”è®°","ç¼–ç¨‹è¯­è¨€"],"content":"  æ–‡å­—ç‰¹æ®Šæ ‡æ³¨\n  æ ‡é¢˜\nä½¿ç”¨æ–¹å¼ï¼š#ä¸€çº§æ ‡é¢˜\t##äºŒçº§æ ‡é¢˜\t######å…­çº§æ ‡é¢˜\nä¸€çº§æ ‡é¢˜ äºŒçº§æ ‡é¢˜ å…­çº§æ ‡é¢˜   ä¸‹åˆ’çº¿\nctrl+u\nä¸‹åˆ’çº¿\n  å¼ºè°ƒ\nä½¿ç”¨æ–¹å¼ï¼šåœ¨å¼ºè°ƒçš„å†…å®¹å‰åå„æ·»åŠ ä¸¤ä¸ª*\nctrl+b\nå¼ºè°ƒçš„å†…å®¹\n  æ–œä½“\nä½¿ç”¨æ–¹å¼ï¼šå†…å®¹å‰åå„æ·»åŠ ä¸€ä¸ª*\nctrl+i\næ–œä½“å†…å®¹\n  åˆ é™¤çº¿\nä½¿ç”¨æ–¹å¼ï¼šå†…å®¹å‰åå„æ·»åŠ ä¸¤ä¸ª~\nåˆ é™¤çº¿\n  é«˜äº®\nä½¿ç”¨æ–¹å¼ï¼šå†…å®¹å‰åå„æ·»åŠ ä¸¤ä¸ª=\n==é«˜äº®==\n    list\n  æœ‰åºåˆ—è¡¨\nä½¿ç”¨æ–¹å¼ï¼šæ•°å­—1+.\n      æ— åºåˆ—è¡¨\nä½¿ç”¨æ–¹å¼ï¼š+/-/*\n       table\nctrl+t\n   åºå· å§“å æˆç»© æ’å     1 å¼ ä¸‰ 100 1            åˆ†å‰²çº¿\nä½¿ç”¨æ–¹å¼ï¼šè¾“å…¥ä¸‰ä¸ªåŠä»¥ä¸Š*æˆ–-\n    æ’å…¥å…ƒç´ \n  å›¾ç‰‡\næ’å…¥æœ¬åœ°å›¾ç‰‡ï¼šç›´æ¥æŠŠå›¾ç‰‡æ‹–å…¥å³å¯ï¼› æ’å…¥ç½‘ç»œå›¾ç‰‡ï¼š! [å›¾ç‰‡æ ‡é¢˜] (å›¾ç‰‡é“¾æ¥)\n  é“¾æ¥\nä½¿ç”¨æ–¹å¼ï¼š[é“¾æ¥æç¤º] (é“¾æ¥åœ°å€)\nç™¾åº¦\n  æ•°å­¦å…¬å¼\nä½¿ç”¨æ–¹å¼ï¼š$$ å›è½¦ $$ x^2+x_1+7=0 $$\n  ä»£ç \nè¡Œå†…ä»£ç ï¼šä»£ç ä¸¤ç«¯å„åŠ ä¸€ä¸ª`\nâ€‹\tSystem.out.println();\nä»£ç å—ï¼šè¾“å…¥ä¸‰ä¸ª~ å›è½¦\npublic static void main(String[] args){ System.out.println(\u0026quot;hello world\u0026quot;); }      æ³¨æ„  ä½¿ç”¨ä¿¡å·ç¬¦å’Œæ–‡å­—é—´åŠ ä¸€ä¸ªç©ºæ ¼æˆ–å›è½¦ï¼Œå³å¯äº§ç”Ÿæ•ˆæœ å¼ºå¤§çš„å¯¼å‡ºåŠŸèƒ½  ","date":1611100800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611100800,"objectID":"6e4a2227ea2c55aa7d75770fac9a6ee8","permalink":"https://CoMath21.github.io/post/0-typora%E4%BD%BF%E7%94%A8/","publishdate":"2021-01-20T00:00:00Z","relpermalink":"/post/0-typora%E4%BD%BF%E7%94%A8/","section":"post","summary":"Typorå¿«é€Ÿå…¥é—¨ç®€ä»‹","tags":["ç¼–ç¨‹è¯­è¨€","Typora"],"title":"Typoraä½¿ç”¨","type":"post"},{"authors":["Xinæ€å¥½å…ˆç”Ÿ","CoMath"],"categories":null,"content":"ä¸€ä¸ªäººæœ€å¥½çš„ç”Ÿæ´»çŠ¶æ€ï¼Œæ˜¯è¯¥çœ‹ä¹¦æ—¶çœ‹ä¹¦ï¼Œè¯¥ç©æ—¶å°½æƒ…ç©ï¼Œçœ‹è§ä¼˜ç§€çš„äººæ¬£èµï¼Œçœ‹åˆ°è½é­„çš„äººä¹Ÿä¸è½»è§†ï¼Œæœ‰è‡ªå·±çš„å°ç”Ÿæ´»å’Œå°æƒ…è¶£ï¼Œä¸ç”¨å»æƒ³æ”¹å˜ä¸–ç•Œï¼ŒåŠªåŠ›å»æ´»å‡ºè‡ªå·±ã€‚æ²¡äººçˆ±æ—¶ä¸“æ³¨è‡ªå·±ï¼Œæœ‰äººçˆ±æ—¶ï¼Œæœ‰èƒ½åŠ›æ‹¥æŠ±å½¼æ­¤\n","date":1611100800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1611100800,"objectID":"83707939014fe3796e181283a66a9a76","permalink":"https://CoMath21.github.io/talk/demo/","publishdate":"2021-01-20T00:00:00Z","relpermalink":"/talk/demo/","section":"talk","summary":"æ€»è¦ç•™ç‚¹ä¸œè¥¿å ä¸ªåœ°æ–¹.","tags":[],"title":"æµ‹è¯•-Demo","type":"talk"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":-62135596800,"objectID":"c1d17ff2b20dca0ad6653a3161942b64","permalink":"https://CoMath21.github.io/people/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/people/","section":"","summary":"","tags":null,"title":"å…³äº","type":"widget_page"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":-62135596800,"objectID":"5fcc8730459b0823616811b99a622d2b","permalink":"https://CoMath21.github.io/category/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/category/","section":"","summary":"","tags":null,"title":"åˆ†ç±»","type":"widget_page"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":-62135596800,"objectID":"9a6cb9348361050ffbcc0117246adb56","permalink":"https://CoMath21.github.io/tag/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/tag/","section":"","summary":"","tags":null,"title":"æ ‡ç­¾","type":"widget_page"}]