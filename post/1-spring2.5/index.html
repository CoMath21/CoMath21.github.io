<!DOCTYPE html><html lang="zh-Hans" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.1 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="CoMath">

  
  
  
    
  
  <meta name="description" content="具体介绍Spring2.5的相关内容.">

  
  <link rel="alternate" hreflang="zh-Hans" href="https://CoMath21.github.io/post/1-spring2.5/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#1565c0">
  

  
  

  
  
  
  
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.9d711cebf380679328885aff8188d64e.css">

  




  

  


  
  

  

  
  <link rel="manifest" href="/index.webmanifest">
  

  <link rel="icon" type="image/png" href="/images/icon_hue90aa69698efeb53250d93a62bbb007f_97431_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hue90aa69698efeb53250d93a62bbb007f_97431_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://CoMath21.github.io/post/1-spring2.5/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="CoMath">
  <meta property="og:url" content="https://CoMath21.github.io/post/1-spring2.5/">
  <meta property="og:title" content="Spring2.5学习笔记 | CoMath">
  <meta property="og:description" content="具体介绍Spring2.5的相关内容."><meta property="og:image" content="https://CoMath21.github.io/post/1-spring2.5/featured.png">
  <meta property="twitter:image" content="https://CoMath21.github.io/post/1-spring2.5/featured.png"><meta property="og:locale" content="zh-Hans">
  
    
      <meta property="article:published_time" content="2021-01-30T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-01-30T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://CoMath21.github.io/post/1-spring2.5/"
  },
  "headline": "Spring2.5学习笔记",
  
  "image": [
    "https://CoMath21.github.io/post/1-spring2.5/featured.png"
  ],
  
  "datePublished": "2021-01-30T00:00:00Z",
  "dateModified": "2021-01-30T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Xin态好先生"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "CoMath",
    "logo": {
      "@type": "ImageObject",
      "url": "https://CoMath21.github.io/images/logo_hud8da91bfe93f3d7d35fd2296e35ef0bf_39934_192x192_fit_lanczos_2.png"
    }
  },
  "description": "具体介绍Spring2.5的相关内容."
}
</script>

  

  


  


  





  <title>Spring2.5学习笔记 | CoMath</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7264cf0eba3b66951b36da7d2cecf9c5.js"></script>

  

<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>搜索</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/images/logo_hud8da91bfe93f3d7d35fd2296e35ef0bf_39934_0x70_resize_lanczos_2.png" alt="CoMath"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="切换导航">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/images/logo_hud8da91bfe93f3d7d35fd2296e35ef0bf_39934_0x70_resize_lanczos_2.png" alt="CoMath"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        

        
        
        
        

        
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/"><span>首页</span></a>
        </li>

        
        

        

        
        
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>归档</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/category"><span>分类</span></a>
        </li>

        
        

        

        
        
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/tag"><span>标签</span></a>
        </li>

        
        

        

        
        
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/talk"><span>说说</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/people"><span>关于</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>浅色</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>深色</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>自动</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Spring2.5学习笔记</h1>

  

  


<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/admin/">Xin态好先生</a></span>, <span >
      <a href="/authors/comath/">CoMath</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    2021年1月30日
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 分钟阅读时长
  </span>
  

  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>, <a href="/category/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></span>
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 365px;">
  <div style="position: relative">
    <img src="/post/1-spring2.5/featured_hue828bf3ce515c631bbdcf324d11118aa_120097_720x0_resize_lanczos_2.png" alt="" class="featured-image">
    <span class="article-header-caption">CoMath</span>
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      <h2 id="1什么是spring">1、什么是Spring</h2>
<p>　　Spring是一个开源的控制反转(Inversion of Control,IoC)和面向切面(AOP)的容器框架，它的主要目的是简化企业开发. 用于配置bean,并维护bean之间关系的框架.</p>
<p>　　在SSH框架中spring充当了管理容器的角色. 我们都知道Hibernate用来做持久层，因为它将JDBC做了一个良好的封装，程序员在与数据库进行交互时可以不用书写大量的SQL语句. Struts是用来做应用层的，他它负责调用业务逻辑serivce层. 所以SSH框架的流程大致是：Jsp页面&mdash;-Struts&mdash;&mdash;Service（业务逻辑处理类）&mdash;Hibernate（左到右）. Struts负责控制Service（业务逻辑处理类），从而控制了Service的生命周期，这样层与层之间的依赖很强，属于耦合. 这时，使用spring框架就起到了控制Action对象（Strus中的）和Service类的作用，两者之间的关系就松散了，Spring的Ioc机制（控制反转和依赖注入）正是用在此处.</p>
<p>　　Spring的Ioc（控制反转和依赖注入）</p>
<p>　　控制反转：就是由容器控制程序之间的（依赖）关系，而非传统实现中，由程序代码直接操控. 应用本身不负责以来对象的而创建和维护，以来对象的创建和维护是由外部容器负责的. 这样控制权就有应用转到了外部容器，控制权的转移就是所谓反转.</p>
<p>　　依赖注入：组件之间的依赖关系由容器在运行期决定 ，由容器动态的将某种依赖关系注入到组件之中 .</p>
<h2 id="2为什么要使用springspring的好处">2、为什么要使用Spring（Spring的好处）</h2>
<ul>
<li>降低组建之间的耦合度，实现软件隔层之间的解耦；</li>
<li>可以使用容器提供的众多服务，如：事务管理服务、消息服务等等. 当我们使用容器管理服务时，开发人员就不在需要手工控制事务，也不需要处理复杂的事务传播；</li>
<li>容器提供单例模式支持，开发人员不需要自己编写实现代码；</li>
<li>容器提供AOP技术，利用这些类能够够加快应用的开发，如：JdbcTemplate、HibernateTemplate；</li>
<li>Spring对于主流的应用框架提供了集成支持，如：集成Hibernate、JPA、Struts等，这样更便于应用开发.</li>
</ul>
<p>轻量级与重量级概念的区分</p>
<p>　　主要看它使用了多少服务，使用服务越多，容器为java对象做的工作就越多，必然会影响到应用的发布时间或者运行性能.</p>
<p>　　对于Spring容器，它提供了很多服务，但这些服务并不是默认应用打开的，应用需要某种服务，还需要知名使用该服务，如果应用使用的服务很少，如：只是用了Spring的核心服务，那么我们可以认为此时应用属于轻量级的，如果使用了Spring提供的大部分服务，这时应用属于重量级的，目前EJB容器就因为它默认为应用提供了EJB规范中的所有功能，所以它属于重量级的.</p>
<h2 id="3配置spring所需要的jar包">3、配置spring所需要的jar包</h2>
<p>　　spring.jar是包含有完整发布的单个jar 包，spring.jar中包含除了spring-mock.jar里所包含的内容外其它所有jar包的内容，因为只有在开发环境下才会用到 spring-mock.jar来进行辅助测试，正式应用系统中是用不得这些类的.</p>
<p>　　除了spring.jar文件，Spring还包括有其它13个独立的jar包，各自包含着对应的Spring组件，用户可以根据自己的需要来选择组合自己的jar包，而不必引入整个spring.jar的所有类文件.</p>
<ol>
<li><b>spring-core.jar</b>：这个jar文件包含Spring框架基本的核心工具类，Spring其它组件要都要使用到这个包里的类，是其它组件的基本核心，当然你也可以在自己的应用系统中使用这些工具类.</li>
<li><b>spring-beans.jar</b>：这个jar文件是所有应用都要用到的，它包含访问配置文件、创建和管理bean以及进行Inversion of Control / Dependency Injection（IoC/DI）操作相关的所有类. 如果应用只需基本的IoC/DI支持，引入spring-core.jar及spring-beans.jar文件就可以了.</li>
<li><b>spring-aop.jar</b>：这个jar文件包含在应用中使用Spring的AOP特性时所需的类. 使用基于AOP的Spring特性，如声明型事务管理（Declarative Transaction Management），也要在应用里包含这个jar包.</li>
<li><b>spring-context.jar</b>：这个jar文件为Spring核心提供了大量扩展. 可以找到使用Spring ApplicationContext特性时所需的全部类，JDNI所需的全部类，UI方面的用来与模板（Templating）引擎如Velocity、FreeMarker、JasperReports集成的类，以及校验Validation方面的相关类.</li>
<li><b>spring-dao.jar</b>：这个jar文件包含Spring DAO、Spring Transaction进行数据访问的所有类. 为了使用声明型事务支持，还需在自己的应用里包含spring-aop.jar.</li>
<li><b>spring-hibernate.jar</b>：这个jar文件包含Spring对Hibernate 2及Hibernate 3进行封装的所有类.</li>
<li><b>spring-jdbc.jar</b>：这个jar文件包含对Spring对JDBC数据访问进行封装的所有类.</li>
<li><b>spring-orm.jar</b>：这个jar文件包含Spring对DAO特性集进行了扩展，使其支持 iBATIS、JDO、OJB、TopLink，因为Hibernate已经独立成包了，现在不包含在这个包里了. 这个jar文件里大部分的类都要依赖spring-dao.jar里的类，用这个包时你需要同时包含spring-dao.jar包.</li>
<li><b>spring-remoting.jar</b>：这个jar文件包含支持EJB、JMS、远程调用Remoting（RMI、Hessian、Burlap、Http Invoker、JAX-RPC）方面的类.</li>
<li><b>spring-support.jar</b>：这个jar文件包含支持缓存Cache（ehcache）、JCA、JMX、邮件服务（Java Mail、COS Mail）、任务计划Scheduling（Timer、Quartz）方面的类.</li>
<li><b>spring-web.jar</b>：这个jar文件包含Web应用开发时，用到Spring框架时所需的核心类，包括自动载入WebApplicationContext特性的类、Struts与JSF集成类、文件上传的支持类、Filter类和大量工具辅助类.</li>
<li><b>spring-webmvc.jar</b>：这个jar文件包含Spring MVC框架相关的所有类. 包含国际化、标签、Theme、视图展现的FreeMarker、JasperReports、Tiles、Velocity、XSLT相关类. 当然，如果你的应用使用了独立的MVC框架，则无需这个JAR文件里的任何类.</li>
<li><b>spring-mock.jar</b>：这个jar文件包含Spring一整套mock类来辅助应用的测试. Spring测试套件使用了其中大量mock类，这样测试就更加简单. 模拟HttpServletRequest和HttpServletResponse类在Web应用单元测试是很方便的.</li>
</ol>
<p>如何选择这些发布包，决定选用哪些发布包其实相当简单.</p>
<p>　　如果你正在构建Web应用并将全程使用Spring，那么最好就使用单个全部的spring.jar文件；
如果你的应用仅仅用到简单的Inversion of Control / Dependency Injection（IoC/DI）容器，那么只需spring-core.jar与spring-beans.jar即可；</p>
<p>　　如果你对发布的大小要求很高，那么就得精挑细选了，只取包含自己所需特性的jar文件了.
采用独立的发布包你可以避免包含自己的应用不需要的全部类. 当然你可以采用其它的一些工具来设法令整个应用包变小，节省空间的重点在于准确地找出自己所需的Spring依赖类，然后合并所需的类与包就可以了.</p>
<p>Eclispe有个插件叫ClassPath Helper可以帮你找找所依赖的类.</p>
<h2 id="4spring包依赖说明">4、Spring包依赖说明:</h2>
<ol>
<li>spring-core.jar需commons-collections.jar，spring-core.jar是以下其它各个的基本.</li>
<li>spring-beans.jar需spring-core.jar，cglib-nodep-2.1_3.jar</li>
<li>spring-aop.jar需spring-core.jar，spring-beans.jar，cglib-nodep-2.1_3.jar，aopalliance.jar</li>
<li>spring-context.jar需spring-core.jar，spring-beans.jar，spring-aop.jar，commons-collections.jar，aopalliance.jar</li>
<li>spring-dao.jar需spring-core.jar，spring-beans.jar，spring-aop.jar，spring-context.jar</li>
<li>spring-jdbc.jar需spring-core.jar，spring-beans.jar，spring-dao.jar</li>
<li>spring-web.jar需spring-core.jar，spring-beans.jar，spring-context.jar</li>
<li>spring-webmvc.jar需spring-core.jar/spring-beans.jar/spring-context.jar/spring-web.jar</li>
<li>spring-hibernate.jar需spring-core.jar，spring- beans.jar，spring-aop.jar，spring-dao.jar，spring-jdbc.jar，spring- orm.jar，spring-web.jar，spring-webmvc.jar</li>
<li>spring-orm.jar需spring-core.jar，spring-beans.jar，spring-aop.jar，spring-dao.jar，spring-jdbc.jar，spring-web.jar，spring-webmvc.jar</li>
<li>spring-remoting.jar需spring-core.jar，spring-beans.jar，spring- aop.jar，spring-dao.jar，spring-context.jar，spring-web.jar，spring- webmvc.jar</li>
<li>spring-support.jar需spring-core.jar，spring-beans.jar，spring-aop.jar，spring-dao.jar，spring-context.jar，spring-jdbc.jar</li>
<li>spring-mock.jar需spring-core.jar，spring-beans.jar，spring-dao.jar，spring-context.jar，spring-jdbc.jar</li>
</ol>
<p><b>一、只是使用spring框架</b></p>
<ul>
<li>
<p>dist\spring.jar</p>
</li>
<li>
<p>lib\jakarta-commons\commons-logging.jar</p>
</li>
<li>
<p>如果使用到了切面编程(AOP)，还需要下列jar文件</p>
<ul>
<li>
<p>lib\aspectj\aspectjweaver.jsr 和 aspectjrt.jar</p>
</li>
<li>
<p>lib\cglib\cglib-nodep-2.1_3.jar</p>
</li>
</ul>
</li>
<li>
<p>如果使用了JSR-250中的注解如<code>@Resource/@PostConstruct/@PreDestroy</code>,还需下列jar文件</p>
<ul>
<li>lib\j2ee\common-annotations.jar</li>
</ul>
</li>
</ul>
<p><b>二、只是使用spring框架若使用注解方式</b></p>
<p>　　只要加一些命名空间和开启解析器,并且@Resource需要加lib\j2ee\common-annotations.jar</p>
<p><code>&lt;context:annotation-config/&gt;</code>打开处理器</p>
<p><b>三、要自动扫描</b></p>
<p>　　只要开启解析器和一些命名空间
<code>&lt;context:component-scan base-package=&quot;&quot;/&gt;</code></p>
<p><b>四、spring框架采用aop编程</b></p>
<p>需要导入一些命名空间
xmlns:aop&hellip;&hellip;.
<code>&lt;aop:aspectj-autoproxy/&gt;</code>开启解析器
如果使用到了切面编程(AOP)，还需要下列jar文件</p>
<ul>
<li>lib\aspectj\aspectjweaver.jsr 和 aspectjrt.jar</li>
<li>lib\cglib\cglib-nodep-2.1_3.jar</li>
</ul>
<p><b>五、spring+Jdbc开发</b></p>
<p>　　需要数据源文件 lib\jakarta-commons\commons-pool.jar、lib\jakarta-commons\commons-dbcp.jar</p>
<ol>
<li>spring文件 ：
dist\spring.jar、
lib\jakarta-commons\commons-logging.jar</li>
<li>jdbc驱动文件 mysql**** sql*** ：
导入tx命名空间
&lt;tx:annotation-driven transaction-manager=&quot;&quot;/&gt;
对事务注解的解析器</li>
</ol>
<p><b>六、spring2.5+hibernate3.3+struts1.3</b></p>
<ol>
<li>hibernate核心包</li>
</ol>
<ul>
<li>hibernate3.jar</li>
<li>lib\required*.jar</li>
<li>lib\optional\ehcache-1.2.3.jar (二级缓存文件)</li>
<li>hibernate注解包
l+ ib\test\slf4j-log4j12.jar</li>
</ul>
<ol start="2">
<li>spring包</li>
</ol>
<ul>
<li>dist\spring.jar</li>
<li>lib\jakarta-commons\commons-logging.jar 和commons-pool.jar、commons-dbcp.jar(后为数据源文件)</li>
<li>dist\modules\spring-webmvc-struts.jar (与struts1的集成)</li>
<li>lib\aspectj\aspectjweaver.jsr 和 aspectjrt.jar (Aop文件)</li>
<li>lib\cglib\cglib-nodep-2.1_3.jar     (Aop文件)</li>
<li>lib\j2ee\common-annotations.jar     (注解文件)</li>
<li>lib\log4j\log4j-1.2.15.jar</li>
</ul>
<ol start="3">
<li>sturs1.3.8</li>
</ol>
<p>　　建议将jstl-1.0.2.jar和standard-1.0.2.jar文件更换为1.1版本，此时JSTL文件．还有spring已存在antlr-2.7.6.jar文件所以将struts中的antlr-2.7.6.jar文件删除以免冲突．</p>
<p><b>七、spring2.5+hibernate3.3+struts2整合开发</b></p>
<p>　　struts2文件lib里面所有不带-plugin结尾的jar文件，但除了struts2-spring-plugin-2.0.11.1.jar.</p>
<h2 id="5实例化spring容器">5、实例化Spring容器</h2>
<h3 id="51实例化spring容器的方式有两种">5.1、实例化Spring容器的方式有两种：</h3>
<p>方法一：
在类路径下寻找配置文件来实例化容器</p>
<pre><code>ApplicationContext ctx =
 new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
//1.创建Spring的IOC容器对象ApplicationContext代表IOC容器
// ClassPathXmlApplicationContext:类路径下的XML格式的配置文件
ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
//2.从IOC容器对象中获取Bean实例
HelloWorld helloWorld2 = (HelloWorld) ctx.getBean(&quot;helloworld&quot;);
//3.调用hello方法
helloWorld2.hello();
</code></pre>
<p>方法二：
在文件内系统路径下寻找配置文件来实现容器：</p>
<pre><code>ApplicationContext ctx =
new FileSystemXmlApplicationContext(&quot;beans.xml&quot;);
</code></pre>
<p>Spring配置文件可以指定多个，可以通过String数组传入.
配置Spring环境</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
  xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
  xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;
&lt;/beans&gt;
</code></pre>
<p><img src="./1.png" alt="png">
测试是否搭建成功:项目右键新建Junit Test Case.
<img src="./2.png" alt="png">
<img src="./3.png" alt="png"></p>
<h2 id="6如何将业务bean交给spring管理">6、如何将业务bean交给Spring管理</h2>
<p>　　在Spring配置中添加<code>&lt;bean id=”名称” name=”名称” class=””&gt;&lt;/bean&gt;</code>，此时bean就可以由Spring容器帮助创建和维护，当我们要用到bean的时候只需要从Spring容器中获取即可，获取的时候可以用ApplicationContext.getBean(id);（返回值为 Object），可以通过bean的接口对其进行引用，之后即可调用其方法.</p>
<p>注意：id中不能包含特殊字符例如<code>“/”</code>，而name中可以包含. 如果包含特殊字符则用<code>name=””</code>；其他可以用<code>id=””</code>.</p>
<p>实例：首先创建一个业务bean&ndash;PersonServiceBean，建议使用面向接口编程（要实现软件之间的解耦），所以可以抽取接口，然后交给Spring管理.
<img src="./4.png" alt="png"></p>
<h2 id="7三种实例化bean的方式">7、三种实例化bean的方式：</h2>
<h3 id="71实用类构造器实例化">7.1、实用类构造器实例化</h3>
<pre><code>&lt;bean id=&quot;personService&quot;
  class=&quot;com.haibao.service.impl.PersonServiceBean&quot;/&gt; 
&lt;!--  配置bean
  class:bean的全类名，通过反射的方式在IOC容器中创建Bean，所以Bean中必须有无参构造器
  id:表示容器中的bean唯一
--&gt;
</code></pre>
<h3 id="72使用静态工厂方法实例化">7.2、使用静态工厂方法实例化</h3>
<pre><code>&lt;bean id=&quot;personService2&quot; 
  class=&quot;com.haibao.service.impl.PersonServiceFactory&quot; 
  factory-method=&quot;createPersonService&quot;/&gt;
</code></pre>
<p><img src="./5.png" alt="png"></p>
<pre><code>public class PersonServiceFactory {
  public static PersonServiceBean createPersonService() {
    return new PersonServiceBean();
  }
}
</code></pre>
<h3 id="73使用实例化工厂实例化">7.3、使用实例化工厂实例化</h3>
<pre><code>&lt;bean id=&quot;personServiceFactory&quot; 
  class=&quot;com.haibao.service.impl.PersonServiceFactory&quot;/&gt;
&lt;bean id=&quot;personService3&quot; 
factory-bean=&quot;personServiceFactory&quot; 
factory-method=&quot;createPersonService2&quot;/&gt;
public class PersonServiceFactory {
  public PersonServiceBean createPersonService() {
    return new PersonServiceBean();
  }
}
</code></pre>
<h2 id="8bean的作用域及bean的生命周期">8、Bean的作用域及bean的生命周期</h2>
<p>　　.sigleton（单例模式，Spring容器启动的时候bean就被实例化）
在每个Spring IoC容器中一个bean定义只有一个对象实例. 默认情况下会在容器启动时初始化bean，我们可以指定Bean节点的laz-init=”true”来延迟初始化bean，这时候，只有第一次获取bean才会初始化bean.
例如：<code>&lt;bean id=”XXX” class=”XXX” lazy-init=“true”/&gt; </code>,
（设置lazy-init=“true”后Spring容器启动的时候bean不会被实例化）.如果想所有的应用都应用延迟初始化，可以在根节点beans设置default-lazy-init=”true”;即：<code>&lt;bean id=”XXX” class=”XXX” default-lazy-init=“true”/&gt;</code>,.prototype(调用getBean()方法的时候bean才会被实例化).每次从容器获取bean都是新对象.
<code>&lt;bean id=”XXX” class=”XXX” scope=” prototype”/&gt;</code>.</p>
<p>初始化：初始化方法可以在bean的配置中用<code>init-method=&quot;&quot;</code>方法调用初始化函数.</p>
<p>销毁：默认情况下只有Spring容器北校关闭才会销毁. 可以在bean的配置中用<code>destroy-method=&quot;&quot;</code>方法销毁.</p>
<h2 id="9依赖注入对象">9、依赖注入对象：</h2>
<p>　　所谓依赖注入是指：在运行期，外部容器动态的将以来对象注入到组件.</p>
<p>基本类型对象注入：</p>
<pre><code>&lt;bean id=&quot;orderService&quot; class=&quot;orderServiceBean&quot;&gt;
  //构造器注入
  &lt;constructor-arg index=&quot;0&quot; type=&quot;java.lang.String&quot; value=&quot;XXX&quot;&gt;
  //属性setter方法注入
  &lt;property name=&quot;name&quot; value=&quot;value&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p>方式一：</p>
<pre><code>&lt;bean id=&quot;orderDao&quot; class=&quot;PersonDaoBean&quot;/&gt;
&lt;bean id=&quot;orderService&quot; class=&quot;PersonServiceBean&quot;&gt;
  &lt;property name=&quot;orderDao&quot; ref=&quot;orderDao&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
// ref：指向其他bean
</code></pre>
<p>方式二：(使用内部bean，但该bean不能被其他bean使用)</p>
<pre><code>&lt;bean id=&quot;orderService&quot; class=&quot;PersonServiceBean&quot;&gt;
  &lt;property name=&quot;orderDao&quot; ref=&quot;orderDao&quot;&gt;
&lt;bean class=&quot; orderDao&quot;/&gt;
&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>当我们把依赖对象注入交给外部容器负责创建，namePersonServiceBean类可以改成：</p>
<pre><code>public class PersonServiceBean implements PersonService {
  private  PersonDao personDao;
  public PersonDao getPerson(){
    return personDao;
}
	
  public void getPersonDao(PersonDao personDao){
    this.personDao = personDao;
  }
	
  public void save(){
    personDao.add();
  }
}

public class PersonDaoBean implements PersonDao{
  public void add(){
    System.out.println(&quot;add()方法&quot;);
  }
}
</code></pre>
<p>beans.xml配置中：</p>
<pre><code>&lt;bean id=&quot;personDaoname&quot; class=&quot;PersonDaoBean&quot;/&gt;
&lt;bean id=&quot;personService&quot; class=&quot;PersonServiceBean&quot;&gt;
  &lt;property name=&quot;personDao&quot; ref=&quot;personDaoname &quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li>属性setter方法注入</li>
</ul>
<p>对基本类型进行注入：</p>
<pre><code>&lt;property name=&quot;name&quot; value=&quot;value&quot;/&gt;
</code></pre>
<p>集合类型的装配</p>
<pre><code>public calss orderServiceBean{
  private Set&lt;String&gt; sets = new HashSet&lt;Striing&gt;();
  private List&lt;String&gt; lists = new ArrayList&lt;Striing&gt;();
  private Properties properties = new Properties ();
  private Map&lt;String,String&gt; maps = new HashMap&lt;String,Striing&gt;();
  // 一定要生成getter、setter方法
} 
&lt;property name=&quot;sets&quot;&gt;
  &lt;set&gt;
    &lt;value&gt;值1&lt;/value&gt;
    &lt;value&gt;值2&lt;/value&gt;
    &lt;value&gt;值3&lt;/value&gt;.
  &lt;/set&gt;
&lt;property/&gt;
&lt;property name=&quot;lists&quot;&gt;
  &lt;list&gt;
    &lt;value&gt;值1&lt;/value&gt;
    &lt;value&gt;值2&lt;/value&gt;
    &lt;value&gt;值3&lt;/value&gt;
  &lt;/list&gt;
&lt;property/&gt;
 

&lt;property name=&quot;properties&quot;&gt;
  &lt;props&gt;
    &lt;prop key=&quot;key1&quot;&gt;值1&lt;/prop&gt;
    &lt;prop key=&quot;key2&quot;&gt;值2&lt;/prop&gt;
    &lt;prop key=&quot;key3&quot;&gt;值3&lt;/prop&gt;.
  &lt;/props&gt;
&lt;property/&gt;
&lt;property name=&quot;maps&quot;&gt;
  &lt;map&gt;
    &lt;entry key=&quot;key1&quot; value=&quot;1&quot;/&gt;
    &lt;entry key=&quot;key2&quot; value=&quot;2&quot;/&gt;
    &lt;entry key=&quot;key3&quot; value=&quot;3&quot;/&gt;.
  &lt;/map&gt;
&lt;property/&gt;
</code></pre>
<ul>
<li>构造器参数注入</li>
</ul>
<pre><code>&lt;constructor-arg index=&quot;0&quot; type=&quot;java.lang.String&quot; value=&quot;XXX&quot;/&gt;
&lt;constructor-arg index=&quot;1&quot; type=&quot;java.lang.String&quot; value=&quot;XXX&quot;/&gt;
</code></pre>
<ul>
<li>使用Field注入（用于注解方式）
　　注入以来对象可以采用手工装配或自动装配，在实际应用中建议使用手工装配，因为自动装配会产生未知情况，开发人员无法预见最终结果.</li>
</ul>
<h3 id="91依赖注入---手工装配">9.1、依赖注入&mdash;手工装配</h3>
<p>手工装配依赖对象，在这种方式中有两种变成方式</p>
<ol>
<li>在xml配置文件中通过bean节点下配置. 如：</li>
</ol>
<pre><code>&lt;bean id=&quot;orderDao&quot; class=&quot;PersonDaoBean&quot;/&gt;
&lt;bean id=&quot;orderService&quot; class=&quot;PersonServiceBean&quot;&gt;
  &lt;property name=&quot;orderDao&quot; ref=&quot;orderDao&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<ol start="2">
<li>在java代码中使用@Autowire或@Resource注解方式进行装配. 但我们需要在xml配置文件中配置以下信息：</li>
</ol>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;			 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
  xmlns:context=http://www.springframework.org/schema/context 	xsi:schemaLocation=&quot;http://www.  springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;&gt;
&lt;context:annotation-config/&gt;
&lt;/beans&gt;
</code></pre>
<p>这个配置也是注册了多个对注释进行解析处理的处理器：</p>
<ul>
<li>AutwiredAnnotationBeanProcessor</li>
<li>CommonAnnotationBeanPostProcessor</li>
<li>PersistenceAnnotationBeanPostProcessor</li>
<li>RequiredAnnotationBeanProcessor</li>
</ul>
<p><font color=red>注：@Resource注解在Spring安装目录下的lib\j2ee\common-annotation.jar</font>
　　在java代码中使用@Autowire或@Resource注解方式进行装配，这两个注解的区别是：@Autowire默认按类型装配，@Resource，默认按名称装配，当找不到与名称匹配的bean才会按类型装配.</p>
<pre><code>@Autowire
private PersonDao personDao;//用于字段上
@Autowire
public void setOrderDao(PersonDao personDao){
//用于属性的setter方法上
	this.orderDao = orderDao；
}
</code></pre>
<p>@Autowire注解是按类型装配依赖对象，默认情况下他要求对象必须存在，如果允许为null值，可以设置它的required属性为false. 如果想使用按名称装配，可以结合@Qualifier注解一起使用. 如下：</p>
<pre><code>@Autowire @Qualifier(“personDaoBean”)
private PersonDao personDao；
</code></pre>
<p>@Resource注解和@Autowire一样，也可以标注在字段或属性的setter方法上，但他默认按名称装配. 名称可以通过@Resource的name属性指定，如果没有指定name属性，当注解标注在字段上，即默认取字段的名称作为bean名称寻找依赖对象，当注解标注在属性的setter方法上，即默认取属性名作为bean名称寻找依赖对象.</p>
<pre><code>@Resource(name=”personDaoBean”)
private PersonDao personDao;//用于字段上
</code></pre>
<p>注意：如果没有指定name属性，并且按照默认名称仍然找不到依赖对象时，@Resource注解会回退到安类型装配，但一旦指定了name属性，就只能按名称装配了.</p>
<h2 id="10aop--代理对象主要用在权限">10、AOP&ndash;代理对象（主要用在权限）</h2>
<ul>
<li>环绕通知</li>
<li>前置通知</li>
<li>后置通知</li>
<li>例外通知</li>
<li>最终通知</li>
</ul>
<pre><code>public Object invoke(Object proxy, Method method,Object[] args)
    throws Throwable {
  PersonServiceBean bean = (PersonServiceBean) this.targetObject;
  Object result = null;//环绕通知
  if(bean.getUser () != null {
    // ..... advice ( )--&gt;前置通知
    try {
      result = method.invoke (targetObject, args);
        //afteradvice() --&gt;后置通知
  } catch(RuntimeException e){
      // exceptionadvice ()--&gt;例外通知
  }finally{
    // tinallyadvice () : --&gt;最终通知
  }
    }
  return result;
}
</code></pre>
<h3 id="101aop中的概念基于注解方式声明切面">10.1、AOP中的概念：（基于注解方式声明切面）</h3>
<ol>
<li>Aspect(切面)：指横切性关注点的抽象即为切面，它与类相似，只是两者的关注点不一样，类是对物体特征的抽象，而切面是横切性关注点的抽象.</li>
<li>joinpoint(连接点)：所谓连接点是指那些被拦截到的点. 在spring中，这些点指的是方法，因为spring只支持方法类型的连接点，实际上joinpoint还可以是field或类构造器.</li>
<li>Pointcut(切入点)：所为切入点是我们要对那些joinpoint进行拦截的定义.</li>
</ol>
<p>注解：</p>
<pre><code>@Pointcut (“execution(* com.haibao.service.*.*(..))”)
private void anyMethod(){}//声明一个切入点
</code></pre>
<p><font color=red>说明</font></p>
<pre><code>&lt;!-- 配置事务拦截器拦截哪些类的哪些方法,一般设置成拦截Service --&gt;
&lt;aop:config&gt;
  &lt;aop:pointcut expression=&quot;execution(* com.xy.service.*.*(..))&quot;
                              id=&quot;allDaoMethod&quot; /&gt;
  &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;allDaoMethod&quot; /&gt; 
&lt;/aop:config&gt;
</code></pre>
<p>表示com.xy.service包下的所有方法为为事务管理.</p>
<p>execution(<font color=green>*</font> com.aptech.jb.epet.dao.hibimpl.<font color=red>*</font>.<font color=blue>*</font>(..))
这是com.aptech.jb.epet.dao.hibimpl包下所有的类的所有方法.</p>
<ul>
<li>第一个<font color=green>*</font>代表所有的返回值类型</li>
<li>第二个<font color=red>*</font>代表所有的类</li>
<li>第三个<font color=blue>*</font>代表类所有方法 最后一个..代表所有的参数.</li>
</ul>
<p><strong>一些常见切入点表达式的例子：</strong></p>
<ul>
<li>任意公共方法的执行：<code>execution(public * *(..))</code></li>
<li>任何一个以“set”开始的方法的执行：<code>execution(* set*(..))</code></li>
<li>AccountService 接口的任意方法的执行：
<code>execution(* com.xyz.service.AccountService.*(..))</code></li>
<li>定义在service包里的任意方法的执行：
<code>execution(* com.xyz.service.*.*(..))</code></li>
<li>定义在service包或者子包里的任意类的任意方法的执行：
<code>execution(* com.xyz.service..*.*(..))</code></li>
</ul>
<ol start="4">
<li>Advice(通知)：所谓通知是指拦截到joinpoint之后所做的事情，通知分为前置通知（@Before(“anyMethod()”)）、</li>
</ol>
<ul>
<li>后置通知（@AfterReturning(“anyMethod()”)）、</li>
<li>最终通知（@After(“anyMethod()”)）、</li>
<li>例外通知（@AfterThrowing(“anyMethod()”)）、</li>
<li>环绕通知（@Around(“anyMethod()”)）.</li>
</ul>
<pre><code>public Object doBasicProfiling(ProceedingJoinPoint p) throws Throwable{
  Object result = p.proceed();//必须执行该方法
return result;
}
</code></pre>
<p>Target(目标对象)：代理的目标对象.</p>
<p>Weave(织入)：指将aspects应用到target对象并导致proxy对象创建的过程称为织入.</p>
<p>Introduction(引入)：在不修改代码的前提下，Introduction可以在运行期间为类动态的添加一些方法或Field.</p>
<h3 id="102基于xml配置方式声明切面">10.2、基于XML配置方式声明切面</h3>
<pre><code>&lt;aop:aspectj-autoproxy /&gt;
  &lt;bean id=&quot;aspetbean&quot; class=&quot;...&quot;&gt;&lt;/bean&gt;
  &lt;aop:config&gt;
    &lt;aop:aspect id=&quot;asp&quot; ref=&quot;aspetbean&quot;&gt;
      &lt;!-- 定义切入点 id=名称 expression 表示拦截... --&gt;
      &lt;aop:pointcut id=&quot;mycut&quot; expression=  &quot;execution(* com.xy.service.*.*(..))&quot;/&gt;
      &lt;!-- 前置通知 --&gt;
      &lt;aop:before pointcut-ref=&quot;mycut&quot;  method=&quot;&quot;/&gt;
      &lt;!-- 后置通知 --&gt;
      &lt;aop:after-returning pointcut-ref=  &quot;mycut&quot;  method=&quot;&quot;/&gt;
      &lt;!-- 例外通知 --&gt;
      &lt;aop:after-throwing pointcut-ref=&quot;mycut&quot;  method=&quot;&quot;/&gt;
      &lt;!-- 最终通知 --&gt;
      &lt;aop:after pointcut-ref=&quot;mycut&quot;  method=&quot;&quot;/&gt;
      &lt;!-- 环绕通知 --&gt;
      &lt;aop:around pointcut-ref=&quot;mycut&quot;  method=&quot;&quot;/&gt;
  &lt;/aop:aspect&gt;
&lt;/aop:config&gt;
</code></pre>
<h2 id="11springjdbc组合开发">11、Spring+JDBC组合开发</h2>
<p>步骤：</p>
<ol>
<li>配置数据源，如：
依赖的jar文件： commons-dbcp.jar、
commons-logging.jar、
commons-pool.jar</li>
</ol>
<pre><code>&lt;bean id=&quot;dataSource&quot; 
class=&quot;org.apach.commons.dbcp.BasicDataSource&quot; 
destroy-method=&quot;close&quot;&gt;
  &lt;property name=&quot;driveClassName&quot; 
value=&quot;org.gjt.mm.mysql.Driver&quot;/&gt;
&lt;property name=&quot;url&quot;
value=&quot;jdbc:mysql://localhost:3306/dbname?useUnicode=true
转义&amp;←&amp;amp;characterEncoding=UTF-8&quot;/&gt;
&lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
&lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;!-- 连接池启动时的初始值 --&gt;
&lt;property name=&quot;initialSize&quot; value=&quot;1&quot;/&gt;
&lt;!-- 连接池最大值 --&gt;
&lt;property name=&quot;maxActive&quot; value=&quot;500&quot;/&gt;
&lt;!-- 最大空闲值，当经历过一个高峰时间后，连接池可以慢慢将已经用不到的连接慢慢释放一部分，一直减少到maxIdle为止 --&gt;
&lt;property name=&quot;maxIdle&quot; value=&quot;2&quot;/&gt;
&lt;!-- 最小空闲值，当空闲的连接数少于阙值时，连接池会预申请去一些连接，以免洪峰来时不及申请 --&gt;
&lt;property name=&quot;minIdle&quot; value=&quot;1&quot;/&gt;
&lt;/bean&gt;
或者使用属性文件保存参数值
&lt;context:property-placeholder location=&quot;classpath.properties&quot;/&gt;
classpath:在类路径下
&lt;bean id=&quot;dataSource&quot; 
class=&quot;org.apach.commons.dbcp.BasicDataSource&quot; 
destroy-method=&quot;close&quot;&gt;
  &lt;property name=&quot;driveClassName&quot; value=&quot;${ driveClassName}&quot;/&gt;
&lt;property name=&quot;url&quot;value=&quot;${ url }&quot;/&gt;
&lt;property name=&quot;username&quot; value=&quot;${ username}&quot;/&gt;
&lt;property name=&quot;password&quot; value=&quot;${ password }&quot;/&gt;
&lt;!-- 连接池启动时的初始值 --&gt;
&lt;property name=&quot;initialSize&quot; value=&quot;${ initialSize }&quot;/&gt;
&lt;!-- 连接池最大值 --&gt;
&lt;property name=&quot;maxActive&quot; value=&quot;${ maxActive }&quot;/&gt;
&lt;!-- 最大空闲值，当经历过一个高峰时间后，连接池可以慢慢将已经用不到的连接慢慢释放一部分，一直减少到maxIdle为止 --&gt;
&lt;property name=&quot;maxIdle&quot; value=&quot;${ maxIdle }&quot;/&gt;
&lt;!-- 最小空闲值，当空闲的连接数少于阙值时，连接池会预申请去一些连接，以免洪峰来时不及申请 --&gt;
&lt;property name=&quot;minIdle&quot; value=&quot;${ minIdle }&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<ol start="2">
<li>配置事务：配置事务时，需要在XML配置文件中引入声明事务的tx命名空间，事务的配置方式有两种：注解方式和基于XML配置方式.</li>
</ol>
<h3 id="111采用注解方式配置事务在xml文件中配置事务管理器">11.1、采用注解方式配置事务：在XML文件中配置事务管理器</h3>
<pre><code>&lt;bean id=&quot;txManager&quot; 
class=&quot;org.springframework.jdbc.datasource.DataSourceTranszctionManager&quot;&gt;
&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
&lt;!-- 采用@Transactional注解方式使用事务 --&gt;
&lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;&gt;   
</code></pre>
<p>tx命名空间.</p>
<p>xmlns:tx=&ldquo;<a href="http://www.springframework.org/schema/tx%22">http://www.springframework.org/schema/tx&quot;</a>
<a href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a>
<a href="http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">http://www.springframework.org/schema/tx/spring-tx-2.5.xsd</a></p>
<h2 id="12采用基于xml方式配置事务">12、采用基于XML方式配置事务</h2>
<pre><code>&lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.jdbc.datasource.DatasourceTransactionManager&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
&lt;aop:config&gt;
  &lt;aop:pointcut id=&quot;transactionPointcut&quot; expression=&quot;execute()…&quot;/&gt;
  &lt;aop:advisor advice=&quot;txAdvice&quot; point-ref=&quot;transactionPointcut&quot;/&gt;
&lt;/aop:config&gt;
&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;
  &lt;tx:attributes&gt;
    &lt;tx:method name=&quot;get*&quot; read-only=&quot;true&quot; proportion=&quot;NOT_SUPPORTED&quot;/&gt;
    &lt;tx:method name=&quot;*&quot;/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;
</code></pre>
<h2 id="13spring管理事务提交的规则">13、Spring管理事务提交的规则：</h2>
<ul>
<li>遇到unckecked（运行期例外）事物会发生回滚，即：执行无效.</li>
<li>遇到checked事物不会发生回滚.</li>
<li>要求回滚：@Transcation(rollbackFor=Exception.class)</li>
<li>事物传播属性：@Transcation(propagation=Propagation. NOT_SUPPORTED)</li>
<li><strong>REQUIRED</strong>:（默认）业务方法需要在一个事务中运行. 如果方法运行时，已经处在一个事务中，那么加入到该事务中，否则自己创建一个新事务.</li>
<li><strong>NOT_SUPPORTED</strong>:声明方法不需要事务. 如果方法没有关联一个事务，容器不会为它开启事务；如果方法在一个事务中被调用，该事务会挂起，在方法调用结束后，原先的事务便会恢复执行.</li>
<li><strong>REQUIRESNEW</strong>:属性表明不管是否存在事务，业务方法总会为自己发起一个新的事务. 如果方法已经运行在一个事务中，则原事务会被挂起，新事务会被日创建，直到方法结束，新事务才算结束，原先的事务才会恢复.</li>
<li><strong>MANDATORY</strong>:该属性指定业务方法在某个事务范围，业务方法不能发起自己的事务. 如果业务方法在事务范围外被调用，则方法在没有事务的环境下执行.</li>
<li><strong>SUPPORKTS</strong>：这一事务属性表明，如果业务方法在某个事务范围内被调用，则方法成为该事务的一部分. 如果业务方法在没有事务的环境下调用，则方法在没有事务的环境下执行.</li>
<li><strong>Never</strong>:指定业务方法绝对不能在事务范围内执行. 若果业务方法在某个事务中执行，容器会抛出例外，只有业务方法没有关联到任何事务，才能正常执行.</li>
<li><strong>NESTED</strong>:如果一个活动的事务存在，则运行在一个嵌套的事务中，如果没有活动事务，则按REQUIRED属性执行，它使用了一个人单独的事务，这个事务拥有多个可以回滚的保存点. 内部事务的回滚不会对外部事务造成影响. 他只对DataSourceTransactionManager事务管理器起效.</li>
</ul>
<h2 id="14数据库系统提供了四种事务隔离级">14、数据库系统提供了四种事务隔离级</h2>
<p>　　数据库系统提供了四级事务隔离级别供用户选择. 不同的隔离级别采用不同的所类型实现，在四级隔离级别中，Serislixstion的隔离级别最高，Read Uncommited的隔离级别最低. 大多数据库默认的隔离级别为Read Commited，如SQLServer 2000 &hellip;</p>
<ul>
<li><strong>Read Uncommited</strong>：读未提交数据（会出现脏读，不可重复读和幻读）</li>
<li><strong>Read Commited</strong>：读已提交数据（会出现不可重复读和幻读）</li>
<li><strong>Repeatable Read</strong>：可重复读（会出现幻读）</li>
<li><strong>Serializable</strong>：串行化</li>
<li><strong>脏读</strong>：一个事务读取到另一个事务未提交的更新数据.</li>
<li><strong>可重复读</strong>：在同一个事务中多次读取数据时，能够保证所读数据一样，也就是，后续读取不能读到另外一个事务已提交的更新数据.</li>
<li><strong>不可重复读</strong>：在同一个事务中多次读取同一数据返回的结果有所不同，也就是，后续读取能读到另外一个事务已提交的更新数据.</li>
<li><strong>幻读</strong>：一个事务读取到另一事务已提交的insert数据.</li>
</ul>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  
  <a class="badge badge-light" href="/tag/java/">Java</a>
  
  <a class="badge badge-light" href="/tag/spring/">Spring</a>
  
</div>













  
  
    



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://CoMath21.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu229ab2ae4b832f0d41c08e3dce763b22_681268_270x270_fill_q75_lanczos_center.jpg" alt="Xin态好先生"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://CoMath21.github.io/">Xin态好先生</a></h5>
      
      <p class="card-text">机会是给有准备的人的.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:comath@qq.com" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1375264022&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener">
        <i class="fab fa-qq"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/CoMath21" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/" >
        <i class="fas fa-graduation-cap"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
    



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://CoMath21.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/comath/avatar_hu5dbed3c1e225bfb246e59dc7d66e77de_260503_270x270_fill_lanczos_center_2.png" alt="CoMath"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://CoMath21.github.io/">CoMath</a></h5>
      <h6 class="card-subtitle">微信公众号</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
</ul>

    </div>
  </div>


  














  
  
  <div class="article-widget content-widget-hr">
    <h3>相关</h3>
    <ul>
      
      <li><a href="/post/1-ssh%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/">SSH框架整合基本步骤</a></li>
      
      <li><a href="/post/1-hibernate/">Hibernate学习笔记</a></li>
      
      <li><a href="/post/1-struts2/">Struts2学习笔记</a></li>
      
      <li><a href="/post/1-%E6%85%95%E8%AF%BE%E7%BD%91mxonline/">Django学习笔记</a></li>
      
      <li><a href="/post/1-xml%E7%AC%94%E8%AE%B0/">XML学习笔记</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
  

  <p class="powered-by">
    © 2021 CoMath Powered by Hugo Theme Academic
  </p>

  
  






  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"没有找到结果","placeholder":"搜索...","results":"搜索结果"};
      const content_type = {
        'post': "文章",
        'project': "项目",
        'publication' : "出版物",
        'event' : "演讲",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/js/wowchemy.min.aeecf26c1eff6b9588dbafc1a9f3953c.js"></script>

    






</body>
</html>
